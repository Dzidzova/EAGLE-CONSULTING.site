;/*FB_PKG_DELIM*/

__d("MaybeNativePromise",["Promise"],(function(a,b,c,d,e,f){"use strict";var g;c=a.Promise||g||(g=b("Promise"));(g||b("Promise")).resolve();d=c;f["default"]=d}),66);
__d("VideoPlayerSphericalMediaGyroOverlay.react",["fbt","react","react-compiler-runtime","stylex","vulture"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||d("react"),l={gyroAnimate:{opacity:"x1hc1fzr",$$css:!0},gyroRoot:{backgroundColor:"xal61yo",height:"x5yr21d",start:"xtzzx4i",opacity:"xg01cxk",position:"x10l6tqk",top:"xwa60dl",transform:"x11lhmoz",transformStyle:"x1oyok0e",transitionDuration:"xippbsu",transitionProperty:"x19991ni",transitionTimingFunction:"xl405pv",width:"xh8yej3",zIndex:"x1vjfegm",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(5);a=a.isActive;c("vulture")("8lZpENlN5jG");var e;b[0]!==a?(e=(i||(i=c("stylex"))).props(l.gyroRoot,a&&l.gyroAnimate),b[0]=a,b[1]=e):e=b[1];b[2]===Symbol["for"]("react.memo_cache_sentinel")?(a=k.jsxs("div",babelHelpers["extends"]({className:"xatbrnm x14yjl9h xudhj91 x18nykt9 xww2gxu x972fbf xcfux6l x1qhh985 xm0m39n xy75621 xtzzx4i x1hc1fzr x10l6tqk xwa60dl xnrv1ok xni59qk"},{children:[k.jsxs("div",babelHelpers["extends"]({className:"x1x1c4bx x1c74tu6 xa4qsjk xgjxtca xnuwv8w x1lqxvo2 xgi2ibe x14yjl9h xudhj91 x18nykt9 xww2gxu x13fuv20 xu3j5b3 x1q0q8m5 x26u7qi xamhcws xol2nv xlxy82 x19p7ews xng8ra xit27t2 x10l6tqk xndqk7f x7p49u4 x1oyok0e x1247r65 x1xwhoib"},{children:[k.jsx("div",{className:"x1x1c4bx x1c74tu6 xa4qsjk x15r1fc xt01mlo x16vvtso x1voj42h x14yjl9h xudhj91 x18nykt9 xww2gxu x13fuv20 xu3j5b3 x1q0q8m5 x26u7qi x178xt8z xm81vs4 xso031l xy80clv xwa7hi xtzzx4i x10l6tqk xuuh30 xnhpnai x13w7htt x3zwtg x1esw782"}),k.jsx("div",{className:"x1x1c4bx x1c74tu6 xa4qsjk x1ahlmzr x15r1fc xt01mlo x16vvtso x1voj42h x14yjl9h xudhj91 x18nykt9 xww2gxu x13fuv20 xu3j5b3 x1q0q8m5 x26u7qi x178xt8z xm81vs4 xso031l xy80clv x10c73hc x10l6tqk xwa60dl x1cb1t30 x1u78mur x5uqrmk xxoll9x"})]})),k.jsx("div",babelHelpers["extends"]({className:"x1x1c4bx x1c74tu6 xa4qsjk x14yjl9h xudhj91 x18nykt9 xww2gxu x972fbf xcfux6l x1qhh985 xm0m39n xng8ra xtzzx4i x6ikm8r x10wlt62 x10l6tqk x1atx4j1 xuuh30 xuxw1ft xnhpnai x5uqrmk xi294cv"},{children:h._(/*BTDS*/"__JHASH__-CiiIBxoYaV__JHASH__",[h._implicitParam("=m0",k.jsx("span",babelHelpers["extends"]({className:"x972fbf xcfux6l x1qhh985 xm0m39n x14ctfv xjb2p0i x1f6kntn xng8ra xtzzx4i x1wus3qs x10l6tqk x2b8uid xuuh30 xnhpnai"},{children:h._(/*BTDS*/"__JHASH__mkeEtbWiQpF__JHASH__")})))])}))]})),b[2]=a):a=b[2];b[3]!==e?(a=k.jsx("div",babelHelpers["extends"]({},e,{children:a})),b[3]=e,b[4]=a):a=b[4];return a}g["default"]=a}),226);
__d("VideoPlayerSphericalFallbackCover.react",["fbt","FDSText.react","VideoPlayerSphericalMediaGyroOverlay.react","react","react-compiler-runtime","unrecoverableViolation","useCometRouterDispatcher","useFeedClickEventHandler","vulture"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react")),k=i.useState;function a(a){var b=d("react-compiler-runtime").c(15),e=a.videoTahoeUrl;c("vulture")("42AiSa3igxA");var f=c("useCometRouterDispatcher")();a=k(!1);var g=a[0],i=a[1];if(f==null)throw c("unrecoverableViolation")("Missing CometRouterDispatcher","comet_video_player");b[0]!==f||b[1]!==e?(a=function(){f.go(e,{})},b[0]=f,b[1]=e,b[2]=a):a=b[2];a=c("useFeedClickEventHandler")(a);var l;b[3]===Symbol["for"]("react.memo_cache_sentinel")?(l={className:"x6s0dn4 x1ey2m1c x9f619 x1ypdohk x78zum5 xdt5ytf xds687c x17qophe x13a6bvl x10l6tqk x13vifvy"},b[3]=l):l=b[3];var m,n;b[4]===Symbol["for"]("react.memo_cache_sentinel")?(m=function(){return i(!0)},n=function(){return i(!1)},b[4]=m,b[5]=n):(m=b[4],n=b[5]);var o,p;b[6]===Symbol["for"]("react.memo_cache_sentinel")?(o=j.jsx(c("VideoPlayerSphericalMediaGyroOverlay.react"),{isActive:!0}),p={className:"xwajptj x1n2onr6"},b[6]=o,b[7]=p):(o=b[6],p=b[7]);var q;b[8]!==g?(q=g?j.jsx(c("FDSText.react"),{color:"primaryOnMedia",type:"bodyLink3",children:h._(/*BTDS*/"__JHASH__hJPvJGomYP4__JHASH__")}):null,b[8]=g,b[9]=q):q=b[9];b[10]!==q?(g=j.jsx("div",babelHelpers["extends"]({},p,{children:q})),b[10]=q,b[11]=g):g=b[11];b[12]!==a||b[13]!==g?(p=j.jsxs("div",babelHelpers["extends"]({},l,{onClick:a,onMouseEnter:m,onMouseLeave:n,role:"link",tabIndex:0,children:[o,g]})),b[12]=a,b[13]=g,b[14]=p):p=b[14];return p}g["default"]=a}),226);
__d("handleCometRelayExpiredVideoUrlRefresh",["ErrorMetadata","ErrorSerializer","FBLogger","err"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var d=b==null?void 0:b.video,e=d==null?void 0:d.rmd_refreshed_url,f=e==null?void 0:e.new_url,g=e==null?void 0:e.reason,h=null;b==null?h=c("err")("Video URL refresh GraphQL response data is "+(b===null?"null":"undefined")):d==null?h=c("err")("Video URL refresh GraphQL response video is "+(d===null?"null":"undefined")):e==null?h=c("err")("Video URL refresh GraphQL response video.rmd_refreshed_url is "+(e===null?"null":"undefined")):(f==null||f==="")&&(g==null||g==="")&&(h=c("err")("Video URL refresh GraphQL response video.rmd_refreshed_url.new_url is "+(f===""?"an empty string":f===null?"null":"undefined")+" and video.rmd_refreshed_url.reason is "+(g===""?"an empty string":g===null?"null":"undefined")));if(h!=null){b=new(c("ErrorMetadata"))();b.addEntry("COMET_VIDEO","VIDEO_ID",String(a));h.metadata=b;throw c("FBLogger")("comet_video_player").catching(h).mustfixThrow("Video URL refresh failed for ID: %s - %s",String(a),c("ErrorSerializer").toReadableMessage(h))}return{reason:(d=g)!=null?d:null,refreshedUrl:(e=f)!=null?e:null}}g["default"]=a}),98);
__d("oz-player/shims/ozReportUnexpectedError",["oz-player/shims/www/ozReportUnexpectedErrorWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/ozReportUnexpectedErrorWWW")}),98);
__d("oz-player/loggings/OzLoggingUtils",["oz-player/shims/ozReportUnexpectedError"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){a=a.getOperationLogger(b).start();try{return c(a)}catch(b){a.setError(b);throw b}finally{a.log()}}function b(a,b,d,e,f){e===void 0&&(e=function(){});f===void 0&&(f=function(){});var g=b.getOperationLogger(d).start();e(g);a.then(function(a){f(g),g.log()},function(a){f(g),g.setError(a),g.log()})["catch"](function(a){c("oz-player/shims/ozReportUnexpectedError")(a,d+" logger")})}g.executeOperationAndLog=a;g.monitorPromiseAndLogOperation=b}),98);
__d("oz-player/loggings/OzOperationLoggerBase",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$52=new Map(),this.$1=a}var b=a.prototype;b.start=function(){var a=Date.now();this.setClientTimeBegin(a);this.setClientTimeEnd(null);this.setClientTimeDuration(null);return this};b.log=function(){var a=Date.now(),b=this.getClientTimeBegin(),c=this.getClientTimeEnd();(b==null||b===0)&&(b=a,this.setClientTimeBegin(b));(c==null||c===0)&&(c=a,this.setClientTimeEnd(c));this.setClientTimeDuration(c-b)};b.setError=function(a){this.$2=a;return this};b.setPerSessionSampleRate=function(a){this.$3=a;return this};b.setAppendTarget=function(a){this.$47=a;return this};b.setOneObserved=function(a){this.$44=a;return this};b.setOneReqWave=function(a){this.$45=a;return this};b.setOneResWave=function(a){this.$46=a;return this};b.setIsP2pPlayback=function(a){this.$43=a;return this};b.setResult=function(a){this.$4=a;return this};b.setType=function(a){this.$5=a;return this};b.setClientTimeBegin=function(a){this.$6=a;return this};b.setClientTimeDuration=function(a){this.$7=a;return this};b.setClientTimeEnd=function(a){this.$8=a;return this};b.setSegmentCount=function(a){this.$15=a;return this};b.setTimeToFirstByte=function(a){this.$9=a;return this};b.setTimeToLastByte=function(a){this.$10=a;return this};b.setTimeToRequestStart=function(a){this.$11=a;return this};b.setTimeToRequestSent=function(a){this.$12=a;return this};b.setReason=function(a){this.$13=a;return this};b.setResource=function(a){this.$14=a;return this};b.setSegmentStartTime=function(a){this.$16=a;return this};b.setSegmentEndTime=function(a){this.$17=a;return this};b.setLength=function(a){this.$18=a;return this};b.setLiveheadPosition=function(a){this.$19=a;return this};b.setLiveheadSeqNumHeader=function(a){this.$20=a;return this};b.setLiveheadSeqNumMpd=function(a){this.$21=a;return this};b.setManifestType=function(a){this.$22=a;return this};b.setMediaSourceNewDuration=function(a){this.$23=a;return this};b.setMediaSourcePreviousDuration=function(a){this.$24=a;return this};b.setPriorityFloat=function(a){this.$25=a;return this};b.setAppendedBufferMs=function(a){this.$26=a;return this};b.setInitiator=function(a){this.$27=a;return this};b.setPreloadTime=function(a){this.$28=a;return this};b.setConcluder=function(a){this.$29=a;return this};b.setPreviousRepresentationID=function(a){this.$30=a;return this};b.setRepresentationID=function(a){this.$31=a;return this};b.setStreamSwitchReason=function(a){this.$32=a;return this};b.setState=function(a){this.$33=a;return this};b.setContentLengthHeader=function(a){this.$34=a;return this};b.setOriginHitHeader=function(a){this.$36=a;return this};b.setEdgeHitHeader=function(a){this.$37=a;return this};b.setFNAHitHeader=function(a){this.$38=a;return this};b.setCode=function(a){this.$35=a;return this};b.setResponseTimeMsHeader=function(a){this.$39=a;return this};b.setIsTemplatedManifest=function(a){this.$40=a;return this};b.setIsLatencyCachupEnabled=function(a){this.$41=a;return this};b.setPlayerFormat=function(a){this.$42=a;return this};b.setIsRingBufferSample=function(a){this.$48=a;return this};b.setIsOnline=function(a){this.$49=a;return this};b.setProxyStatusHeader=function(a){this.$50=a;return this};b.setPlaybackFbmsParam=function(a){return this};b.setPreferredEdgeLatency=function(a){this.$51=a;return this};b.setUserInfo=function(a){return this};b.setDynamicStatusHeader=function(a){return this};b.setIsMixedCodecManifest=function(a){this.$53=a;return this};b.getPerSessionSampleRate=function(){return this.$3};b.setMediaSourceSourceBuffer=function(a,b){this.$52.set(a,b);return this};b.unsetMediaSourceSourceBuffers=function(){this.$52.clear();return this};b.getError=function(){return this.$2};b.getResult=function(){return this.$4};b.getType=function(){return this.$5};b.getClientTimeBegin=function(){return this.$6};b.getClientTimeEnd=function(){return this.$7!=null?this.$6!=null?this.$6+this.$7:null:this.$8};b.getTimeToRequestStart=function(){return this.$11};b.getTimeToRequestSent=function(){return this.$12};b.getReason=function(){return this.$13};b.getResource=function(){return this.$14};b.getOperationName=function(){return this.$1};b.getSegmentStartTime=function(){return this.$16};b.getSegmentEndTime=function(){return this.$17};b.getLength=function(){return this.$18};b.getLiveheadPosition=function(){return this.$19};b.getManifestType=function(){return this.$22};b.getIsMixedCodecManifest=function(){return this.$53};b.getPriorityFloat=function(){return this.$25};b.getAppendedBufferMs=function(){return this.$26};b.getInitiator=function(){return this.$27};b.getPreloadTime=function(){return this.$28};b.getConcluder=function(){return this.$29};b.getContentLengthHeader=function(){return this.$34};b.getOriginHitHeader=function(){return this.$36};b.getEdgeHitHeader=function(){return this.$37};b.getFNAHitHeader=function(){return this.$38};b.getCode=function(){return this.$35};b.getResponseTimeMsHeader=function(){return this.$39};b.getIsTemplatedManifest=function(){return this.$40};b.getOneObserved=function(){return this.$44};b.getOneReqWave=function(){return this.$45};b.getOneResWave=function(){return this.$46};b.getAppendTarget=function(){return this.$47};b.getIsRingBufferSample=function(){return this.$48};b.getIsOnline=function(){return this.$49};b.getProxyStatusHeader=function(){return this.$50};b.getMediaSourceSourceBuffers=function(){return this.$52};return a}();f["default"]=a}),66);
__d("oz-player/shims/www/OzMaybeNativePromiseWWW",["cr:3014"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:3014")}),98);
__d("oz-player/shims/OzMaybeNativePromise",["oz-player/shims/www/OzMaybeNativePromiseWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/OzMaybeNativePromiseWWW")}),98);
__d("oz-player/utils/OzErrorEmitter",["oz-player/shims/OzEventEmitter","oz-player/shims/ozvariant"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var d;b===void 0&&(b=!1);d=a.call(this)||this;d.$OzErrorEmitter$p_1=!1;d.$OzErrorEmitter$p_2=!1;d.$OzErrorEmitter$p_3=[];d.emitError=function(a){!d.$OzErrorEmitter$p_1?d.$OzErrorEmitter$p_2?d.$OzErrorEmitter$p_3.push(a):d.$OzErrorEmitter$p_1||c("oz-player/shims/ozvariant")(0,14038):d.emit("error",a)};d.$OzErrorEmitter$p_2=b;return d}var d=b.prototype;d.onError=function(a){this.$OzErrorEmitter$p_1=!0;a=this.addListener("error",a);this.$OzErrorEmitter$p_2&&this.$OzErrorEmitter$p_3.length>0&&this.$OzErrorEmitter$p_3.forEach(this.emitError);return a};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/drm/OzDrmManager",["oz-player/drm/OzDrmUtils","oz-player/loggings/OzLoggingUtils","oz-player/loggings/OzOperationLoggerBase","oz-player/shims/OzDOMEventListener","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzSubscriptionsHandler","oz-player/utils/OzErrorEmitter","oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,e){var f=this;e===void 0&&(e=null);this.$1=null;this.$2=new Map();this.$4=!1;this.$6=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$7=new(c("oz-player/utils/OzErrorEmitter"))();this.$8=!1;this.$9=null;this.$10=0;this.$11=[];this.$12=[];this.$22=function(a,b){a instanceof c("oz-player/loggings/OzOperationLoggerBase")&&a.getError()&&a.setResult("failed"),b!=null&&a.setReason(b)};this.$19=function(a){if(f.$4)return c("oz-player/shims/OzMaybeNativePromise").reject(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DRM_MANAGER",description:"OzDrmManager destroyed before call to mediaKeySystemAccess.createMediaKeys()."}));var b=f.$5.mediaKeys!=null?c("oz-player/shims/OzMaybeNativePromise").resolve(f.$5.mediaKeys):a.createMediaKeys();b=b.then(function(b){return{mediaKeySystemAccess:a,mediaKeys:b}});d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(b,f.$3,"drm_create_media_keys",function(){},f.$22);return b};this.$20=function(a){if(f.$4)return c("oz-player/shims/OzMaybeNativePromise").reject(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DRM_MANAGER",description:"OzDrmManager destroyed before call to setMediaKeys()"}));var b=a.mediaKeySystemAccess,e=a.mediaKeys;if(!e)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DRM_MANAGER",description:"No mediaKeys for mediaKeySystemAccess"});a=f.$5.setMediaKeys(e).then(function(){if(f.$4)return c("oz-player/shims/OzMaybeNativePromise").reject(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DRM_MANAGER",description:"OzDrmManager destroyed after setMediaKeys() called."}));var a=Array.from(f.$2.values()).find(function(a){return a.getKeySystem()===b.keySystem});if(!a)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DRM_MANAGER",description:"Can't find OzDrmProvider for keySystem "+b.keySystem});var g=a.getServerCertificate();return g?e.setServerCertificate(g).then(function(){return{mediaKeys:e,provider:a}}):{mediaKeys:e,provider:a}});d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(a,f.$3,"drm_set_media_keys",function(){},f.$22);return a};this.$21=function(a){var b=a.mediaKeys,e=a.provider;a=e.getInitDatas();if(a.length===0){f.$6.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(f.$5,"encrypted",function(a){f.$23(b,e,a)["catch"](function(a){f.$14(d("oz-player/utils/OzErrorUtils").convertPromiseRejectionReasonToOzError(a,{type:"OZ_DRM_MANAGER",description:"DRM encrypted rejection"}))})}));return c("oz-player/shims/OzMaybeNativePromise").resolve([])}a=a.map(function(a){return f.$23(b,e,{initData:a.data,initDataType:a.type})});a=c("oz-player/shims/OzMaybeNativePromise").all(a);d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(a,f.$3,"drm_request_license",function(){},f.$22);return a};this.$5=b;this.$1=e;this.$3=a.cloneContext().setType("drm_manager")}var b=a.prototype;b.hasContentProtections=function(){return this.$9};b.onError=function(a){return this.$7.onError(a)};b.$13=function(a){this.$7.emitError(a)};b.$14=function(a){var b;b=(b=(b=this.$1)==null?void 0:b.maxStartEMEAttempts)!=null?b:-1;this.$10<b?this.$15():this.$13(a)};b.addProvider=function(a){this.$2.set(a.getSchemeId(),a)};b.getProviderForSchemeId=function(a){return this.$2.get(a)};b.$16=function(a){if(!a)return null;var b=[];for(var c=0;c<a.length;c++){var e=a[c],f=e.$.schemeIdUri;f=this.getProviderForSchemeId(f);if(f){var g=f.getInitDatas();if(g.length==0&&e["cenc:pssh"]&&e["cenc:pssh"].length===1){e=(e=e["cenc:pssh"][0]._)!=null?e:"";e=d("oz-player/drm/OzDrmUtils").base64ToUint8Array(e.replace(/-/g,"+").replace(/_/g,"/"));g=[{data:e,type:"cenc"}];f.setInitDatas(g)}b.push({provider:f,initDatas:g})}}return b};b.$15=function(){try{this.$8=!1,this.startEME(this.$11,this.$12)}catch(b){var a=b;this.$13(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DRM_MANAGER",description:"Restart EME failed with: "+String(a),extra:{}}))}};b.startEME=function(a,b){var c=this;if(this.$8)return;this.$8=!0;this.$10+=1;this.$11=a;this.$12=b;var e=new Map();this.$17(b,e,"audio");this.$17(a,e,"video");var f;e.forEach(function(a,b){!f?f=c.$18(b,a):f=f["catch"](function(){return c.$18(b,a)})});if(!f){this.$9=!1;return}this.$9=!0;var g=this.$3.getOperationLogger("drm_setup").start();f.then(this.$19).then(this.$20).then(this.$21).then(function(){return g.log()},function(a){a=d("oz-player/utils/OzErrorUtils").convertPromiseRejectionReasonToOzError(a,{type:"OZ_DRM_MANAGER",description:"DRM keyPromiseChain rejection"});c.$13(a);g.setResult("failed").setError(a).log()})};b.$17=function(a,b,c){var d=this;a.forEach(function(a){var e=d.$16(a.getContentProtectionXml()),f=a.getMimeCodecs();e!=null&&e.forEach(function(a){a=a.provider;var d=a.getKeySystem(),e=b.get(d);e||(e={audioCapabilities:new Map(),videoCapabilities:new Map(),distinctiveIdentifier:a.getRequireDistinctiveIdentifier(),persistentState:a.getRequirePersistentState(),sessionTypes:a.getDrmSessionTypes(),initDataTypes:a.getInitDataTypes()},b.set(d,e));c==="audio"&&!e.audioCapabilities.has(f)&&e.audioCapabilities.set(f,{contentType:f,robustness:a.getAudioRobustness()});c==="video"&&!e.videoCapabilities.has(f)&&e.videoCapabilities.set(f,{contentType:f,robustness:a.getVideoRobustness()})})})};b.destroy=function(){this.$6.release(),this.$4=!0};b.$18=function(a,b){var e=this,f={audioCapabilities:Array.from(b.audioCapabilities.values()),videoCapabilities:Array.from(b.videoCapabilities.values()),distinctiveIdentifier:b.distinctiveIdentifier,persistentState:b.persistentState,sessionTypes:b.sessionTypes,initDataTypes:b.initDataTypes};b=window.navigator.requestMediaKeySystemAccess(a,[f]);d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(b,this.$3,"drm_request_media_key_system_access",function(){},function(b){var d=null;b instanceof c("oz-player/loggings/OzOperationLoggerBase")&&b.getError()&&(d="keySystem: "+a+";domConfig: "+JSON.stringify(f));return e.$22(b,d)});return b};b.$23=function(a,b,e){var f=this,g=a.createSession();this.$6.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(g,"message",function(a){f.$24(g,b,a)["catch"](function(a){f.$14(d("oz-player/utils/OzErrorUtils").convertPromiseRejectionReasonToOzError(a,{type:"OZ_DRM_MANAGER",description:"DRM message rejection"}))})}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(g,"keystatuseschange",function(a){f.$25(g)["catch"](function(a){f.$14(d("oz-player/utils/OzErrorUtils").convertPromiseRejectionReasonToOzError(a,{type:"OZ_DRM_MANAGER",description:"DRM keystatuseschange rejection"}))})}));return g.generateRequest(e.initDataType,e.initData)};b.$24=function(a,b,c){var e=this;c=b.getLicenseRequestInfo(c.message.slice(0));var f=this.$3.getOperationLogger("drm_fetch_license").setResource(c.url).start();return window.fetch(c.url,c).then(function(c){c.ok?f.setResult("success").setCode(c.status).log():f.setResult("failed").setCode(c.status).setError(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DRM_MANAGER",description:"DRM license fetch HTTP status not OK ("+c.status+")",extra:{code:c.status.toString()}})).log();return c.arrayBuffer().then(function(f){var g=new Uint8Array(f);g=b.parseLicenseResponse(g);if(g==null||g.byteLength===0){var h=g==null?"License is null or undefined.":"License is 0 bytes.";!c.ok?h+=" HTTP status not OK ("+c.status+")":f.byteLength===0&&(h+=" HTTP status OK ("+c.status+"), but response body is 0 bytes");f=d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DRM_MANAGER",description:"No license for "+b.getKeySystem()+" - "+h,extra:{code:c.status.toString(),headers:c.headers,url:c.url}});h=(h=(h=e.$1)==null?void 0:h.throwNoLicenseError)!=null?h:!1;if(h)throw f;else e.$13(f)}else a.update(g)})})};b.$25=function(a){return a.expiration<Date.now()?a.close():c("oz-player/shims/OzMaybeNativePromise").resolve()};return a}();g.OzDrmManager=a}),98);
__d("oz-player/loggings/OzDevConsolePerfLogger",["oz-player/loggings/OzOperationLoggerBase","oz-player/loggings/OzPerfLoggerProviderBase"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a;for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];(a=console).debug.apply(a,["[oz]"].concat(c))}function i(){var a;for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];(a=console).error.apply(a,["[oz]"].concat(c))}function j(a,b){return Math.floor(a).toString().padStart(b,"0")}function k(a,b){b===void 0&&(b=null);var c=function(a){return j(a.getHours(),2)+":"+j(a.getMinutes(),2)+":"+j(a.getSeconds(),2)+" "+j(a.getMilliseconds(),3)},d=b?b.getTime()-a.getTime():0;return"["+c(a)+(b?" - "+c(b):"")+" ("+d+" ms)]"}function l(a){return a==="failed"?i:h}function m(a){return a==null||a===0?null:a.toFixed(2)}a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.createOperationLogger=function(a){return new n(a)};c.createLoggerProvider=function(){return new b()};return b}(c("oz-player/loggings/OzPerfLoggerProviderBase"));var n=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}var c=a.prototype;c.log=function(){b.prototype.log.call(this);var a=this.getClientTimeBegin()||0,c=this.getClientTimeEnd();c=c!=null&&c!==0?new Date(c):null;var d=this.getResult()||"success",e=this.getType(),f=this.getInitiator(),g=this.getResource(),h=m(this.getSegmentStartTime()),i=m(this.getSegmentEndTime());l(d)("["+d+"]",this.getOperationName()+": "+k(new Date(a),c),e!=null&&e!==""?"["+e+"]":"",h!=null&&h!==""&&i!=null&&i!==""?"[segment time range: "+h+" - "+i+"]":"",f||"",g||"")};return a}(c("oz-player/loggings/OzOperationLoggerBase"));g.OzDevConsolePerfLoggerProvider=a;g.OzDevConsoleOperationLogger=n}),98);
__d("oz-player/loggings/OzMultiDestinationPerfLogger",["oz-player/loggings/OzOperationLoggerBase","oz-player/loggings/OzPerfLoggerProviderBase"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this)||this;c.$OzMultiDestinationPerfLoggerProvider$p_1=b;return c}var c=b.prototype;c.createOperationLogger=function(a){return new h(a,this.$OzMultiDestinationPerfLoggerProvider$p_1.map(function(b){return b.getOperationLogger(a)}))};c.createLoggerProvider=function(){return new b(this.$OzMultiDestinationPerfLoggerProvider$p_1)};return b}(c("oz-player/loggings/OzPerfLoggerProviderBase"));var h=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){a=b.call(this,a)||this;a.$OzMultiDestinationOperationLogger$p_1=c;return a}var c=a.prototype;c.start=function(){b.prototype.start.call(this);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.start()});return this};c.setPerSessionSampleRate=function(a){b.prototype.setPerSessionSampleRate.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setPerSessionSampleRate(a)});return this};c.setResult=function(a){b.prototype.setResult.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setResult(a)});return this};c.setError=function(a){b.prototype.setError.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setError(a)});return this};c.setType=function(a){b.prototype.setType.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setType(a)});return this};c.setMediaSourcePreviousDuration=function(a){b.prototype.setMediaSourcePreviousDuration.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setMediaSourcePreviousDuration(a)});return this};c.setMediaSourceNewDuration=function(a){b.prototype.setMediaSourceNewDuration.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setMediaSourceNewDuration(a)});return this};c.setClientTimeBegin=function(a){b.prototype.setClientTimeBegin.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setClientTimeBegin(a)});return this};c.setClientTimeDuration=function(a){b.prototype.setClientTimeDuration.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setClientTimeDuration(a)});return this};c.setClientTimeEnd=function(a){b.prototype.setClientTimeEnd.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setClientTimeEnd(a)});return this};c.setSegmentCount=function(a){b.prototype.setSegmentCount.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setSegmentCount(a)});return this};c.setTimeToFirstByte=function(a){b.prototype.setTimeToFirstByte.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setTimeToFirstByte(a)});return this};c.setTimeToLastByte=function(a){b.prototype.setTimeToLastByte.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setTimeToLastByte(a)});return this};c.setTimeToRequestStart=function(a){b.prototype.setTimeToRequestStart.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setTimeToRequestStart(a)});return this};c.setTimeToRequestSent=function(a){b.prototype.setTimeToRequestSent.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setTimeToRequestSent(a)});return this};c.setReason=function(a){b.prototype.setReason.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setReason(a)});return this};c.setResource=function(a){b.prototype.setResource.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setResource(a)});return this};c.setSegmentStartTime=function(a){b.prototype.setSegmentStartTime.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setSegmentStartTime(a)});return this};c.setSegmentEndTime=function(a){b.prototype.setSegmentEndTime.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setSegmentEndTime(a)});return this};c.setAppendedBufferMs=function(a){b.prototype.setAppendedBufferMs.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setAppendedBufferMs(a)});return this};c.setLength=function(a){b.prototype.setLength.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setLength(a)});return this};c.setLiveheadPosition=function(a){b.prototype.setLiveheadPosition.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setLiveheadPosition(a)});return this};c.setLiveheadSeqNumHeader=function(a){b.prototype.setLiveheadSeqNumHeader.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setLiveheadSeqNumHeader(a)});return this};c.setLiveheadSeqNumMpd=function(a){b.prototype.setLiveheadSeqNumMpd.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setLiveheadSeqNumMpd(a)});return this};c.setManifestType=function(a){b.prototype.setManifestType.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setManifestType(a)});return this};c.setPriorityFloat=function(a){b.prototype.setPriorityFloat.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setPriorityFloat(a)});return this};c.setInitiator=function(a){b.prototype.setInitiator.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setInitiator(a)});return this};c.setPreloadTime=function(a){b.prototype.setPreloadTime.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setPreloadTime(a)});return this};c.setConcluder=function(a){b.prototype.setConcluder.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setConcluder(a)});return this};c.setPreviousRepresentationID=function(a){b.prototype.setPreviousRepresentationID.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setPreviousRepresentationID(a)});return this};c.setRepresentationID=function(a){b.prototype.setRepresentationID.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setRepresentationID(a)});return this};c.setState=function(a){b.prototype.setState.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setState(a)});return this};c.setContentLengthHeader=function(a){b.prototype.setContentLengthHeader.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setContentLengthHeader(a)});return this};c.setEdgeHitHeader=function(a){b.prototype.setEdgeHitHeader.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setEdgeHitHeader(a)});return this};c.setFNAHitHeader=function(a){b.prototype.setFNAHitHeader.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setFNAHitHeader(a)});return this};c.setOriginHitHeader=function(a){b.prototype.setOriginHitHeader.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setOriginHitHeader(a)});return this};c.setCode=function(a){b.prototype.setCode.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setCode(a)});return this};c.setResponseTimeMsHeader=function(a){b.prototype.setResponseTimeMsHeader.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setResponseTimeMsHeader(a)});return this};c.setIsTemplatedManifest=function(a){b.prototype.setIsTemplatedManifest.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setIsTemplatedManifest(a)});return this};c.setIsLatencyCachupEnabled=function(a){b.prototype.setIsLatencyCachupEnabled.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setIsLatencyCachupEnabled(a)});return this};c.setPlayerFormat=function(a){b.prototype.setPlayerFormat.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setPlayerFormat(a)});return this};c.setIsP2pPlayback=function(a){b.prototype.setIsP2pPlayback.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setIsP2pPlayback(a)});return this};c.setOneObserved=function(a){b.prototype.setOneObserved.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setOneObserved(a)});return this};c.setOneReqWave=function(a){b.prototype.setOneReqWave.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setOneReqWave(a)});return this};c.setOneResWave=function(a){b.prototype.setOneResWave.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setOneResWave(a)});return this};c.setAppendTarget=function(a){b.prototype.setAppendTarget.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setAppendTarget(a)});return this};c.setIsRingBufferSample=function(a){b.prototype.setIsRingBufferSample.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setIsRingBufferSample(a)});return this};c.setIsOnline=function(a){b.prototype.setIsOnline.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setIsOnline(a)});return this};c.setIsMixedCodecManifest=function(a){b.prototype.setIsMixedCodecManifest.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setIsMixedCodecManifest(a)});return this};c.setProxyStatusHeader=function(a){b.prototype.setProxyStatusHeader.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setProxyStatusHeader(a)});return this};c.setPlaybackFbmsParam=function(a){b.prototype.setPlaybackFbmsParam.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setPlaybackFbmsParam(a)});return this};c.setPreferredEdgeLatency=function(a){b.prototype.setPreferredEdgeLatency.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setPreferredEdgeLatency(a)});return this};c.setUserInfo=function(a){b.prototype.setUserInfo.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setUserInfo(a)});return this};c.setDynamicStatusHeader=function(a){b.prototype.setDynamicStatusHeader.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setDynamicStatusHeader(a)});return this};c.setMediaSourceSourceBuffer=function(a,c){b.prototype.setMediaSourceSourceBuffer.call(this,a,c);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setMediaSourceSourceBuffer(a,c)});return this};c.unsetMediaSourceSourceBuffers=function(){b.prototype.unsetMediaSourceSourceBuffers.call(this);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.unsetMediaSourceSourceBuffers()});return this};c.log=function(){b.prototype.log.call(this),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.log()})};return a}(c("oz-player/loggings/OzOperationLoggerBase"));g.OzMultiDestinationPerfLoggerProvider=a}),98);
__d("oz-player/loggings/OzOperationLoggerObserver",["oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.$1=new(c("oz-player/shims/OzSubscriptionsHandler"))()}var b=a.prototype;b.observe=function(a,b){var c;a=a.map(function(a){var c=a.setOperationLoggedListener(function(a){var c=a.getClientTimeBegin()||0,d=a.getClientTimeEnd()||0;b.getOperationLogger(a.getOperationName()).setClientTimeBegin(c).setClientTimeDuration(d-c).setClientTimeEnd(d).setLength(a.getLength()).setResult(a.getResult()||"success").setInitiator(a.getInitiator()).setType(a.getType()).log()});a.activate();return c});(c=this.$1).addSubscriptions.apply(c,a)};b.destroy=function(){this.$1.release()};return a}();g["default"]=a}),98);
__d("oz-player/shims/www/OzNetworkDiagnosticsWWW",["VideoPlayerOzWWWGlobalConfig"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){if(!a)return null;a=parseInt(a.get(b),10);return!isNaN(a)&&isFinite(a)?a:null}function i(a,b,c){if(!a||b===""||c==="")return null;b=(a=a.get(b))!=null?a:"";a=b.split(";");for(b=0;b<a.length;b++){var d=a[b].split(":");if(d.length===2&&d[0]===c){d=parseInt(d[1],10);return isFinite(d)?d:null}}return null}a={getNextValidSegmentId:function(a){return h(a,"x-fb-next-valid-segment-id")},getResponseTimeMs:function(a){return h(a,"x-fb-response-time-ms")},getDvlSegmentPTS:function(a){return h(a,"x-fb-segment-pts-start")},getDvlStatus:function(a){return a==null?void 0:a.get("x-fb-dynamic-status")},getUsableResponseSizeForBandwidthEstimation:function(a){return h(a,"x-fb-dynamic-predictive-response-chunk-size")},getBandwidthMeanEstimate:function(a){var b=c("VideoPlayerOzWWWGlobalConfig").getString("bandwidth_estimate_header_key",""),d=c("VideoPlayerOzWWWGlobalConfig").getString("bandwidth_estimate_key","");return i(a,b,d)},getBandwidthStandardDeviationEstimate:function(a){return h(a,"x-bwe-std-dev")},getTimeToFirstByteMsEstimate:function(a){return h(a,"x-mrtt-ms")}};b=a;g["default"]=b}),98);
__d("oz-player/shims/OzNetworkDiagnostics",["oz-player/shims/www/OzNetworkDiagnosticsWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/OzNetworkDiagnosticsWWW")}),98);
__d("oz-player/manifests/OzDynamicVideoLibrary",["oz-player/shims/OzNetworkDiagnostics"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$4=null;this.$5=null;this.$6=new RegExp(/(.*)\.(m4v|m4a)(\?|$)/);this.$7={m4a:{time:0},m4v:{time:0}};this.$8={audio:"m4a",video:"m4v"};this.$9={};a=a.config;this.$3=a}var b=a.prototype;b.getLastSegmentStartPTS=function(){return this.$1};b.getLast200RequestedTime=function(){return this.$5};b.getLast200RequestedUrlDecisionMinTime=function(){var a=[];for(var b in this.$7)a.push(this.$7[b].time);return Math.min.apply(Math,a)};b.getLast200RequestedUrlDecisionTimeByMimeType=function(a){return(a=this.$7[this.$8[a]])==null?void 0:a.time};b.updateWithResponse=function(a,b,d,e){var f;if(!e.headers||e.status!=200)return;this.$5=b;this.$1=(f=c("oz-player/shims/OzNetworkDiagnostics").getDvlSegmentPTS(e.headers))!=null?f:this.$1;this.$2=c("oz-player/shims/OzNetworkDiagnostics").getDvlStatus(e.headers);this.$10(a,d);(this.$2!=null||this.$2==="200")&&(this.$4=b)};b.$10=function(a,b){a=this.$6.exec(a);if(a!=null){a=a[2];b!=null&&(this.$7[a]={time:b})}};b.shouldRequestDynamicInfo=function(a){if(a!=="video")return!1;this.$11(a);a=this.$12(a);return a!=null&&a<=this.$3.getNumber("dvl_initial_segment_ignore_count")?!1:this.$3.getNumber("dvl_update_interval_ms")==0||this.$4==null||this.$4+this.$3.getNumber("dvl_update_interval_ms")<=Date.now()};b.$11=function(a){this.$9[a]==null&&(this.$9[a]={segmentCount:0});return this.$9[a].segmentCount=this.$9[a].segmentCount!=null?this.$9[a].segmentCount+1:0};b.$12=function(a){return this.$9[a].segmentCount};return a}();g["default"]=a}),98);
__d("oz-player/manifests/OzRepresentationBase",["oz-player/parsers/getMIMECodecs","oz-player/shims/ozvariant","oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m){this.$1=a,this.$2=b,this.$11=c,this.$6=g,this.$3=d,this.$4=e,this.$5=f,this.$7=h,this.$8=i,this.$9=j,this.$10=k,this.$12=l,this.$13=m}var b=a.prototype;b.getContentProtectionXml=function(){return this.$2};b.getID=function(){return this.$11};b.getBandwidth=function(){return this.$10};b.getMimeCodecs=function(){return c("oz-player/parsers/getMIMECodecs")(this.$3,this.$4)};b.getMimeType=function(){return this.$3};b.getCodecs=function(){return this.$4};b.getVariantKey=function(){return this.$5};b.getLang=function(){return this.$6};b.getRole=function(){return this.$7};b.getDisplayLabel=function(){return this.$11};b.getInitSegment=function(){return this.$8};b.getCustomFieldFirstSegment=function(){return this.$12};b.getCustomField=function(a){if(this.$13==null||!this.$13[a])throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_REPRESENTATION_PARSER",description:"Custom field "+a+" is not specified by caller",extra:{code:"OZ_RP-8"}});a=this.$13[a];try{return a(this.$1)}catch(a){return null}};b.updateWith=function(b){b instanceof a||c("oz-player/shims/ozvariant")(0,229),this.$9.updateWith(b.$9)};b.getSegmentByTime=function(a){return this.$9.getSegmentByTime(a)};b.getSegment=function(a){return this.$9.getSegment(a)};b.getPredictedSegmentAfter=function(a){return this.$9.getPredictedSegmentAfter(a)};b.canPredict=function(){return this.$9.canPredict()};b.canApproximateId=function(){return this.$9.canApproximateId()};b.getSegmentAfter=function(a){return this.$9.getSegmentAfter(a)};b.isEndingSegment=function(a){return this.$9.isEndingSegment(a)};b.addUpdateListener=function(a){return this.$9.addUpdateListener(a)};b.getTimeRanges=function(){return this.$9.getTimeRanges()};b.blockTimeRange=function(a){this.$9.blockTimeRange(a)};b.getEndingSegment=function(){return this.$9.getEndingSegment()};b.getMaxGopSec=function(){return this.$9.getMaxGopSec()};return a}();g["default"]=a}),98);
__d("oz-player/manifests/OzVideoRepresentation",["oz-player/manifests/OzRepresentationBase"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){c=a.call(this,b,c,d,e,f,g,h,i,j,k,l,m,n)||this;c.$OzVideoRepresentation$p_5=null;c.$OzVideoRepresentation$p_6=null;c.$OzVideoRepresentation$p_7=null;c.$OzVideoRepresentation$p_1=o;c.$OzVideoRepresentation$p_2=p;c.$OzVideoRepresentation$p_4=n;c.$OzVideoRepresentation$p_3=b;if(n!=null){if(n.playbackResolutionMos!=null){d=c.getCustomField("playbackResolutionMos");c.$OzVideoRepresentation$p_7=d!=null?String(d):null}if(n.playbackResolutionCsvqm!=null){e=c.getCustomField("playbackResolutionCsvqm");c.$OzVideoRepresentation$p_6=e!=null?String(e):null}}return c}var c=b.prototype;c.getQualityScoreCurveString=function(a){if(a==="csvqm")return this.$OzVideoRepresentation$p_6;else return this.$OzVideoRepresentation$p_7};c.getWidth=function(){return this.$OzVideoRepresentation$p_1};c.getHeight=function(){return this.$OzVideoRepresentation$p_2};c.getDisplayLabel=function(){if(this.$OzVideoRepresentation$p_5!=null)return this.$OzVideoRepresentation$p_5;var a=this.$OzVideoRepresentation$p_4?this.$OzVideoRepresentation$p_4.qualityLabel:null;a&&(this.$OzVideoRepresentation$p_5=a(this.$OzVideoRepresentation$p_3));(this.$OzVideoRepresentation$p_5==null||this.$OzVideoRepresentation$p_5=="")&&(this.$OzVideoRepresentation$p_5=this.getHeight().toString()+"p");return this.$OzVideoRepresentation$p_5||""};return b}(c("oz-player/manifests/OzRepresentationBase"));g["default"]=a}),98);
__d("oz-player/utils/OzMimeUtil",[],(function(a,b,c,d,e,f){"use strict";function a(a){return(a.split("/")[0]||"").trim()}function b(a){a=(a.split(";")[0]||"").trim();a=(a.split("/")[1]||"").trim();return a}function c(a){a=a.split('codecs="').pop();return a.split(".")[0].trim()}f.getMimeType=a;f.getContainerType=b;f.getParsedCodecFamily=c}),66);
__d("oz-player/media_source/OzMSESourceBufferImpl",["oz-player/shims/OzDOMEventListener","oz-player/utils/OzErrorUtils","oz-player/utils/OzMimeUtil"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,c,d){this.$1=a,this.$2=c,this.$3=b,this.$4=d}var b=a.prototype;b.registerOnUpdateStartListener=function(a){return c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"updatestart",a)};b.registerOnUpdateEndListener=function(a){return c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"updateend",a)};b.registerOnUpdateListener=function(a){return c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"update",a)};b.registerOnErrorListener=function(a){return c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"error",a)};b.getIsUpdating=function(){return this.$1.updating};b.getBuffered=function(){return this.$1.buffered};b.setAppendWindowEnd=function(a){this.$1.appendWindowEnd=a};b.appendBuffer=function(a,b){var c,e=(c=d("oz-player/utils/OzMimeUtil")).getMimeType(b)!==c.getMimeType(this.$3),f=c.getContainerType(b)!==c.getContainerType(this.$3);c=c.getParsedCodecFamily(b)!==c.getParsedCodecFamily(this.$3);if(e||f||c)if(this.$4){try{this.$1.changeType(b)}catch(a){throw d("oz-player/utils/OzErrorUtils").createOzError({description:'SourceBufferChangeTypeError: Failed to changeType("'+b+'"): '+String(a)+" current MIME Codecs: "+this.$3,type:"OZ_SOURCE_BUFFER_CHANGE_TYPE"})}this.$3=b}else throw d("oz-player/utils/OzErrorUtils").createOzError({description:"SourceBufferChangeTypeError: attempted to call changeType() on a SourceBuffer that does not support it.",type:"OZ_SOURCE_BUFFER_CHANGE_TYPE_UNAVAILABLE"});this.$1.appendBuffer(a)};b.abort=function(){this.$1.abort()};b.remove=function(a,b){this.$1.remove(a,b)};return a}();g["default"]=a}),98);
__d("oz-player/media_source/OzMediaErrorProvider",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a}var b=a.prototype;b.hasError=function(){return this.$1.error!==null};b.getMediaErrorName=function(){var a=this.$1.error;return a&&a.message?this.$2(a.message):null};b.getErrorCode=function(){var a=this.$1.error;return a&&a.code?a.code:null};b.getVideoNode=function(){return this.$1};b.$2=function(a){return a.replace(/([0-9]{2,})/g,function(a){var b="";while(b.length<a.length)b+="#";return b})};return a}();f["default"]=a}),66);
__d("oz-player/utils/OzSourceBufferUtil",["oz-player/utils/OzNumericalRangeUtil"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=0;for(var c=0;c<a.getBuffered().length;c++)b+=a.getBuffered().end(c)-a.getBuffered().start(c);return b}function b(a){return a.reduce(function(a,b){return a+(b.endTime-b.startTime)},0)}function c(a){return a.getBuffered().length==0?0:a.getBuffered().start(0)}function e(a){var b=null;try{b=a.getBuffered()}catch(a){return 0}return b.length==0?0:b.end(b.length-1)}function f(a){var b=[];for(var c=0;c<a.length;c++)b.push({startTime:a.start(c),endTime:a.end(c)});return b}function h(a,b,c){c=d("oz-player/utils/OzNumericalRangeUtil").findCurrentRangeIndex(c,b,a.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}}));b=c>=0?parseFloat((a[c].endTime-b).toFixed(3)):0;a=c>=0?a.length-1-c:-1;return{bufferAheadSec:b,bufferedOffset:a}}function i(a,b,c){var e=a.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}});c=d("oz-player/utils/OzNumericalRangeUtil").findCurrentRangeIndex(c,b,e);e=parseFloat(e.reduce(function(a,c){var e=c.rangeEnd;return e==null?a:a+(d("oz-player/utils/OzNumericalRangeUtil").isWithin(b,c)?e-b:d("oz-player/utils/OzNumericalRangeUtil").isLargerThan(c.rangeStart,b)?e-c.rangeStart:0)},0).toFixed(3));a=c>=0?a.length-1-c:-1;return{bufferAheadSec:e,bufferedOffset:a}}g.getTotalBufferedTime=a;g.getTotalInBufferedRanges=b;g.getStartBufferedTime=c;g.getEndBufferedTime=e;g.convertToBufferedTimeRangeArray=f;g.getBufferAheadInBufferedRanges=h;g.getTotalBufferAheadOfPosition=i}),98);
__d("oz-player/media_source/SourceBufferManagerUtils",["oz-player/utils/OzSourceBufferUtil"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){var e=d("oz-player/utils/OzSourceBufferUtil").getEndBufferedTime(b);return function(){var a=d("oz-player/utils/OzSourceBufferUtil").getEndBufferedTime(b);return{startTime:e,endTime:a}}}g.startMeasuringAppendedBuffer=a}),98);
__d("oz-player/shims/www/OzDeferredWWW",["Deferred"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("Deferred")}),98);
__d("oz-player/shims/OzDeferred",["oz-player/shims/www/OzDeferredWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/OzDeferredWWW")}),98);
__d("oz-player/utils/OzFakeEventTarget",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var b=a.prototype;b.dispatchEvent=function(a){if(this.$1[a]==null)return;this.$1[a].forEach(function(a){return a()})};b.addEventListener=function(a,b){var c=this;this.$1[a]===void 0&&(this.$1[a]=new Set());this.$1[a].add(b);return{remove:function(){c.removeEventListener(a,b)}}};b.removeEventListener=function(a,b){if(!this.$1[a])return;this.$1[a]["delete"](b)};b.destroy=function(){this.$1={}};return a}();f["default"]=a}),66);
__d("oz-player/states/OzObservedSourceBufferState",["oz-player/shims/OzSubscriptionsHandler","oz-player/utils/OzFakeEventTarget"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,d){var e;e=a.call(this)||this;e.$OzObservedSourceBufferState$p_2=new(c("oz-player/shims/OzSubscriptionsHandler"))();e.$OzObservedSourceBufferState$p_3=[];e.$OzObservedSourceBufferState$p_6=function(){var a;try{a=e.$OzObservedSourceBufferState$p_1.getBuffered()}catch(a){if(a.name==="InvalidStateError"){e.$OzObservedSourceBufferState$p_3=[];return}else throw a}var b=[];for(var c=0;c<a.length;c++)b.push({startTime:a.start(c),endTime:a.end(c)});e.$OzObservedSourceBufferState$p_3=b};e.$OzObservedSourceBufferState$p_1=b;e.$OzObservedSourceBufferState$p_4=d;e.$OzObservedSourceBufferState$p_5();return e}var d=b.prototype;d.$OzObservedSourceBufferState$p_5=function(){var a=this;this.$OzObservedSourceBufferState$p_2.release();this.$OzObservedSourceBufferState$p_2=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$OzObservedSourceBufferState$p_2.addSubscriptions(this.$OzObservedSourceBufferState$p_1.registerOnUpdateEndListener(function(){a.$OzObservedSourceBufferState$p_6(),a.dispatchEvent("buffer_updated")}),this.$OzObservedSourceBufferState$p_1.registerOnErrorListener(this.$OzObservedSourceBufferState$p_6))};d.setSourceBuffer=function(a){this.$OzObservedSourceBufferState$p_1=a,this.$OzObservedSourceBufferState$p_5(),this.$OzObservedSourceBufferState$p_6()};d.getBufferedRanges=function(){return this.$OzObservedSourceBufferState$p_3};d.destroy=function(){a.prototype.destroy.call(this),this.$OzObservedSourceBufferState$p_2.release(),this.$OzObservedSourceBufferState$p_2.engage()};return b}(c("oz-player/utils/OzFakeEventTarget"));g["default"]=a}),98);
__d("oz-player/utils/OzCustomErrorCode",[],(function(a,b,c,d,e,f){"use strict";a={APPEND_BUFFER_UNKNOWN_ERROR:"21539",APPEND_BUFFER_INVALID_STATE_ERROR_SOURCE_BUFFER_HAS_BEEN_REMOVED:"21540",APPEND_BUFFER_MEDIA_ERROR_ATTRIBUTE_NOT_NULL:"21541",APPEND_BUFFER_SOURCE_BUFFER_UPDATING_ATTRIBUTE_IS_TRUE:"21542",SOURCE_BUFFER_MANAGER_ADD_SOURCE_BUFFER_ERROR:"21543",SOURCE_BUFFER_MANAGER_CREATE_ERROR:"21544",SETUP_STREAMS_PROMISE_REJECTION:"21545",APPEND_BUFFER_QUOTA_EXCEEDED_ERROR:"21546",APPEND_BUFFER_INVALID_STATE_ERROR:"21547",SOURCE_BUFFER_MANAGER_UPDATEEND_UNKNOWN_ERROR:"21548",NETWORK_REQUEST_STREAM_RETRY_HANDLER_ERROR:"21549",STREAM_APPEND_QUOTA_EXCEEDED_HANDLER_ERROR:"21550",SOURCE_BUFFER_MANAGER_CLEAR_RANGE_FAILED:"21551",WEBVTT_CAPTION_PARSE_ERROR:"21552"};b=a;f["default"]=b}),66);
__d("oz-player/media_source/SourceBufferManager",["Promise","oz-player/loggings/OzLoggingUtils","oz-player/media_source/SourceBufferManagerUtils","oz-player/shims/OzDOMEventListener","oz-player/shims/OzDeferred","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzStreams","oz-player/shims/OzSubscriptionsHandler","oz-player/states/OzObservedSourceBufferState","oz-player/utils/OzCustomErrorCode","oz-player/utils/OzErrorUtils","oz-player/utils/ozConcatUint8Arrays"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a,b,e,f,g,h){var i=this;h===void 0&&(h=null);this.$4=null;this.$5=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$7=!1;this.$8=[];this.$12=!1;this.$13=!1;this.$14=0;this.$26=function(){if(i.$10.hasError()){i.$13=!1;i.$12=!1;var a=i.$10.getMediaErrorName();a=a!=null?a:"An unknown source buffer error occurred.";var b=i.$10.getErrorCode();b=b!=null?String(b):c("oz-player/utils/OzCustomErrorCode").SOURCE_BUFFER_MANAGER_UPDATEEND_UNKNOWN_ERROR;a=d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SOURCE_BUFFER",description:a,extra:{code:b}});i.$4&&i.$4.reject(a);i.$4=null;i.cancelOperationAndCleanQueue()}else if(!i.$13){i.$13=!0;b=i.$10.getVideoNode();a=i.$26;b=c("oz-player/shims/OzDOMEventListener").listenDOMEvent(b,"error",a);i.$5.addSubscriptions(b)}};this.$17=function(){var a=i.$2;if(a!=null){a.getOperationLogger("source_buffer_updateend").setError((a=i.$10.getMediaErrorName())!=null?a:void 0).setCode(i.$10.getErrorCode()).setResult(i.$12?"failed":"success").log()}a=i.$4;a&&(i.$12?i.$26():(a.resolve(),i.$4&&(i.$4=null)))};this.$18=function(){var a=i.$2;if(a!=null){a.getOperationLogger("source_buffer_error").setError((a=i.$10.getMediaErrorName())!=null?a:void 0).setCode(i.$10.getErrorCode()).setResult("failed").log()}i.$12=!0};this.$1=a;this.$2=h;this.$3=b;this.$11=e;this.$16();this.$9=new(c("oz-player/states/OzObservedSourceBufferState"))(this.$3,this.$11);this.$10=f;this.$15=g}var e=a.prototype;e.$16=function(){this.$5.release(),this.$5=new(c("oz-player/shims/OzSubscriptionsHandler"))(),this.$5.addSubscriptions(this.$3.registerOnUpdateEndListener(this.$17),this.$3.registerOnErrorListener(this.$18))};e.setSourceBuffer=function(a){if(a==null)return;this.cancelOperationAndCleanQueue();this.$3=a;this.$16();this.$9.setSourceBuffer(a)};e.queueData=function(a,b,d,e,f){e===void 0&&(e=null);f===void 0&&(f=0);var g=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));this.$8.push({data:a,deferred:g,loggerProvider:e,appendTarget:f,mimeCodecs:b,clearSourceBufferRange:d});a=g.getPromise();this.$7||this.$19()["catch"](function(a){});return a};e.cancelOperationAndCleanQueue=function(a){a===void 0&&(a=null);a&&a.cloneContext().getOperationLogger("source_buffer_cancel_and_clean").log();var b=d("oz-player/utils/OzErrorUtils").createOzCancelledError("SBM cancel and clean");this.$8.forEach(function(a){a=a.deferred;a.reject(b)});this.$8=[];try{this.$11.getBool("enable_alternative_audio_tracks")?this.$15()==="open"&&(this.$10.hasError()||this.$3.abort()):this.$15()!=="closed"&&!0&&(this.$10.hasError()||this.$3.abort())}catch(b){var c=b;a&&a.cloneContext().getOperationLogger("cancel_operation_abort_failed").setError(c).setReason(this.$15?this.$15():null).log()}a=this.$4;a&&a.reject(b);this.$6&&(this.$6.reject(b),this.$6=null)};e.getSourceBufferState=function(){return this.$9};e.$20=function(a,b){a=Math.max(a,0);b>0&&b>a&&this.$3.remove(a,b)};e.$21=function(a,b){a=Math.max(a,0);if(b>0&&b>a){var d=this.$22();this.$20(a,b);return d}return c("oz-player/shims/OzMaybeNativePromise").resolve()};e.clearRangeWithWait=function(a){var c=this;this.cancelOperationAndCleanQueue();return a.reduce(function(a,b){var d=b.fromTime,e=b.toTime;return a.then(function(){return c.$21(d,e)})},(h||(h=b("Promise"))).resolve())};e.$22=function(a){var b=this.$4=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));b=b.getPromise();a&&d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(b,a,"wait_for_source_buffer");return b};e.$23=function(a,b,e,f){var g=this,h=function(){var h=g.$4=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise")),i=!1,j=!0;try{j=!!g.$3.getBuffered()}catch(a){j=!1}try{i=g.$3.getIsUpdating();if(j)g.$3.appendBuffer(a,b);else{h.resolve();return h.getPromise()}}catch(a){j=a;var k=c("oz-player/utils/OzCustomErrorCode").APPEND_BUFFER_UNKNOWN_ERROR,l=j.name,m=j.message;l==="QuotaExceededError"?k=c("oz-player/utils/OzCustomErrorCode").APPEND_BUFFER_QUOTA_EXCEEDED_ERROR:g.$10.hasError()?k=c("oz-player/utils/OzCustomErrorCode").APPEND_BUFFER_MEDIA_ERROR_ATTRIBUTE_NOT_NULL:i?k=c("oz-player/utils/OzCustomErrorCode").APPEND_BUFFER_SOURCE_BUFFER_UPDATING_ATTRIBUTE_IS_TRUE:l==="InvalidStateError"&&typeof m==="string"&&/SourceBuffer has been removed/.test(m)?k=c("oz-player/utils/OzCustomErrorCode").APPEND_BUFFER_INVALID_STATE_ERROR_SOURCE_BUFFER_HAS_BEEN_REMOVED:l==="InvalidStateError"&&(k=c("oz-player/utils/OzCustomErrorCode").APPEND_BUFFER_INVALID_STATE_ERROR);i=d("oz-player/utils/OzErrorUtils").createOzError({type:g.$11.getBool("emit_caption_parse_errors_as_warning")&&d("oz-player/utils/OzErrorUtils").isOzError(j)?j.getType():l==="QuotaExceededError"?"OZ_SOURCE_BUFFER_QUOTA_EXCEEDED":l==="OZ_SOURCE_BUFFER_CHANGE_TYPE"?"OZ_SOURCE_BUFFER_CHANGE_TYPE":"OZ_SOURCE_BUFFER",description:"SBM#"+g.$1+" appendBuffer("+b+") failed: "+String(m),extra:g.$11.getBool("emit_caption_parse_errors_as_warning")&&d("oz-player/utils/OzErrorUtils").isOzError(j)?j.getExtra():{originalError:j,code:k}});g.$4=null;h.reject(i)}l=h.getPromise();e&&d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(l,e,"append",function(b){var c;b.setLength(a.byteLength);c=(c=f==null?void 0:f.appendTarget)!=null?c:null;b.setAppendTarget(c)});return l};if(this.$3.getIsUpdating())return this.$22(e).then(h)["catch"](function(a){throw a});this.$14+=a.byteLength;return h()};e.$19=function(){var a=this;if(this.$7)return c("oz-player/shims/OzMaybeNativePromise").reject(this.$24("Another unit of queued data is being appended."));var b=this.$8.shift();if(!b){this.$7=!1;return c("oz-player/shims/OzMaybeNativePromise").resolve()}var e=b.data,f=b.mimeCodecs,g=b.deferred,h=b.loggerProvider,i=b.appendTarget,j=b.clearSourceBufferRange;this.$7=!0;var k;b=function(){return e instanceof d("oz-player/shims/OzStreams").OzReadableStream?a.$25(e,f,h,i):a.$23(e,f,h,{appendTarget:i})};j?(k=this.$3.getIsUpdating()?this.$22(h):c("oz-player/shims/OzMaybeNativePromise").resolve(),k=k.then(function(){return a.clearRangeWithWait([{fromTime:j[0],toTime:j[1]}])}).then(b)):k=b();var l=d("oz-player/media_source/SourceBufferManagerUtils").startMeasuringAppendedBuffer(this.$11,this.$3,this.$9);return k["catch"](function(a){g.reject(a)}).then(function(){var b=l(),c=b.startTime;b=b.endTime;g.resolve({startTime_UNSAFE:c,endTime_UNSAFE:b,appendedSec:b-c});a.$7=!1;a.$19()["catch"](function(a){})})};e.$25=function(a,b,e,f){var g=this,h=[],i=0,j=a.getReader();a=function a(){var k=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));g.$6=k;j.read().then(function(a){k.resolve(a),g.$6=null})["catch"](function(a){k.reject(a),g.$6=null});return k.getPromise().then(function(d){if(d.done){var j=c("oz-player/utils/ozConcatUint8Arrays")(h);j=j.buffer;h.length=0;i=0;return j.byteLength>0?g.$23(j,b,e,{appendTarget:f}):c("oz-player/shims/OzMaybeNativePromise").resolve()}j=d.value;d=j;if(f>0){j=j instanceof Uint8Array?j:new Uint8Array(j);h.push(j);i+=j.byteLength;if(i>=f){j=c("oz-player/utils/ozConcatUint8Arrays")(h);j=j.buffer;h.length=0;i=0;d=j}}return d&&d.byteLength>=f?g.$23(d,b,e,{appendTarget:f}).then(function(){return a()}):a()},function(a){if(g.$11.getBool("enable_alternative_audio_tracks"))try{g.$15()==="open"&&(g.$10.hasError()||g.$3.abort())}catch(a){a}else try{g.$3.abort()}catch(a){a}if(typeof a==="object"&&d("oz-player/utils/OzErrorUtils").isOzError(a))return c("oz-player/shims/OzMaybeNativePromise").reject(a);if(typeof a==="object"&&a!=null&&typeof a.name==="string"&&a.name==="TypeError"&&typeof a.message==="string"&&a.message.includes("network error")){var e=d("oz-player/utils/OzErrorUtils").convertPromiseRejectionReasonToOzError(a,{description:"SBM#"+g.$1+" appendReadableStream("+b+") failed: Stream read is interrupted (previously TypeError network error)}",extra:{originalError:a},type:"OZ_NETWORK"});return c("oz-player/shims/OzMaybeNativePromise").reject(e)}e=d("oz-player/utils/OzErrorUtils").convertPromiseRejectionReasonToOzError(a,{description:"SBM#"+g.$1+" appendReadableStream("+b+") failed: Unexpected error while reading from stream: "+String(a),extra:{originalError:a},type:"OZ_NETWORK"});return c("oz-player/shims/OzMaybeNativePromise").reject(e)})};return a()};e.$24=function(a){var b=this.$2;b!=null&&b.getOperationLogger("source_buffer_invariant").setError(a).setResult("failed").log();return d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SOURCE_BUFFER",description:"SBM invariant: "+a})};e.destroy=function(){var a=this,b=this.$2;b&&b.cloneContext().getOperationLogger("source_buffer_destroy").log();b=this.$4;b&&(!this.$13?(b.reject(d("oz-player/utils/OzErrorUtils").createOzCancelledError("SBM destroyed")),this.$4=null,this.$5.release(),this.$5=new(c("oz-player/shims/OzSubscriptionsHandler"))()):b.getPromise()["catch"](function(){a.$4=null,a.$5.release(),a.$5=new(c("oz-player/shims/OzSubscriptionsHandler"))()}));this.$9.destroy()};e.getDebug=function(){return{SourceBuffer:this.$3}};return a}();g["default"]=a}),98);
__d("oz-player/shims/www/getOzVTTSourceBufferImplLazyWWW",["JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";var h=c("JSResourceForInteraction")("OzVTTSourceBufferImpl").__setRef("oz-player/shims/www/getOzVTTSourceBufferImplLazyWWW");function a(){return h.load()}g["default"]=a}),98);
__d("oz-player/shims/www/getOzVTTSourceBufferImplWWW",["oz-player/shims/www/getOzVTTSourceBufferImplLazyWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/getOzVTTSourceBufferImplLazyWWW")}),98);
__d("oz-player/shims/getOzVTTSourceBufferImpl",["oz-player/shims/www/getOzVTTSourceBufferImplWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/getOzVTTSourceBufferImplWWW")}),98);
__d("oz-player/shims/www/ozClearTimeoutWWW",["clearTimeout"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("clearTimeout")}),98);
__d("oz-player/shims/ozClearTimeout",["oz-player/shims/www/ozClearTimeoutWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/ozClearTimeoutWWW")}),98);
__d("oz-player/shims/www/ozSetTimeoutAcrossTransitionsWWW",["setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("setTimeoutAcrossTransitions")}),98);
__d("oz-player/shims/ozSetTimeoutAcrossTransitions",["oz-player/shims/www/ozSetTimeoutAcrossTransitionsWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/ozSetTimeoutAcrossTransitionsWWW")}),98);
__d("oz-player/utils/ozGetErrorNameFromMediaErrorCode",[],(function(a,b,c,d,e,f){"use strict";function a(a){switch(a){case 1:return"MEDIA_ERR_ABORTED";case 2:return"MEDIA_ERR_NETWORK";case 3:return"MEDIA_ERR_DECODE";case 4:return"MEDIA_ERR_SRC_NOT_SUPPORTED";default:}return"MEDIA_ERR_UNKNOWN"}f["default"]=a}),66);
__d("oz-player/media_source/MediaSourceManager",["isStringNullOrEmpty","oz-player/loggings/OzMultiDestinationPerfLogger","oz-player/media_source/OzMSESourceBufferImpl","oz-player/media_source/OzMediaErrorProvider","oz-player/media_source/SourceBufferManager","oz-player/shims/OzDOMEventListener","oz-player/shims/OzDeferred","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/getOzVTTSourceBufferImpl","oz-player/shims/ozClearTimeout","oz-player/shims/ozReportUnexpectedError","oz-player/shims/ozSetTimeoutAcrossTransitions","oz-player/shims/ozThrottle","oz-player/utils/OzCustomErrorCode","oz-player/utils/OzErrorEmitter","oz-player/utils/OzErrorUtils","oz-player/utils/OzMimeUtil","oz-player/utils/ozGetErrorNameFromMediaErrorCode"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=this,e=a.videoNode,f=a.config,g=a.perfLoggerProvider;g=g===void 0?new(d("oz-player/loggings/OzMultiDestinationPerfLogger").OzMultiDestinationPerfLoggerProvider)([]):g;var h=a.isChangeTypeSupported,i=a.handleVttCaptionsUpdated,j=a.onClearVideoNodeError;a=a.onRetryVideoElementError;this.$3=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$4=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$6=[];this.$7=new Map();this.$8=[];this.$10=!1;this.$12=!1;this.$13=!1;this.$14=!1;this.$15=!1;this.$18=null;this.$19=null;this.$20=new(c("oz-player/utils/OzErrorEmitter"))();this.$22="undetected";this.$23=!1;this.$29=function(){b.$32()||(b.$10=!1);if(!b.$33())return;var a=b.$8.shift();a&&(a(b.$2),b.$10=!0)};this.$5=g;this.$11=f;this.$1=e;this.$21=i;this.$16=j;this.$17=a;this.$23=h;this.$9=new(c("oz-player/media_source/OzMediaErrorProvider"))(this.$1);this.$3.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"error",function(){var a;b.$5.getOperationLogger("media_element_error").setError((a=b.$9.getMediaErrorName())!=null?a:void 0).setCode(b.$9.getErrorCode()).setResult("failed").setUserInfo({av1HardwareSupport:b.$22}).log();b.$8=[];b.$6=[];b.$4.release();b.$4=new(c("oz-player/shims/OzSubscriptionsHandler"))();b.$15=b.$15||b.$14||b.$13;a=b.$1.error;var e=(a==null?void 0:a.code)||0,f=!a&&!c("isStringNullOrEmpty")(b.$1.poster),g=d("oz-player/utils/OzErrorUtils").createOzError({type:f?"OZ_POSSIBLE_POSTER_LOAD_FAILURE":c("oz-player/utils/ozGetErrorNameFromMediaErrorCode")(e),description:(a==null?void 0:a.message)!=null?a.message:"",extra:{originalError:a,code:String(e)}});if(b.$19!=null){b.$5.getOperationLogger("media_element_error").setError(a).setCode(e).setReason("mitigation_failed").setResult("failed").setUserInfo({av1HardwareSupport:b.$22}).log();b.$20.emitError(g);return}b.$19=b.$1.currentTime;b.$18==null&&(b.$18=c("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){b.$18=null,b.$11.getBool("retry_video_element_error")&&(b.$17!=null&&b.$17(g),b.$24())},0))}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"play",function(){b.$14=!0}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"playing",function(){b.$14=!1,b.$15=!1,b.$19=null,b.$13=!0}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"pause",function(){b.$14=!1,b.$13=!1,b.$15=!!b.$1.error}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"ended",function(){b.$14=!1,b.$13=!1}));this.$2=new MediaSource();this.$5.getOperationLogger("media_source_new").log();this.$3.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$2,"sourceopen",function(){b.$5.getOperationLogger("media_source_open").log()}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$2,"sourceended",function(){b.$5.getOperationLogger("media_source_ended").log()}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$2,"sourceclose",function(){b.$5.getOperationLogger("media_source_close").log()}));this.$25(this.$2)}var b=a.prototype;b.$25=function(a){var b=this.$1,c=b.src;c!==""&&URL.revokeObjectURL(c);a?b.src=URL.createObjectURL(a):(b.removeAttribute("src"),b.removeAttribute("srcObject"))};b.$24=function(){var a=this;this.$7.forEach(function(a){a.cancelOperationAndCleanQueue()});this.$2=new MediaSource();this.$25(this.$2);this.$7.forEach(function(a,b){a.setSourceBuffer(null)});var b=this.$26().then(function(){var b=[];a.$7.forEach(function(c,d){var e=a.$27(d).then(function(b){c.setSourceBuffer(b),a.$28(b,d)});b.push(e)});return c("oz-player/shims/OzMaybeNativePromise").all(b)});b.then(function(){a.$16&&a.$16();a.$19!=null&&(a.$1.currentTime=a.$19);if(a.$15){var b=a.$1.play();return b==null?void 0:b["catch"](function(){})}})["catch"](function(b){a.$20.emitError(b)})};b.$26=function(){var a=this;if(this.$11.getBool("msm_refactor_wait_for_sourceopen")){if(this.$2.readyState==="open")return c("oz-player/shims/OzMaybeNativePromise").resolve();var b=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise")),d=c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$2,"sourceopen",function(){d.remove(),b.resolve(),a.$29()});this.$3.addSubscriptions(d);return b.getPromise()}else{if(this.$2.readyState==="open")return c("oz-player/shims/OzMaybeNativePromise").resolve();var e=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));this.$3.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$2,"sourceopen",function(){e.resolve(),a.$29()}));return e.getPromise()}};b.$27=function(a){var b=this;if(this.$11.getBool("msm_refactor_wait_for_sourceopen"))return c("oz-player/shims/OzMaybeNativePromise").resolve().then(function(){return b.$30(a)})["catch"](function(b){b=d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SOURCE_BUFFER",description:'Failed to addSourceBuffer("'+a+'"): '+String(b),extra:{originalError:b,code:c("oz-player/utils/OzCustomErrorCode").SOURCE_BUFFER_MANAGER_ADD_SOURCE_BUFFER_ERROR.toString()}});throw b});else try{return this.$30(a)}catch(b){var e=d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SOURCE_BUFFER",description:'Failed to addSourceBuffer("'+a+'"): '+(b.message||String(b)),extra:{originalError:b,code:c("oz-player/utils/OzCustomErrorCode").SOURCE_BUFFER_MANAGER_ADD_SOURCE_BUFFER_ERROR.toString()}});throw e}};b.$30=function(a){var b=this,e;a.includes("vtt")?e=this.$31(a):e=this.$26().then(function(){return new(c("oz-player/media_source/OzMSESourceBufferImpl"))(b.$2.addSourceBuffer(a),a,b.$11,b.$23)});return e.then(function(c){b.$6.push(c);c.registerOnUpdateListener(function(){b.$5.cloneContext().getOperationLogger("source_buffer_update_start").setType(d("oz-player/utils/OzMimeUtil").getMimeType(a)).setMediaSourceSourceBuffer(d("oz-player/utils/OzMimeUtil").getMimeType(a),c).setType(d("oz-player/utils/OzMimeUtil").getMimeType(a)).log()});b.$5.getOperationLogger("add_source_buffer").setMediaSourceSourceBuffer(d("oz-player/utils/OzMimeUtil").getMimeType(a),c).log();return c})};b.$28=function(a,b){var c=this;this.$4.addSubscriptions(a.registerOnUpdateEndListener(function(){c.$29()}))};b.$31=function(a){var b=this;return c("oz-player/shims/getOzVTTSourceBufferImpl")().then(function(e){if(b.$21!=null){var f=new e({onCaptionsChanged:b.$21,config:b.$11}),g=c("oz-player/shims/ozThrottle")(function(){f.setCurrentVideoTime(b.$1.currentTime)},200);b.$3.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(b.$1,"timeupdate",function(){g()}),{remove:function(){g=function(){}}});return f}else throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SOURCE_BUFFER",description:'Failed to addSourceBuffer("'+a+'"): No handleVttCaptionsUpdated callback provided',extra:{code:c("oz-player/utils/OzCustomErrorCode").SOURCE_BUFFER_MANAGER_ADD_SOURCE_BUFFER_ERROR.toString()}})})};b.createSourceBufferManager=function(a,b,e,f){var g=this;return(this.$11.getBool("msm_refactor_wait_for_sourceopen")?this.$27(b).then(function(a){return[void 0,a]}):c("oz-player/shims/OzMaybeNativePromise").all([this.$26(),this.$27(b)])).then(function(e){e[0];e=e[1];var f=new(c("oz-player/media_source/SourceBufferManager"))(a,e,g.$11,g.$9,function(){return g.$2.readyState},g.$5.cloneContext().setType(d("oz-player/utils/OzMimeUtil").getMimeType(b)));g.$28(e,b);g.$7.set(b,f);return f})["catch"](function(b){var e=d("oz-player/utils/OzErrorUtils").isOzError(b)?b.getExtra():void 0,f=e==null?void 0:e.code;f=d("oz-player/utils/OzErrorUtils").isOzError(b)?""+b.getType()+(f!=null?"#"+f:"")+": "+b.getDescription():String(b);f=d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SOURCE_BUFFER",description:"Failed to create SBM#"+a+": "+f+", support AAC-LC="+(MediaSource.isTypeSupported("audio/mp4; codecs=mp4a.40.2")?"true":"false")+", readyState="+g.$2.readyState,extra:babelHelpers["extends"]({},e,{originalError:b,code:c("oz-player/utils/OzCustomErrorCode").SOURCE_BUFFER_MANAGER_CREATE_ERROR.toString()})});throw f})};b.getReadyState=function(){return this.$2.readyState};b.getMediaSource=function(){return this.$2};b.notifyEndOfStream=function(a,b){var d=this,e=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));this.$3.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$2,"sourceended",function(){e.resolve()}));this.$8.push(function(c){if(c.readyState==="open"){var e=d.$5.getOperationLogger("end_of_stream");e.setInitiator(a).setReason(b);e.log();c.endOfStream()}});this.$29();return e.getPromise()};b.updateDuration=function(a,b){var e=this,f=this.$2.duration;if(Number.isFinite(f)&&(!b||f>=a))return;this.$8.push(function(b){b.duration!==f&&!(isNaN(b.duration)&&isNaN(f))&&c("oz-player/shims/ozReportUnexpectedError")(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SOURCE_BUFFER",description:"mediaSource duration discrepancy: "+b.duration+" != "+f}),"MediaSourceManager updateDuration","warn");var g=e.$11.getBool("msm_refactor_wait_for_sourceopen")?b.duration!==Infinity&&a<b.duration:a<b.duration;if(g){e.$5.getOperationLogger("media_source_update_duration").setMediaSourcePreviousDuration(b.duration).setMediaSourceNewDuration(a).setResult("failed").log();return}e.$5.getOperationLogger("media_source_update_duration").setMediaSourcePreviousDuration(b.duration).setMediaSourceNewDuration(a).log();b.duration=a});this.$29();return};b.detach=function(){this.$18&&(c("oz-player/shims/ozClearTimeout")(this.$18),this.$18=null);this.$5.getOperationLogger("source_buffer_detach").unsetMediaSourceSourceBuffers();this.$25(null);for(var a=0;a<this.$2.sourceBuffers.length;a++){var b=this.$2.sourceBuffers[a];this.$2.removeSourceBuffer(b)}this.$3.release();this.$3.engage();this.$4.release();this.$4.engage();this.$8=[];this.$10=!1;this.$12=!0};b.$33=function(){return!this.$32()&&this.$2.readyState==="open"&&!this.$10&&!this.$12};b.$32=function(){return this.$6.some(function(a){return a.getIsUpdating()})};b.onError=function(a){return this.$20.onError(a)};return a}();g["default"]=a}),98);
__d("oz-player/media_source/OzMediaSeekableRangeManager",["oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){var d=this;this.$5=function(a){a===void 0&&(a=!0);var b=d.$2;if(!b)return;b=b.getTimeRanges();if(!b.length)return;b=b[b.length-1];d.$1.updateDuration(b.endTime,a)};this.$1=a;this.$3=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$4=b}var b=a.prototype;b.setTimeRangeProvider=function(a){this.$3.release(),this.$3.engage(),this.$3.addSubscriptions(a.addUpdateListener(this.$5)),this.$2=a};b.listenToMediaStreamInitAppended=function(a){var b=this;return a.addListener("initAppended",function(){b.$5(!1)})};b.destroy=function(){this.$3.release()};return a}();g["default"]=a}),98);
__d("oz-player/networks/OzCreateErrorStream",["oz-player/shims/OzStreams"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return new(d("oz-player/shims/OzStreams").OzReadableStream)({pull:function(b){b.error(a)}})}g["default"]=a}),98);
__d("oz-player/shims/OzFetchAPI",[],(function(a,b,c,d,e,f){"use strict";b=function(b,c){return a.fetch(b,c)};c=function(b,c){return new a.Response(b,c)};f.fetch=b;f.Response=c}),66);
__d("oz-player/networks/FetchWithTimeout",["oz-player/shims/OzFetchAPI","oz-player/shims/ozClearTimeout","oz-player/shims/ozSetTimeoutAcrossTransitions","oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";function b(b,e,f,g){if(!d("oz-player/shims/OzFetchAPI").fetch)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_INITIALIZATION",description:"fetch api is missing"});var h=null;if("AbortController"in a&&f!=null&&f!=0){var i=new AbortController();h=c("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){return i.abort()},f);f={credentials:e,signal:i.signal}}else f={credentials:e};g!=null&&(f=babelHelpers["extends"]({},f,{referrer:g}));return d("oz-player/shims/OzFetchAPI").fetch(b,f).then(function(a){c("oz-player/shims/ozClearTimeout")(h);return a})}g["default"]=b}),98);
__d("oz-player/networks/OzHTTPHeaders",["oz-player/shims/ozvariant"],(function(a,b,c,d,e,f,g){"use strict";d=function(){function a(){this.$1=new Map()}var b=a.prototype;b.append=function(a,b){a=a.toLowerCase();var c=this.$1.get(a);c!=null?this.$1.set(a,c+", "+b):this.$1.set(a,b)};b.get=function(a){a=a.toLowerCase();a=this.$1.get(a);return(a=a)!=null?a:null};b.entries=function(){return this.$1.entries()};b.has=function(a){return this.get(a)!==null};return a}();e=a.Headers;f=e&&e.prototype;var h=e&&f&&typeof f.append==="function"&&typeof f.entries==="function"&&typeof f.get==="function"&&typeof f.has==="function"?e:d;function b(a){if(a==null)return null;if(typeof a==="object"&&typeof a.append==="function"&&typeof a.get==="function"&&typeof a.has==="function")if(typeof a.entries==="function")return a;else if(typeof a.forEach==="function"){var b=new h();a.forEach(function(a,c){b.append(c,a)});return b}c("oz-player/shims/ozvariant")(!1,"Malformed Headers object: %s %s",typeof a,String(a));return null}g.OzHTTPHeaders=h;g.maybeConvertHeadersToOzHTTPHeaders=b}),98);
__d("oz-player/utils/arrayBuffer2OzReadableStream",["oz-player/shims/OzStreams"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return new(d("oz-player/shims/OzStreams").OzReadableStream)({start:function(b){var c=new Uint8Array(a);b.enqueue(c);b.close()}})}g["default"]=a}),98);
__d("oz-player/utils/maybeConvertReadableStreamToOzReadableStream",["asyncToGeneratorRuntime","oz-player/shims/OzStreams"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(!d("oz-player/shims/OzStreams").OzReadableStreamIsPolyfilled)return a;var c=a.getReader();return new(d("oz-player/shims/OzStreams").OzReadableStream)({start:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){while(!0){var b=(yield c.read());if(b.done)break;a.enqueue(b.value)}a.close()});function d(b){return a.apply(this,arguments)}return d}()})}g["default"]=a}),98);
__d("oz-player/utils/processFetchResponse",["oz-player/networks/OzHTTPHeaders","oz-player/shims/OzMaybeNativePromise","oz-player/utils/arrayBuffer2OzReadableStream","oz-player/utils/maybeConvertReadableStreamToOzReadableStream"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.body,e=a.ok,f=a.status,g=a.headers;return b!=null?c("oz-player/shims/OzMaybeNativePromise").resolve({ok:e,status:f,headers:d("oz-player/networks/OzHTTPHeaders").maybeConvertHeadersToOzHTTPHeaders(g),body:c("oz-player/utils/maybeConvertReadableStreamToOzReadableStream")(b),arrayBuffer:function(){return a.arrayBuffer()}}):a.arrayBuffer().then(function(a){return{ok:e,status:f,headers:d("oz-player/networks/OzHTTPHeaders").maybeConvertHeadersToOzHTTPHeaders(g),body:c("oz-player/utils/arrayBuffer2OzReadableStream")(a),arrayBuffer:function(){return c("oz-player/shims/OzMaybeNativePromise").resolve(a)}}})}g["default"]=a}),98);
__d("oz-player/networks/OzFetchRequestImplementation",["oz-player/networks/FetchWithTimeout","oz-player/utils/processFetchResponse"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,d,e,f,g,h,i){f=d?d.networkTimeoutMs:null;g=c("oz-player/networks/FetchWithTimeout")(a,b.credentials,f);return g.then(function(a){var b=a.ok,d=a.status,f=a.headers;return e!=null&&!b&&typeof a.text==="function"?a.text().then(function(c){return{ok:b,status:d,headers:f,body:c,arrayBuffer:function(){return a.arrayBuffer()}}}):c("oz-player/utils/processFetchResponse")(a)})}b=a;d=b;g["default"]=d}),98);
__d("oz-player/networks/withRetries",["Promise","asyncToGeneratorRuntime","oz-player/shims/ozSetTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,d,e){return new(h||(h=b("Promise")))(function(f,g){function h(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){try{f(yield a())}catch(a){if(b>0){var i=typeof e==="function"?e(d-b):e;c("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){h(b-1)},i)}else g(a)}});return i.apply(this,arguments)}h(d)})}g["default"]=a}),98);
__d("oz-player/networks/OzFetchWithCache",["oz-player/networks/OzFetchRequestImplementation","oz-player/networks/withRetries","oz-player/shims/OzMaybeNativePromise","oz-player/utils/OzErrorUtils","oz-player/utils/arrayBuffer2OzReadableStream","oz-player/utils/processFetchResponse"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.config,e=a.url,f=a.http,g=a.overrideOzRequestImplementation,h=a.options,i=a.prefetchCache,j=a.mediaStreamType,k=a.onPerfEntryAvailable,l=a.dataAppendedCallback,m=a.dataAppendedErrorCallback,n=g!=null?function(){return g.apply(void 0,arguments)}:c("oz-player/networks/OzFetchRequestImplementation");a=i?i.getCacheValue(e):null;i=a;a=!1;if(i)a=!0,i=i.then(function(a){if(a.initiator==="FETCH"){var b=a.response,e=b.ok,f=b.status,g=b.headers;return!e&&typeof a.response.text==="function"?a.response.text().then(function(b){return{ok:!1,status:f,headers:g,body:b,arrayBuffer:function(){return a.response.arrayBuffer()}}}):c("oz-player/utils/processFetchResponse")(a.response)}else if(a.initiator==="XHR_REQUEST"){b=c("oz-player/utils/arrayBuffer2OzReadableStream")(a.response);return{body:b,status:200,headers:null,ok:!0,arrayBuffer:function(){return c("oz-player/shims/OzMaybeNativePromise").resolve(a.response)}}}else throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_UNEXPECTED_CACHE_INITIATOR",description:"Unable to handle request initiator: "+a.initiator})})["catch"](function(a){return n(e,f,null,null,j,k,l,m)});else{var o;o=(o=h==null?void 0:h.retryAttempts_SIDX_USE_ONLY)!=null?o:0;if(o>0){var p;p=(p=h==null?void 0:h.retryTimeoutMs_SIDX_USE_ONLY)!=null?p:100;i=c("oz-player/networks/withRetries")(function(){return n(e,f,h,b,j,k,l,m)},o,p)}else i=n(e,f,h,b,j,k,l,m)}return{promise:i,retrievedFromCache:a}}g["default"]=a}),98);
__d("oz-player/utils/OzVideoUrlUtils",[],(function(a,b,c,d,e,f){"use strict";c=1<<31;var g=~c,h=c+1;function i(a){a=a|0;return Math.max(h,Math.min(a,g))}function j(a){a=Number.parseInt(a,16);return Number.isFinite(a)?new Date(i(a)*1e3):null}function k(){return i(Date.now()/1e3)}var l={OE:"oe",OE2:"oe2",ODM:"odm",USS:"uss"};function m(a){a=a instanceof URL?a.searchParams:new URL(a).searchParams;a=a.get(l.OE);a=a==null?void 0:j(a);return{expirationDate:a}}function a(a){a=a instanceof URL?a.searchParams:new URL(a).searchParams;return a.get(l.OE2)!==null||a.get(l.ODM)!==null||a.get(l.USS)!==null}function b(a){a=m(a);a=a.expirationDate;return a!=null&&a<=new Date(k()*1e3)}f.DEFAULT_UNIXTIME=c;f.MAX_INT=g;f.parseCdnUrlParams=m;f.isShortenedExpiryTimestampCdnUrl=a;f.isCdnUrlExpired=b}),66);
__d("oz-player/networks/OzNetworkRequestStream",["Promise","oz-player/networks/OzCreateErrorStream","oz-player/networks/OzFetchWithCache","oz-player/shims/OzURI","oz-player/shims/ozvariant","oz-player/utils/OzCustomErrorCode","oz-player/utils/OzErrorUtils","oz-player/utils/OzResourceTimingUtils","oz-player/utils/OzVideoUrlUtils"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a){this.$8=!1;var b=a.debugName,c=a.config,d=a.baseUri,e=a.baseUriDecisionTime,f=a.options,g=a.requestParamCreator,h=a.networkRequestStreamHandlers,i=a.overrideOzRequestImplementation,j=a.prefetchCache,k=a.networkRequestStreamRetryHandler,l=a.networkRequestUrlRefreshHandler,m=a.dynamicVideoLibrary,n=a.mediaStreamType,o=a.dataAppendedCallback;a=a.dataAppendedErrorCallback;this.$1=b;this.$2=d;this.$3=f;this.$4=g;this.$10=(b=h)!=null?b:[];this.$11=k;this.$12=l;this.$9=i;this.$13=j;this.$14=c;this.$15=m;this.$16=e;this.$17=n;this.$18=o;this.$19=a}var e=a.prototype;e.$20=function(a){var b=this;a=this.$4.createRequestParam(this.$2,a);var d=a.uri;a=a.http;d=d.toString();this.$5=d;a=c("oz-player/networks/OzFetchWithCache")({config:this.$14,url:d,http:a,overrideOzRequestImplementation:this.$9,options:this.$3,prefetchCache:this.$13,mediaStreamType:this.$17,onPerfEntryAvailable:function(a){b.$21(a)},dataAppendedCallback:this.$18,dataAppendedErrorCallback:this.$19});var e=a.promise;a=a.retrievedFromCache;this.$8=a;return{requestPromise:e,requestUrl:d}};e.startStream=function(a){var b=this;return this.$22().then(function(){if(b.$14.getBool("video_cdn_url_refresh")&&!d("oz-player/utils/OzVideoUrlUtils").isShortenedExpiryTimestampCdnUrl(b.$2.toString())&&d("oz-player/utils/OzVideoUrlUtils").isCdnUrlExpired(b.$2.toString()))return c("oz-player/networks/OzCreateErrorStream")(d("oz-player/utils/OzErrorUtils").createOzNetworkError({description:"OzNetworkRequestStream("+b.$1+") CDN URL expired.",responseStatus:0,responseHeaders:null,requestUrl:b.$2.toString()}));var e=b.$20(a),f=e.requestPromise,g=e.requestUrl,h=g,i=Date.now();return f.then(function(e){var f;(f=b.$15)==null?void 0:f.updateWithResponse(g,i,b.$16,e);b.$7=e;if(b.$11!=null&&e.ok===!1)return b.$11(e,function(){var d=b.$20(a),c=d.requestPromise;d=d.requestUrl;h=d;return c},h)["catch"](function(a){throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_NETWORK_REQUEST_STREAM_RETRY_HANDLER_ERROR",description:String(a),extra:{originalError:a,code:c("oz-player/utils/OzCustomErrorCode").NETWORK_REQUEST_STREAM_RETRY_HANDLER_ERROR,url:h}})});else return e}).then(function(a){var e=[];for(var f=0;f<b.$10.length;f++)try{var g=b.$10[f].onResponse(a,h);g&&e.push(g)}catch(a){g=a;return c("oz-player/networks/OzCreateErrorStream")(g)}g=a.body;f=a.headers;var i=a.ok;a=a.status;if(!i)return c("oz-player/networks/OzCreateErrorStream")(d("oz-player/utils/OzErrorUtils").createOzNetworkError({description:"OzNetworkRequestStream("+b.$1+") HTTP status not OK",responseStatus:a,responseHeaders:f,requestUrl:h,responseBody:typeof g==="string"?g:void 0}));typeof g!=="string"&&typeof g.getReader==="function"||c("oz-player/shims/ozvariant")(0,3287);i=g;for(a=0;a<e.length;a++)i=i.pipeThrough(e[a]);return i},function(a){var e=[];for(var f=0;f<b.$10.length;f++)try{var g=b.$10[f].onError(a,h);g&&e.push(g)}catch(a){g=a;return c("oz-player/networks/OzCreateErrorStream")(g)}if(a instanceof TypeError){g=c("oz-player/networks/OzCreateErrorStream")(d("oz-player/utils/OzErrorUtils").createOzNetworkError({description:"OzNetworkRequestStream("+b.$1+") TypeError: "+a.message,responseStatus:0,responseHeaders:null,requestUrl:h}));for(f=0;f<e.length;f++)g=g.pipeThrough(e[f]);return g}throw a})["catch"](function(a){if(d("oz-player/utils/OzErrorUtils").isOzError(a)&&a.getType()==="OZ_NETWORK_REQUEST_STREAM_RETRY_HANDLER_ERROR")throw a;if(a.name==="AbortError"){var b=a.message;return c("oz-player/networks/OzCreateErrorStream")({type:a.name,status:a.code,url:h,message:b})}return c("oz-player/networks/OzCreateErrorStream")({type:"stream_processing",status:0,url:h,message:"Stream processing error. "+a})})})};e.$21=function(a){this.$6=a};e.getLastPerformanceEntry=function(){if(this.$6!=null)return this.$6;return this.$5==null?null:d("oz-player/utils/OzResourceTimingUtils").getLatestResourceTimingEntry(this.$5)};e.getLastRequestUrl=function(){return this.$5};e.getLastResponse=function(){return this.$7};e.retrievedFromCache=function(){return this.$8};e.$22=function(){var a=this;if(this.$14.getBool("video_cdn_url_refresh")&&!d("oz-player/utils/OzVideoUrlUtils").isShortenedExpiryTimestampCdnUrl(this.$2.toString())&&d("oz-player/utils/OzVideoUrlUtils").isCdnUrlExpired(this.$2.toString())&&this.$12)return this.$12(this.$2.toString()).then(function(b){b.refreshedUrl!=null&&b.reason==="OK"&&(a.$2=new(c("oz-player/shims/OzURI"))(b.refreshedUrl));return});else return(h||(h=b("Promise"))).resolve()};return a}();g["default"]=a}),98);
__d("oz-player/manifests/OzByteRange",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return a.startByte===b.startByte}function b(a,b){return b.endByte===null?!1:a.startByte===b.endByte+1}function c(a,b){return a.startByte<b.startByte?!1:b.endByte==null||b.endByte>=a.startByte}function d(a,b){a=a;b=b;if(b.startByte<a.startByte){var c=a;a=b;b=c}if(a.endByte==null)return{startByte:a.startByte,endByte:null};if(b.startByte>a.endByte+1)return null;c=b.endByte==null||b.endByte>a.endByte?b.endByte:a.endByte;return{startByte:a.startByte,endByte:c}}function e(a,b){if(b.endByte==null)return null;if(a.startByte>b.endByte)return{startByte:a.startByte,endByte:a.endByte};return a.endByte!=null&&a.endByte<=b.endByte?null:{startByte:b.endByte+1,endByte:a.endByte}}function g(a){return a.endByte==null?null:a.endByte-a.startByte+1}f.startsAtSame=a;f.startsImmediateAfter=b;f.startsDuring=c;f.union=d;f.disjoinAfter=e;f.getLength=g}),66);
__d("oz-player/networks/OzProducerInterruptedError",[],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(babelHelpers.wrapNativeSuper(Error));f["default"]=a}),66);
__d("oz-player/networks/OzDeferredBuffer",["oz-player/networks/OzProducerInterruptedError","oz-player/shims/OzDeferred","oz-player/shims/OzMaybeNativePromise","oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){a===void 0&&(a={});this.$2=[];this.$3=!1;this.$5=0;a=a;a=a.disableArrayShift;this.$1=!!a}var b=a.prototype;b.produce=function(a){this.$6(a)};b.signalProducerInterruption=function(){this.$6(new(c("oz-player/networks/OzProducerInterruptedError"))("producer interrupted"))};b.consume=function(a){var b=this;if(this.$3)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DEFERRED_BUFFER",description:"A buffer can only be consumed by one client at a time"});this.$3=!0;var e=c("oz-player/shims/OzMaybeNativePromise").resolve();this.isEmpty()&&(this.$4=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise")),e=this.$4.getPromise());return e.then(function(){if(b.$1){if(b.$2[b.$5]===void 0)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DEFERRED_BUFFER",description:"buffer has no value at position "+b.$5})}else if(b.$2.length===0)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DEFERRED_BUFFER",description:"buffer length must not be 0"});b.$4=null;b.$3=!1;var c=b.$1?b.$7(a):b.$8(a);if(c instanceof Uint8Array)return c;throw c})};b.$6=function(a){this.$2.push(a),this.$4&&this.$4.resolve()};b.$7=function(a){var b=this.$2[this.$5];if(b===void 0)return new Uint8Array([]);b=b;if(!(b instanceof Uint8Array)){this.$2[this.$5]=void 0;this.$5++;return b}if(a!==void 0&&b.length>a){var c=b.slice(a);b=b.slice(0,a);this.$2[this.$5]=c}else this.$2[this.$5]=void 0,this.$5++;return b};b.$8=function(a){if(this.$2.length===0)return new Uint8Array([]);var b=this.$2[0];if(!(b instanceof Uint8Array)){this.$2.shift();return b}if(a!==void 0&&b.length>a){var c=b.slice(a);b=b.slice(0,a);this.$2[0]=c}else this.$2.shift();return b};b.isEmpty=function(){return this.$1?this.$2[this.$5]===void 0:this.$2.length===0};return a}();g["default"]=a}),98);
__d("oz-player/utils/ozPipeErrorTo",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){try{a==null?void 0:a.error(b)}catch(a){}}f["default"]=a}),66);
__d("oz-player/networks/OzPausableRangeStream",["oz-player/manifests/OzByteRange","oz-player/networks/OzDeferredBuffer","oz-player/shims/OzDeferred","oz-player/shims/OzMaybeNativePromise","oz-player/utils/OzErrorUtils","oz-player/utils/ozPipeErrorTo"],(function(a,b,c,d,e,f,g){"use strict";function h(){return d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_STREAM",description:"Upstream has an inconsistent range"})}var i=function(){function a(){this.$1=0}var b=a.prototype;b.setBytesToSkip=function(a){this.$1=a};b.setBytesSkipped=function(a){this.$1-=a};b.getBytesToSkip=function(){return this.$1};b.hasMoreBytesToSkip=function(){return this.$1>0};return a}();a=function(){function a(b,d,e,f,g){var j=this;this.$5=!1;this.$7=0;this.$8=0;this.$13=!1;this.$14=new i();this.$15=!1;this.$16=!1;this.$17=!1;this.startStream=function(){j.$13=!0;var b={startByte:j.$1.startByte,endByte:j.$1.endByte};!j.$15?b.startByte+=j.$8:j.$8&&(j.$3.produce("skip_buffered_bytes"),j.$8=0);var d=j.$4;return j.$2.startStream(b).then(function(b){b.pipeTo(j.$16?d:j.$4).then(function(){j.$12&&j.$12.resolve("stream_done")})["catch"](function(b){j.$12&&!j.$12.isSettled()&&(j.$16&&b===a.STREAM_PAUSED?j.$12.resolve("stream_paused"):j.$12.reject(b))});j.$12=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));return{statusPromise:j.$12.getPromise()}})};this.$18=b;this.$19=d;this.$1=e;this.$2=f;b=g||{};d=b.fixStreamingUndefinedEndByte;e=b.disableDeferredBufferArrayShift;f=b.enablePausableStreamResumeFromStartDangerously;g=b.fixPausePreReadableStream;b=b.throwErrorWhenAborted;this.$11=!!d;this.$15=!!f;this.$16=!!g;this.$17=!!b;this.$3=new(c("oz-player/networks/OzDeferredBuffer"))({disableArrayShift:!!e});this.$6=new this.$18({start:function(a){j.$10=a},pull:function(a){if((j.$11&&j.$1.endByte===null&&j.$5||j.$7===j.$20())&&j.$3.isEmpty()){a.close();return c("oz-player/shims/OzMaybeNativePromise").resolve()}var b=function b(){var d=j.$14.hasMoreBytesToSkip()?j.$14.getBytesToSkip():void 0;return j.$3.consume(d).then(function(d){if(j.$14.hasMoreBytesToSkip()){j.$14.setBytesSkipped(d.length);return b()}j.$7+=d.length;var e=j.$20();e!==null&&j.$7>(e||0)&&c("oz-player/utils/ozPipeErrorTo")(j.$10,h());a.enqueue(d)})["catch"](function(a){if(a==="skip_buffered_bytes"){j.$14.setBytesToSkip(j.$7);return b()}throw a})};return b()},cancel:function(a){j.$12&&j.$12.resolve("stream_cancelled"),c("oz-player/utils/ozPipeErrorTo")(j.$9,a)}});this.$4=this.$21()}var b=a.prototype;b.$20=function(){var a=this.$1,b=a.startByte;a=a.endByte;return a!=null?a-b+1:null};b.$21=function(){var a=this;return new this.$19({start:function(b){a.$9=b},write:function(b){a.$3.produce(b),a.$8+=b.length},close:function(){a.$5=!0;var b=a.$1,d=b.endByte;b=b.startByte;a.$11&&d===null&&a.$3.produce(new Uint8Array([]));d!==null&&a.$8!==(d||0)-b+1&&c("oz-player/utils/ozPipeErrorTo")(a.$10,h())},abort:function(b){a.$12&&(a.$17?a.$12.reject(b):a.$12.resolve("stream_aborted")),c("oz-player/utils/ozPipeErrorTo")(a.$10,b)}})};b.getStream=function(){return this.$6};b.pauseStream=function(){c("oz-player/utils/ozPipeErrorTo")(this.$9,a.STREAM_PAUSED),this.$12&&this.$12.resolve("stream_paused"),this.$4=this.$21()};b.getByteRange=function(){return this.$1};b.getBytesStreamed=function(){return this.$7};b.tryConcatByteRange=function(a){if(this.$13||!d("oz-player/manifests/OzByteRange").startsImmediateAfter(a,this.$1))return!1;this.$1={startByte:this.$1.startByte,endByte:a.endByte};return!0};return a}();a.STREAM_PAUSED="streamPaused";g["default"]=a}),98);
__d("oz-player/networks/RequestParamCreator",["oz-player/shims/OzURI"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b){var d=this;this.createRequestParam=function(a,b){var e=new(c("oz-player/shims/OzURI"))(a.toString());if(b){a=b.startByte;var f=b.endByte;a===0&&f==null||(e.addQueryData({bytestart:b.startByte}),f!=null&&e.addQueryData({byteend:f}))}if(d.$2){var g=d.$2(e);g&&Object.keys(g).forEach(function(a){var b=g[a];e.addQueryData(a,b)})}a=d.$1&&d.$1(e)?"include":"same-origin";return{uri:e,http:{credentials:a}}};this.$1=a;this.$2=b};g["default"]=a}),98);
__d("oz-player/networks/getOzSegmentStreamableRange",[],(function(a,b,c,d,e,f){"use strict";function a(a){if(!a.length)return null;var b=a[0].getURI().toString(),c=a[0].getByteRange();if(!c)return null;var d=c;for(var e=1;e<a.length;e++){var f=a[e];if(f.getURI().toString()!==b)return null;f=f.getByteRange();if(!d||!f)return null;if(d.endByte===null||f.startByte!==d.endByte+1)return null;d=f}return{startByte:c.startByte,endByte:d.endByte}}f["default"]=a}),66);
__d("oz-player/utils/OzNetworkRequestLoggingUtils",["oz-player/shims/OzNetworkDiagnostics","oz-player/utils/OzResourceTimingUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=function(a){return a?parseInt(a.get("content-length"),10):null},i=function(a){return a?a.get("x-fb-fna-hit"):null},j=function(a){return a?a.get("x-fb-edge-hit"):null},k=function(a){return a?a.get("x-fb-origin-hit"):null},l=function(a){return a?parseInt(a.get("x-fb-dynamic-latest-segment-id"),10):null},m=function(a,b){b=d("oz-player/utils/OzResourceTimingUtils").getLatestResourceTimingEntry(b);b&&a.setTimeToFirstByte(Math.round(b.responseStart-b.startTime)).setTimeToLastByte(Math.round(b.responseEnd-b.startTime)).setTimeToRequestStart(Math.round(b.requestStart-b.startTime))};a=function(a,b,d,e,f,g){d.length&&a.setSegmentCount(d.length),b!=null&&b!==""&&m(a,String(b)),a.setResource(b!=null&&b!==""?b:null).setInitiator("fetch").setTimeToRequestSent(Math.round(Math.floor(e))).setLiveheadSeqNumHeader(l(g==null?void 0:g.headers)).setContentLengthHeader(h(g==null?void 0:g.headers)).setEdgeHitHeader(j(g==null?void 0:g.headers)).setOriginHitHeader(k(g==null?void 0:g.headers)).setFNAHitHeader(i(g==null?void 0:g.headers)).setResponseTimeMsHeader(c("oz-player/shims/OzNetworkDiagnostics").getResponseTimeMs(g==null?void 0:g.headers)).setUserInfo({segmentPTSHeader:String(c("oz-player/shims/OzNetworkDiagnostics").getDvlSegmentPTS(g==null?void 0:g.headers))}).setCode(g==null?void 0:g.status).setLength(f)};b=function(a,b,d,e,f,g,i){b!=null&&b!==""&&m(a,String(b)),a.setResource(b!=null&&b!==""?b:null).setLiveheadSeqNumHeader(l(e==null?void 0:e.headers)).setContentLengthHeader(h(e==null?void 0:e.headers)).setEdgeHitHeader(j(e==null?void 0:e.headers)).setOriginHitHeader(k(e==null?void 0:e.headers)).setResponseTimeMsHeader(c("oz-player/shims/OzNetworkDiagnostics").getResponseTimeMs(e==null?void 0:e.headers)).setCode(e==null?void 0:e.status).setLength(d).setClientTimeBegin(f).setClientTimeDuration(g-f).setClientTimeEnd(g).setUserInfo(i!=null&&i>0?{chunkSize:String(i)}:null)};g.setPerformanceLoggingAttributes=m;g.setFetchStreamLoggingAttributes=a;g.setBandwidthSampledLoggingAttributes=b}),98);
__d("oz-player/networks/OzNetworkManager",["oz-player/loggings/OzLoggingUtils","oz-player/networks/OzNetworkRequestStream","oz-player/networks/OzPausableRangeStream","oz-player/networks/RequestParamCreator","oz-player/networks/getOzSegmentStreamableRange","oz-player/shims/OzStreams","oz-player/shims/OzURI","oz-player/shims/ozvariant","oz-player/utils/OzNetworkRequestLoggingUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$10=null;var b=a.config,d=a.prefetchCache,e=a.networkRequestStreamHandlers,f=a.getOverrideOzRequestImplementation,g=a.getShouldIncludeCredentials,h=a.getCustomRequestParametersForURI,i=a.networkRequestStreamRetryHandler,j=a.networkRequestUrlRefreshHandler,k=a.setCustomFetchStreamLoggingAttributes,l=a.dynamicVideoLibrary,m=a.configureCustomRequestParametersForSegment,n=a.onResourceTimingBufferFull;a=a.bandwidthEstimator;this.$2=b;this.$8=g;this.$9=h;this.$1=new(c("oz-player/networks/RequestParamCreator"))(this.$8,this.$9);this.$3=d;this.$4=e;this.$5=i;this.$6=j;this.$7=f;this.$10=k;this.$11=l;this.$12=m;this.$13=n;this.$14=a}var b=a.prototype;b.destroy=function(){};b.request=function(a){var b=a.debugName,d=a.segments,e=a.pipeThroughRangeStreamProviders,f=a.loggerProvider,g=a.requestOptions,h=a.mediaStreamType,i=a.dataAppendedCallback;a=a.dataAppendedErrorCallback;d.length>0||c("oz-player/shims/ozvariant")(0,212);var j=c("oz-player/networks/getOzSegmentStreamableRange")(d)||{startByte:0,endByte:null},k=this.$7?this.$7():null,l=this.$15(d[0]);b=new(c("oz-player/networks/OzNetworkRequestStream"))({debugName:b,config:this.$2,baseUri:l,baseUriDecisionTime:null,options:g,requestParamCreator:this.$1,networkRequestStreamHandlers:this.$4,networkRequestUrlRefreshHandler:this.$6,overrideOzRequestImplementation:k,prefetchCache:this.$3,networkRequestStreamRetryHandler:this.$5,mediaStreamType:h,dataAppendedCallback:i,dataAppendedErrorCallback:a});return this.$16(j,b,e,f,d)};b.createPausableStream=function(a){var b=a.debugName,d=a.segments,e=a.pipeThroughRangeStreamProviders,f=a.loggerProvider,g=a.mediaStreamType,h=a.dataAppendedCallback;a=a.dataAppendedErrorCallback;d.length>0||c("oz-player/shims/ozvariant")(0,212);var i=c("oz-player/networks/getOzSegmentStreamableRange")(d)||{startByte:0,endByte:null},j=null,k=this.$2.getNumber("network_seg_timeout_ms");k>0&&(j={networkTimeoutMs:k});k=this.$7?this.$7():null;var l=new(c("oz-player/networks/OzNetworkRequestStream"))({debugName:b,config:this.$2,baseUri:this.$15(d[0]),baseUriDecisionTime:d[0].getOptions().getSegmentNumDecisionTime(),options:j,requestParamCreator:this.$1,networkRequestStreamHandlers:this.$4,networkRequestUrlRefreshHandler:this.$6,overrideOzRequestImplementation:k,prefetchCache:this.$3,networkRequestStreamRetryHandler:this.$5,dynamicVideoLibrary:this.$11,mediaStreamType:g,dataAppendedCallback:h,dataAppendedErrorCallback:a});return{pausableStream:this.$17(i,l,e||null,f),loggingPayloads:{getRequestUrl:function(){return l.getLastRequestUrl()||null},segments:d,getResponse:function(){return l.getLastResponse()}}}};b.requestRawUrl=function(a){var b=a.debugName,d=a.url,e=a.options;a=a.loggerProvider;var f=this.$7?this.$7():null;b=new(c("oz-player/networks/OzNetworkRequestStream"))({debugName:b,config:this.$2,baseUri:new(c("oz-player/shims/OzURI"))(d),baseUriDecisionTime:null,options:e,requestParamCreator:this.$1,networkRequestStreamHandlers:this.$4,networkRequestUrlRefreshHandler:this.$6,overrideOzRequestImplementation:f,prefetchCache:this.$3,networkRequestStreamRetryHandler:this.$5,dynamicVideoLibrary:this.$11,mediaStreamType:null,dataAppendedCallback:null,dataAppendedErrorCallback:null});d={startByte:0,endByte:null};return this.$16(d,b,[],a)};b.$17=function(a,b,e,f){b=b;if(e!=null)for(var g=0;g<e.length;g++){var h=e[g];b=h(this.$2,b,f,this.$13)}return new(c("oz-player/networks/OzPausableRangeStream"))(d("oz-player/shims/OzStreams").OzReadableStream,d("oz-player/shims/OzStreams").OzWritableStream,a,b,{fixStreamingUndefinedEndByte:!0,enablePausableStreamResumeFromStartDangerously:!0,fixPausePreReadableStream:!0,throwErrorWhenAborted:!0})};b.$16=function(a,b,c,e,f){var g=this;f===void 0&&(f=[]);var h=this.$17(a,b,c,e);a=h.startStream();var i=this.$18(a);if(e){c=function(a){d("oz-player/utils/OzNetworkRequestLoggingUtils").setFetchStreamLoggingAttributes(a,b.getLastRequestUrl(),f,0,h.getBytesStreamed(),b.getLastResponse());var c=g.$10;c&&c(a,b.getLastRequestUrl(),b.getLastResponse())};d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(i,e,"fetch_stream",c,c)}return{getStream:function(){return h.getStream()},cancel:function(){return h.pauseStream()},getStatusChangePromise:function(){return i}}};b.$18=function(a){return a.then(function(a){a=a.statusPromise;return a.then(function(a){return"done"})})};b.$15=function(a){var b=this.$12,d=new(c("oz-player/shims/OzURI"))(a.getURI().toString());if(b){var e=b(a);e&&Object.keys(e).forEach(function(a){var b=e[a];d.addQueryData(a,b)})}return d};b.getBandwidthEstimator=function(){return this.$14};a.getStreamableSegmentsRange=function(a){if(!a.length)return[];return!c("oz-player/networks/getOzSegmentStreamableRange")(a)?[a[0]]:a.slice(0)};return a}();g["default"]=a}),98);
__d("oz-player/manifests/Mpd",["oz-player/shims/OzEventEmitter","oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d,e,f,g,h,i){var j;j=a.call(this)||this;j.$Mpd$p_9=!1;j.$Mpd$p_1=b;j.$Mpd$p_5=g;j.$Mpd$p_2=c;j.$Mpd$p_3=d;j.$Mpd$p_4=e;j.$Mpd$p_6=f;j.$Mpd$p_7=h;j.$Mpd$p_8=i;return j}var c=b.prototype;c.markRefreshed=function(){this.$Mpd$p_10=Date.now()};c.getRefreshDate=function(){return this.$Mpd$p_10};c.updateLocation=function(a){this.$Mpd$p_6=a,this.$Mpd$p_9=!0,this.emit("locationUpdated")};c.getLocation=function(){return this.$Mpd$p_6};c.getMinimumUpdatePeriod=function(){return this.$Mpd$p_5};c.getVideoRepresentations=function(){return this.$Mpd$p_2};c.getVideoRepresentationsByVariant=function(a){return a.lang===null?this.$Mpd$p_2.filter(function(b){return b.getLang()===a.lang&&b.getRole()===a.role}):this.$Mpd$p_2.filter(function(b){return b.getLang()===a.lang&&b.getRole()===a.role})};c.getAudioRepresentationsByVariant=function(a){return a.lang===null?this.$Mpd$p_3.filter(function(b){return b.getLang()===a.lang&&b.getRole()===a.role}):this.$Mpd$p_3.filter(function(b){return b.getLang()===a.lang&&b.getRole()===a.role})};c.getAudioRepresentations=function(){return this.$Mpd$p_3};c.getApplicationRepresentations=function(){return this.$Mpd$p_4};c.getCustomField=function(a){var b=this.$Mpd$p_7.get(a);if(!b)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_MPD_PARSER",description:"Custom parser not specified for field "+a});try{return b(this.$Mpd$p_1)}catch(a){return null}};c.isStaticMpd=function(){return this.$Mpd$p_8};c.updateWith=function(a){this.$Mpd$p_9&&(this.$Mpd$p_9=!1,this.$Mpd$p_2.splice(0,this.$Mpd$p_2.length),this.$Mpd$p_3.splice(0,this.$Mpd$p_3.length),this.$Mpd$p_4.splice(0,this.$Mpd$p_4.length)),this.$Mpd$p_1=a.$Mpd$p_1,this.$Mpd$p_11(this.$Mpd$p_2,a.getVideoRepresentations()),this.$Mpd$p_11(this.$Mpd$p_3,a.getAudioRepresentations()),this.$Mpd$p_11(this.$Mpd$p_4,a.getApplicationRepresentations()),this.$Mpd$p_8=a.isStaticMpd(),this.$Mpd$p_5=a.getMinimumUpdatePeriod(),this.emit("updated")};c.blockTimeRange=function(a){this.$Mpd$p_2.forEach(function(b){return b.blockTimeRange(a)}),this.$Mpd$p_3.forEach(function(b){return b.blockTimeRange(a)}),this.$Mpd$p_4.forEach(function(b){return b.blockTimeRange(a)})};c.unblockTimeRange=function(){this.blockTimeRange({startTime:0,endTime:0})};c.$Mpd$p_11=function(a,b){for(var c=0;c<b.length;c++){var d=b[c],e=!1;for(var f=0;f<a.length;f++){var g=a[f];if(d.getID()===g.getID()){g.updateWith(d);e=!0;break}}e||a.push(d)}};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/manifests/OzApplicationRepresentation",["oz-player/manifests/OzRepresentationBase"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(c("oz-player/manifests/OzRepresentationBase"));g["default"]=a}),98);
__d("oz-player/parsers/OzSegmentTemplateParser",["oz-player/manifests/OzSegmentOptions","oz-player/parsers/OzDefaultSegmentTimelineParser","oz-player/shims/OzURI","oz-player/utils/OzUrlHelper"],(function(a,b,c,d,e,f,g){"use strict";var h=function(){function a(a,b){this.$3=new(c("oz-player/manifests/OzSegmentOptions"))(),this.$2=a,this.$1=b}var b=a.prototype;b.getData=function(){return this.$1};b.getTimeRange=function(){return{startTime:0,endTime:0}};b.getByteRange=function(){return null};b.getURI=function(){return this.$2};b.getSequenceNumber=function(){return null};b.getOptions=function(){return this.$3};return a}();a=function(){function a(a,b,d,e,f){this.$2=d,this.$1=b,this.$3=a,e?this.$4=e:this.$4=new(c("oz-player/parsers/OzDefaultSegmentTimelineParser"))(),this.$5=f}var b=a.prototype;b.parseInitializationSegment=function(){var a=d("oz-player/utils/OzUrlHelper").joinUrlPaths(this.$2.baseUrl,this.$1.$.initialization);return new h(new(c("oz-player/shims/OzURI"))(a),this.$5)};b.parseSegmentsContainer=function(){return this.$4.parseSegmentsContainer(this.$3,this.$2,this.$1)};return a}();g["default"]=a}),98);
__d("oz-player/manifests/OzZeroTimeRangeSegment",["oz-player/manifests/OzSegmentOptions"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d){this.$4=new(c("oz-player/manifests/OzSegmentOptions"))(),this.$1=a,this.$2=b,this.$3=d}var b=a.prototype;b.getData=function(){return null};b.getURI=function(){return this.$1};b.getTimeRange=function(){return{startTime:0,endTime:0}};b.getByteRange=function(){return{startByte:this.$2,endByte:this.$3}};b.getSequenceNumber=function(){return null};b.getOptions=function(){return this.$4};return a}();g["default"]=a}),98);
__d("oz-player/networks/OzNetworkRequestStreamBandwidthReporter",["oz-player/networks/OzTransformStream","oz-player/shims/OzNetworkDiagnostics","oz-player/utils/OzNetworkRequestLoggingUtils"],(function(a,b,c,d,e,f,g){"use strict";b=function(){function b(b){var d=this;this.$8=Date.now();this.$9=Date.now();this.$10=0;this.$11=0;this.$12=function(){};this.$13=function(){};this.$14=function(){};this.$16=new(c("oz-player/networks/OzTransformStream"))();this.$19=!1;this.$20=!1;this.$21=null;this.$22=function(a){d.$25();a.length!=null&&(d.$11+=a.length);d.$26();if(d.$18)return;d.$27()};this.$23=function(){if(d.$21!=null&&d.$21>0)return;var b=Date.now()-d.$8,c=d.$1.getLastPerformanceEntry();c&&d.$13(c.responseStart-c.requestStart,c.responseEnd-c.requestStart,d.$11);!c&&a.__isresourcetimingbufferfull&&d.$15&&d.$15();d.$3>0&&b>0&&d.$10===0&&d.$11>=d.$3&&d.$28(d.$11,b)};var e=b.stream,f=b.loggerProvider,g=b.byteCountPerSample,h=b.minimumBytesToSampleOnClose,i=b.minimumSampleDuration,j=b.maximumSampleBandwidth,k=b.useResponseTimeMs,l=b.responseTimeHandicapMs,m=b.ignoreOnStreamWriteSamples;b=b.onResourceTimingBufferFull;this.$1=e;this.$17=f;this.$2=g;this.$3=h;this.$4=i;this.$5=j;this.$6=k;this.$7=l;this.$18=m;this.$16.addListener("writableWrite",this.$22);this.$16.addListener("writableClose",this.$23);this.$15=b}var e=b.prototype;e.getTransformStream=function(){return this.$16};e.onBandwidthSample=function(a){this.$12=a};e.onNavigationTimingSample=function(a){this.$13=a};e.onEstimateFromHeaders=function(a){this.$14=a};e.$24=function(a,b,c){b=b-c;c=this.$17?this.$17.getOperationLogger("bandwidth_sampled"):null;if(c){var e=Date.now(),f=e-b;d("oz-player/utils/OzNetworkRequestLoggingUtils").setBandwidthSampledLoggingAttributes(c,this.$1.getLastRequestUrl(),a,this.$1.getLastResponse(),f,e,this.$21);c.log()}this.$12(a,b)};e.$29=function(a,b,c){if(b-c<=0)return!0;c=a*8/(b/1e3);return b<this.$4&&c>this.$5};e.$28=function(a,b){var d=this.$1.getLastResponse();d=this.$6?c("oz-player/shims/OzNetworkDiagnostics").getResponseTimeMs(d==null?void 0:d.headers)||0:0;this.$29(a,b,d)||this.$24(a,b,Math.max(d-this.$7,0))};e.$25=function(){var a;a=(a=this.$1.getLastResponse())==null?void 0:a.headers;if(this.$20||a==null)return;this.$20=!0;a=c("oz-player/shims/OzNetworkDiagnostics").getBandwidthMeanEstimate(a);a!=null&&this.$14(a)};e.$26=function(){if(this.$19)return;if(this.$21==null){var a=this.$1.getLastResponse();this.$21=c("oz-player/shims/OzNetworkDiagnostics").getUsableResponseSizeForBandwidthEstimation(a==null?void 0:a.headers)||0}this.$21!=null&&this.$21>0&&this.$11>=this.$21&&(this.$19=!0,this.$28(this.$11,Date.now()-this.$9))};e.$27=function(){var a=Date.now(),b=a-this.$8;this.$2>0&&this.$11>=this.$10+this.$2&&!this.$29(this.$11,b,0)&&(this.$24(this.$11-this.$10,b,0),this.$8=a,this.$10=this.$11)};return b}();g["default"]=b}),98);
__d("oz-player/networks/bandwidth/pipeStreamThroughBandwidthEstimator",["oz-player/networks/OzNetworkRequestStreamBandwidthReporter"],(function(a,b,c,d,e,f,g){"use strict";var h=2e5;function a(a,b,d,e,f){return{startStream:function(g){var i=new(c("oz-player/networks/OzNetworkRequestStreamBandwidthReporter"))({stream:b,loggerProvider:d,byteCountPerSample:a.getNumber("byte_count_per_sample",h),minimumBytesToSampleOnClose:a.getNumber("minimum_bytes_to_sample_on_close",25e3),minimumSampleDuration:a.getNumber("minimum_bandwidth_sample_duration",10),maximumSampleBandwidth:a.getNumber("maximum_bandwidth_sample_bandwidth",1e8),useResponseTimeMs:a.getBool("bandwidth_use_response_time_adjustment",!1),responseTimeHandicapMs:a.getNumber("bandwidth_response_time_handicap",0),ignoreOnStreamWriteSamples:a.getBool("bandwidth_ignore_on_stream_write_samples",!1),onResourceTimingBufferFull:f});i.onBandwidthSample(function(a,b){e.addBandwidthSample(a,b)});i.onNavigationTimingSample(function(b,c,d){var f=a.getNumber("time_to_first_byte_ignore_above_threshold_ms",0);(f===0||b<=f)&&e.addNavigationTimingSample(b,c,d)});i.onEstimateFromHeaders(function(a){e.setBandwidthEstimateFromHeaders({meanEstimate:a})});return b.startStream(g).then(function(a){return b.retrievedFromCache()?a:a.pipeThrough(i.getTransformStream())})}}}g.pipeStreamThroughBandwidthEstimator=a}),98);
__d("oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter",["oz-player/networks/OzNetworkRequestStream","oz-player/networks/bandwidth/pipeStreamThroughBandwidthEstimator"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return function(e,f,g,h){var i=a==="video";return f instanceof c("oz-player/networks/OzNetworkRequestStream")&&i?d("oz-player/networks/bandwidth/pipeStreamThroughBandwidthEstimator").pipeStreamThroughBandwidthEstimator(e.getLegacyConfig(),f,g,b,h):f}}g["default"]=a}),98);
__d("oz-player/manifests/OzDataSegment",["oz-player/manifests/OzSegmentOptions"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d,e,f){this.$6=new(c("oz-player/manifests/OzSegmentOptions"))(),this.$1=a,this.$2=b,this.$3=d,this.$4=e,this.$5=f}var b=a.prototype;b.getData=function(){return null};b.getURI=function(){return this.$1};b.getTimeRange=function(){return{startTime:this.$2,endTime:this.$3}};b.getByteRange=function(){return{startByte:this.$4,endByte:this.$5}};b.getSequenceNumber=function(){return null};b.getOptions=function(){return this.$6};return a}();g["default"]=a}),98);
__d("oz-player/shims/www/OzDataViewReaderWWW",["DataViewReader"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("DataViewReader")}),98);
__d("oz-player/shims/OzDataViewReader",["oz-player/shims/www/OzDataViewReaderWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/OzDataViewReaderWWW")}),98);
/**
 * License: https://www.facebook.com/legal/license/Vkd8AdLnKqZ/
 */
__d("oz-player/parsers/OzMp4SidxParser",["oz-player/manifests/OzDataSegment","oz-player/manifests/OzSegmentOptions","oz-player/shims/OzDataViewReader","oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=1936286840;function a(a,b,e,f){var g=new(c("oz-player/shims/OzDataViewReader"))(new DataView(f.buffer));f=g.readUint32();var i=g.readUint32();if(i!==h)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SIDX_PARSER",description:'Invalid box type, expected "sidx".'});f==1&&(f=g.readUint64());i=g.readUint8();g.skip(3);g.skip(4);var j=g.readUint32();if(!j)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SIDX_PARSER",description:"Invalid timescale."});var k;i==0?(i=g.readUint32(),k=g.readUint32()):(i=g.readUint64(),k=g.readUint64());g.skip(2);var l=g.readUint16(),m=i,n=e+f+k,o=0,p=a.getBool("sidx_parser_memory_optimization"),q=[];i=function(a){var e=g.readUint32(),f=(e&2147483648)>>>31;e=e&2147483647;var h=g.readUint32();g.readUint32();if(f==1)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SIDX_PARSER",description:"Heirarchical SIDXs are not supported."});var i=m/j,k=(m+h)/j;a===0&&(o=i);var l=n,r=l+e-1,s=new(c("oz-player/manifests/OzSegmentOptions"))();q.push(p?new(c("oz-player/manifests/OzDataSegment"))(b,i-o,k-o,l,r):{getData:function(){return null},getURI:function(){return b},getTimeRange:function(){return{startTime:i-o,endTime:k-o}},getByteRange:function(){return{startByte:l,endByte:r}},getSequenceNumber:function(){return null},getOptions:function(){return s}});m+=h;n+=e};for(e=0;e<l;e++)i(e);return q}g.parse=a}),98);
__d("oz-player/parsers/OzSidxSegmentsContainer",["oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.getSegmentByTime=function(a){var b=this.$1();for(var c=0;c<b.length;c++){var d=b[c],e=d.getTimeRange();if(e.startTime<=a&&e.endTime>a)return d}return null};b.getSegmentAfter=function(a){var b=this.$1(),c=b.findIndex(function(b){return b.getTimeRange().startTime===a.getTimeRange().startTime&&b.getTimeRange().endTime===a.getTimeRange().endTime});return c>=0&&c+1<b.length?b[c+1]:null};b.getPredictedSegmentAfter=function(a){return null};b.canPredict=function(){return!1};b.canApproximateId=function(){return!1};b.isEndingSegment=function(a){var b=this.$1();if(!b||!b.length)return!1;b=b[b.length-1].getTimeRange();a=a.getTimeRange();return b.startTime===a.startTime&&b.endTime===a.endTime};b.getSegment=function(a){return this.$1()[a]||null};b.updateWith=function(a){throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_NOT_IMPLEMENTED_ERROR",description:"Not implemented: updatedWith"})};b.addUpdateListener=function(a){return this.$2.addListener("segment_updated",a)};b.getTimeRanges=function(){var a=this.$1();if(a.length===0)return[];else{var b=a[0];a=a[a.length-1];return[{startTime:b.getTimeRange().startTime,endTime:a.getTimeRange().endTime}]}};b.blockTimeRange=function(){};b.getEndingSegment=function(){var a=this.$1();return a.length>0?a[a.length-1]:null};b.getMaxGopSec=function(){return null};return a}();g["default"]=a}),98);
/**
 * License: https://www.facebook.com/legal/license/Vkd8AdLnKqZ/
 */
__d("oz-player/parsers/OzWebmSidxParser",["oz-player/manifests/OzDataSegment","oz-player/shims/OzDataViewReader","oz-player/shims/ozvariant"],(function(a,b,c,d,e,f,g){"use strict";var h=440786851,i=408125543,j=357149030,k=2807729,l=17545,m=475249515,n=187,o=179,p=183,q=241,r=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])];function s(a,b){if(!a&&!b)return!0;if(!a||!b)return!1;if(a.length!=b.length)return!1;for(var c=0;c<a.length;++c)if(a[c]!=b[c])return!1;return!0}var t=function(){function a(a,b){this.id=a,this.$1=b}var b=a.prototype;b.getOffset=function(){return this.$1.byteOffset};b.createParser=function(){return new u(this.$1)};b.getUint=function(){if(this.$1.byteLength>8)throw new RangeError("EbmlElement: Unsigned integer has too many bytes.");if(this.$1.byteLength==8&&this.$1.getUint8(0)&224)throw new RangeError("EbmlParser: Unsigned integer must be at most 53 bits.");var a=0;for(var b=0;b<this.$1.byteLength;b++){var c=this.$1.getUint8(b);a=256*a+c}return a};b.getFloat=function(){if(this.$1.byteLength==4)return this.$1.getFloat32(0);else if(this.$1.byteLength==8)return this.$1.getFloat64(0);else throw new RangeError("EbmlElement: floating point numbers must be 4 or 8 bytes.")};return a}(),u=function(){function a(a){this.$1=a,this.$2=new(c("oz-player/shims/OzDataViewReader"))(this.$1)}var b=a.prototype;b.hasMoreData=function(){return this.$2.hasMoreData()};b.parseElement=function(){var b=this.$3(),c=this.$4(),d;a.$5(c)?d=this.$1.byteLength-this.$2.getCursor():d=a.$6(c);c=this.$2.getCursor()+d<=this.$1.byteLength?d:this.$1.byteLength-this.$2.getCursor();d=new DataView(this.$1.buffer,this.$1.byteOffset+this.$2.getCursor(),c);this.$2.skip(c);return new t(b,d)};b.$3=function(){var a=this.$4();if(a.length>7)throw new RangeError("EbmlParser: EBML ID must be at most 7 bytes.");var b=0;for(var c=0;c<a.length;c++)b=256*b+a[c];return b};b.$4=function(){var a=this.$2.readUint8(),b;for(b=1;b<=8;b++){var c=1<<8-b;if(a&c)break}if(b>8)throw new RangeError("EbmlParser: Variable sized integer must fit within 8 bytes.");c=new Uint8Array(b);c[0]=a;for(a=1;a<b;a++)c[a]=this.$2.readUint8();return c};a.$6=function(a){if(a.length==8&&a[1]&224)throw new RangeError("EbmlParser: Variable sized integer value must be at most 53 bits.");var b=1<<8-a.length;b=a[0]&b-1;for(var c=1;c<a.length;c++)b=256*b+a[c];return b};a.$5=function(a){for(var b=0;b<r.length;b++)if(s(a,r[b]))return!0;return!1};return a}();function v(a){a=a.createParser();var b=1e6,c=null;while(a.hasMoreData()){var d=a.parseElement();d.id==k?b=d.getUint():d.id==l&&(c=d.getFloat())}if(c==null)return null;d=b/1e9;a=c*d;return{timecodeScale:d,duration:a}}function w(a,b,d,e,f,g){a=[];b=b.createParser();var h=-1,i=-1;while(b.hasMoreData()){var j=b.parseElement();if(j.id!=n)continue;j=x(j);if(!j)continue;var k=e*j.unscaledTime;j=d+j.relativeOffset;h>=0&&(i>=0||c("oz-player/shims/ozvariant")(0,4010),a.push(new(c("oz-player/manifests/OzDataSegment"))(g,h,k,i,j-1)));h=k;i=j}if(h>=0){i>=0||c("oz-player/shims/ozvariant")(0,4010);k=f;a.push(new(c("oz-player/manifests/OzDataSegment"))(g,h,k,i,null))}return a}function x(a){a=a.createParser();var b=a.parseElement();if(b.id!=o)return null;b=b.getUint();a=a.parseElement();if(a.id!=p)return null;a=a.createParser();var c=0;while(a.hasMoreData()){var d=a.parseElement();if(d.id!=q)continue;c=d.getUint();break}return{unscaledTime:b,relativeOffset:c}}function y(a){a=a.createParser();var b=null;while(a.hasMoreData()){var c=a.parseElement();if(c.id!=j)continue;b=c;break}return!b?null:v(b)}function z(a){a=new u(a);var b=a.parseElement();if(b.id!=h)return null;b=a.parseElement();if(b.id!=i)return null;a=b.getOffset();b=y(b);return!b?null:{segmentOffset:a,timecodeScale:b.timecodeScale,duration:b.duration}}function a(a,b,c,d){d=new DataView(d.buffer);c=new DataView(c.buffer);d=z(d);if(!d)return[];c=new u(c);c=c.parseElement();return c.id!=m?[]:w(a,c,d.segmentOffset,d.timecodeScale,d.duration,b)}g.parse=a}),98);
__d("oz-player/parsers/OzSidxSegmentsParser",["oz-player/loggings/OzLoggingUtils","oz-player/manifests/OzSegmentOptions","oz-player/manifests/OzZeroTimeRangeSegment","oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter","oz-player/parsers/OzMp4SidxParser","oz-player/parsers/OzSidxSegmentsContainer","oz-player/parsers/OzWebmSidxParser","oz-player/shims/OzEventEmitter","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzURI","oz-player/utils/OzErrorEmitter","oz-player/utils/OzReadableStreamUtils"],(function(a,b,c,d,e,f,g){"use strict";function h(a){a=a.split("-");return{startByte:Number.parseInt(a[0],10),endByte:Number.parseInt(a[1],10)}}a=function(){function a(a,b,d,e,f,g,h){this.$6=new(c("oz-player/utils/OzErrorEmitter"))(),this.$7=[],this.$9=new(c("oz-player/shims/OzEventEmitter"))(),this.$1=b,this.$2=new(c("oz-player/shims/OzURI"))(d),this.$3=e,this.$5=f,this.$4=g,this.$8=h.cloneContext().setType(f==="video"||f==="audio"?f+";sidx":"sidx"),this.$10=a}var b=a.prototype;b.onError=function(a){return this.$6.onError(a)};b.parseInitializationSegment=function(){var a=this,b=this.$1.Initialization[0].$.range,d=h(b),e=new(c("oz-player/manifests/OzSegmentOptions"))();return this.$10.getBool("sidx_parser_memory_optimization")?new(c("oz-player/manifests/OzZeroTimeRangeSegment"))(this.$2,d.startByte,d.endByte):{getData:function(){return null},getURI:function(){return a.$2},getTimeRange:function(){return{startTime:0,endTime:0}},getByteRange:function(){return d},getSequenceNumber:function(){return null},getOptions:function(){return e}}};b.parseSegmentsContainer=function(){var a=this,b=this.$11();d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(b,this.$8,"process_sidx");b["catch"](function(b){a.$6.emitError(b)});return new(c("oz-player/parsers/OzSidxSegmentsContainer"))(function(){return a.$7},this.$9)};b.$12=function(a,b,e){a=new(c("oz-player/manifests/OzZeroTimeRangeSegment"))(a,b.startByte,b.endByte);b=this.$5+";sidx";a=this.$4.request({debugName:"OzSidxSegmentsParser/sidx/"+this.$5,segments:[a],pipeThroughRangeStreamProviders:[c("oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter")(b,this.$4.getBandwidthEstimator())],loggerProvider:this.$8,requestOptions:{networkTimeoutMs:null,retryAttempts_SIDX_USE_ONLY:this.$10.getNumber("sidx_segment_retry_attempts"),retryTimeoutMs_SIDX_USE_ONLY:this.$10.getNumber("sidx_segment_retry_interval_ms")},mediaStreamType:e});b=a.getStream().getReader();return d("oz-player/utils/OzReadableStreamUtils").pumpAllData(b)};b.$11=function(){var a=this,b=this.$1.$.indexRange,e=h(b);b=[this.$12(this.$2,e,null)];if(this.$3==="webm"){var f=h(this.$1.Initialization[0].$.range);b.push(this.$12(this.$2,f,null));f=c("oz-player/shims/OzMaybeNativePromise").all(b).then(function(b){var c=b[0];b=b[1];a.$7=d("oz-player/parsers/OzWebmSidxParser").parse(a.$10,a.$2,c,b)})}else f=b[0].then(function(b){a.$7=d("oz-player/parsers/OzMp4SidxParser").parse(a.$10,a.$2,e.startByte,b)});return f.then(function(){a.$9.emit("segment_updated")})};return a}();g["default"]=a}),98);
__d("oz-player/parsers/OzVideoContainerType",[],(function(a,b,c,d,e,f){"use strict";function a(a){return(a.split("/")[1]||"").trim()}f.parse=a}),66);
__d("oz-player/parsers/OzRepresentationParserBase",["oz-player/manifests/OzRepresentationBase","oz-player/parsers/OzSegmentTemplateParser","oz-player/parsers/OzSidxSegmentsParser","oz-player/parsers/OzVideoContainerType","oz-player/utils/OzErrorEmitter","oz-player/utils/OzErrorUtils","oz-player/utils/OzMimeUtil"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d,e,f,g,h,i,j,k,l,m,n,o,p){this.$9=new(c("oz-player/utils/OzErrorEmitter"))();this.$1=b;this.$2=d;this.$10=f;this.$11=g;this.$13=e;this.$14=a;this.$15=h;this.$3=i;this.$4=j;this.$5=k;this.$6=(b=l)!=null?b:null;this.$7=(d=m)!=null?d:null;this.$8=(f=n)!=null?f:null;this.$16=o;this.$17=p;try{this.$11=this.$11.cloneContext().setRepresentationID(this.parseID())}catch(a){}}var b=a.prototype;b.$18=function(){var a=this,b=this.$12;if(b)return b;if(this.$1.SegmentBase){var e=this.$1.SegmentBase[0],f=this.$1.BaseURL[0]._;if(typeof f!=="string")throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_REPRESENTATION_PARSER",description:"Missing representation BaseURL",extra:{code:"OZ_RP-9"}});b=new(c("oz-player/parsers/OzSidxSegmentsParser"))(this.$14,e,f,d("oz-player/parsers/OzVideoContainerType").parse(this.$1.$.mimeType),d("oz-player/utils/OzMimeUtil").getMimeType(this.$1.$.mimeType),this.$10,this.$11);b.onError(function(b){var c;if((c=a.$17)==null?void 0:c.handleError(a.parseID(),b))return;return a.$9.emitError(b)})}else if(this.$1.SegmentTemplate)b=this.$19(this.$1.SegmentTemplate[0],{isShared:!1});else if(this.$3)b=this.$19(this.$3[0],{isShared:!0});else throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_REPRESENTATION_PARSER",description:"Unrecognized representation type",extra:{code:"OZ_RP-7"}});this.$12=b;return b};b.$19=function(a,b){var e;a=a;b.isShared&&(a=babelHelpers["extends"]({},a,{$:babelHelpers["extends"]({},a.$,{initialization:a.$.initialization.replace("$RepresentationID$",this.$1.$.id),media:a.$.media.replace("$RepresentationID$",this.$1.$.id)})}));b=this.$13.mpdUrl;var f=this.$1.BaseURL&&this.$1.BaseURL[0]?this.$1.BaseURL[0]._:null;f=f!=null?f:b;if(f==null)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_REPRESENTATION_PARSER",description:"Missing mpd url for template manifest",extra:{code:"OZ_RP-6"}});var g=this.$13.customSegmentTimelineParser;e=(e=this.$13.customRepresentationParsers)==null?void 0:e.initializationBinary;e=e?e(this.$1):null;return new(c("oz-player/parsers/OzSegmentTemplateParser"))(this.$14,a,{baseUrl:f,mpdUrl:b,isStaticMpd:this.$15.manifestType==="static",isTemplatedMpd:this.$15.manifestIsTemplated},g,e)};b.onError=function(a){return this.$9.onError(a)};b.parseInitSegment=function(){return this.$18().parseInitializationSegment()};b.parseBandwidth=function(){return Number(this.$1.$.bandwidth)};b.parseMimeType=function(){var a;return(a=(a=this.$1.$.mimeType)!=null?a:this.$4)!=null?a:""};b.parseCodecs=function(){var a;return(a=(a=this.$1.$.codecs)!=null?a:this.$5)!=null?a:""};b.parseVariantKey=function(){return this.$6};b.parseLang=function(){return this.$7};b.parseRole=function(){return this.$8};b.parseSegmentsContainer=function(){return this.$18().parseSegmentsContainer()};b.parseID=function(){return""+this.$1.$.id};b.parseCustomFieldFirstSegment=function(){var a=this.$13.customRepresentationParsers?this.$13.customRepresentationParsers.firstSegmentParser:null;return a?a(this.$1):null};b.parse=function(){return new(c("oz-player/manifests/OzRepresentationBase"))(this.$1,this.$2,this.parseID(),this.parseMimeType(),this.parseCodecs(),this.parseVariantKey(),this.parseLang(),this.parseRole(),this.parseInitSegment(),this.parseSegmentsContainer(),this.parseBandwidth(),this.parseCustomFieldFirstSegment(),this.$13.customRepresentationParsers)};return a}();g["default"]=a}),98);
__d("oz-player/parsers/OzApplicationRepresentationParser",["oz-player/manifests/OzApplicationRepresentation","oz-player/parsers/OzRepresentationParserBase"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d,e,f,g,h,i,j,k,l,m,n,o){b=a.call(this,b,c,d,e,f,g,h,i,j,k,l,m,n,o)||this;b.$OzApplicationRepresentationParser$p_1=c;b.$OzApplicationRepresentationParser$p_3=e;return b}var d=b.prototype;d.parse=function(){var a=this.$OzApplicationRepresentationParser$p_3.customRepresentationParsers;return new(c("oz-player/manifests/OzApplicationRepresentation"))(this.$OzApplicationRepresentationParser$p_1,this.$OzApplicationRepresentationParser$p_2,this.parseID(),this.parseMimeType(),this.parseCodecs(),this.parseVariantKey(),this.parseLang(),this.parseRole(),this.parseInitSegment(),this.parseSegmentsContainer(),this.parseBandwidth(),this.parseCustomFieldFirstSegment(),a)};return b}(c("oz-player/parsers/OzRepresentationParserBase"));g["default"]=a}),98);
__d("oz-player/manifests/OzAudioRepresentation",["oz-player/manifests/OzRepresentationBase"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d,e,f,g,h,i,j,k,l,m,n){b=a.call(this,b,c,d,e,f,g,h,i,j,k,l,m,n)||this;b.$OzAudioRepresentation$p_1=d;b.$OzAudioRepresentation$p_2=l;b.$OzAudioRepresentation$p_3={id:d,displayLabel:b.getDisplayLabel(),mimeCodecs:b.getMimeCodecs(),variantKey:g,lang:h,role:i};return b}var c=b.prototype;c.getBitrateKbps=function(){var a=1024;return(this.$OzAudioRepresentation$p_2/a).toFixed(1)+"Kbps"};c.getDisplayLabel=function(){var b=a.prototype.getLang.call(this),c=a.prototype.getRole.call(this);b=b==null?"Default":b;return c==null?b:b+" - "+c};c.getAudioTrack=function(){return this.$OzAudioRepresentation$p_3};return b}(c("oz-player/manifests/OzRepresentationBase"));g["default"]=a}),98);
__d("oz-player/parsers/OzAudioRepresentationParser",["oz-player/manifests/OzAudioRepresentation","oz-player/parsers/OzRepresentationParserBase"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d,e,f,g,h,i,j,k,l,m,n,o){b=a.call(this,b,c,d,e,f,g,h,i,j,k,l,m,n,o)||this;b.$OzAudioRepresentationParser$p_1=c;b.$OzAudioRepresentationParser$p_3=e;return b}var d=b.prototype;d.parse=function(){var a=this.$OzAudioRepresentationParser$p_3.customRepresentationParsers;return new(c("oz-player/manifests/OzAudioRepresentation"))(this.$OzAudioRepresentationParser$p_1,this.$OzAudioRepresentationParser$p_2,this.parseID(),this.parseMimeType(),this.parseCodecs(),this.parseVariantKey(),this.parseLang(),this.parseRole(),this.parseInitSegment(),this.parseSegmentsContainer(),this.parseBandwidth(),this.parseCustomFieldFirstSegment(),a)};return b}(c("oz-player/parsers/OzRepresentationParserBase"));g["default"]=a}),98);
__d("oz-player/parsers/OzVideoRepresentationParser",["oz-player/manifests/OzVideoRepresentation","oz-player/parsers/OzRepresentationParserBase"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b=a.call(this,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p)||this;b.$OzVideoRepresentationParser$p_1=c;b.$OzVideoRepresentationParser$p_2=d;b.$OzVideoRepresentationParser$p_3=e;return b}var d=b.prototype;d.parse=function(){var a=Number.parseInt(this.$OzVideoRepresentationParser$p_1.$.height,10),b=Number.parseInt(this.$OzVideoRepresentationParser$p_1.$.width,10),d=this.$OzVideoRepresentationParser$p_3.customRepresentationParsers;return new(c("oz-player/manifests/OzVideoRepresentation"))(this.$OzVideoRepresentationParser$p_1,this.$OzVideoRepresentationParser$p_2,this.parseID(),this.parseMimeType(),this.parseCodecs(),this.parseVariantKey(),this.parseLang(),this.parseRole(),this.parseInitSegment(),this.parseSegmentsContainer(),this.parseBandwidth(),this.parseCustomFieldFirstSegment(),d,b,a)};return b}(c("oz-player/parsers/OzRepresentationParserBase"));g["default"]=a}),98);
__d("oz-player/utils/OzIbrUtils",["oz-player/networks/OzBandwidthEstimator"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b,d){var e=c("oz-player/networks/OzBandwidthEstimator").getAdjustedBandwidth(b.getLegacyConfig());a=a.slice(0);a.sort(function(a,b){return a.getBandwidth()-b.getBandwidth()});b=b.getNumber("live_audio_ibr_bandwidth_percentage");b=e*b;for(var f=a.length-1;f>=0;f--)if(a[f].getBandwidth()<=b){d.getOperationLogger("audio_ibr_success").setRepresentationID(a[f].getID()).setReason(e.toString()).log();return a[f]}d.getOperationLogger("audio_ibr_no_op").setReason(e.toString()).log();return null};g.getInitialAudioRepresentation=a}),98);
__d("oz-player/parsers/OzMpdParser",["oz-player/manifests/Mpd","oz-player/parsers/OzApplicationRepresentationParser","oz-player/parsers/OzAudioRepresentationParser","oz-player/parsers/OzVideoRepresentationParser","oz-player/utils/OzErrorEmitter","oz-player/utils/OzErrorUtils","oz-player/utils/OzIbrUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=a.blockedRepresentationsManager,d=a.config,e=a.drmManager,f=a.enableAlternativeAudioTracks,g=a.initialRepresentationIDs,h=a.networkManager,i=a.ozParserContext;a=a.perfLoggerProvider;this.$2=new(c("oz-player/utils/OzErrorEmitter"))();this.$5=d;this.$1=h;this.$3=a;this.$4=i;this.$6=e;this.$7=(d=g)!=null?d:[];this.$8=(h=b)!=null?h:null;this.$9=f;this.$10=!0}var b=a.prototype;b.onError=function(a){return this.$2.onError(a)};b.parse=function(a){var b=this,e=[];a=a;var f=this.$4.createXmlParser().parse(a);f=f.MPD&&f.MPD.length>0?f.MPD[0]:null;if(!f){var g=2e3;throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_MPD_PARSER",description:"parsed manifest XML missing MPD node; truncated xml ("+Math.min(g,a.length)+"/"+a.length+"): "+a.substring(0,g)})}g=f.Period&&f.Period.length>0?f.Period[0]:null;if(!g){var h=2e3;throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_MPD_PARSER",description:"parsed manifest XML missing Period node; truncated xml ("+Math.min(h,a.length)+"/"+a.length+"): "+a.substring(0,h)})}a=g.AdaptationSet||[];h=this.$11(f);this.$10=h==="static";g=this.$12(f);var i=this.$13(this.$14(a,"video"),{manifestType:h,manifestIsTemplated:g},e),j;this.$9?j=this.$15(this.$14(a,"audio"),{manifestType:h,manifestIsTemplated:g},e).sort(function(a,b){return a.getBandwidth()-b.getBandwidth()}):j=this.$16(this.$17(a,"audio"),c("oz-player/parsers/OzAudioRepresentationParser"),{manifestType:h,manifestIsTemplated:g},e).sort(function(a,b){return a.getBandwidth()-b.getBandwidth()});var k=[];if(this.$5.getBool("vtt_caption_representation")){a=this.$14(a,"application");k=this.$16(a[0],c("oz-player/parsers/OzApplicationRepresentationParser"),{manifestType:h,manifestIsTemplated:g},e)}a=this.$4.mpdUrl;h=new(c("oz-player/manifests/Mpd"))(f,i,j,k,a,this.$18(f),this.$4.customParsers||new Map(),this.$10);if(this.$6){g=this.$6;g.startEME(i,j)}e.forEach(function(a){a.onError(b.$2.emitError)});return h};b.$18=function(a){a=a.$.minimumUpdatePeriod||"";a=/\d+/g.exec(a);if(a&&a.length){a=a[0];return a?Number.parseInt(a,10):null}return null};b.$11=function(a){return a.$.type||"static"};b.$12=function(a){var b;b=(b=this.$4.customParsers)==null?void 0:b.get("isLiveTemplated");if(!b)return!1;b=b(a);return typeof b==="boolean"&&b};b.$17=function(a,b){return a.find(this.$19(b))};b.$14=function(a,b){return a.filter(this.$19(b))};b.$19=function(a){return function(b){if(b.$.mimeType!=null)return b.$.mimeType.indexOf(a)!==-1;b=b.Representation;return b&&b.length>0&&b[0].$.mimeType.indexOf(a)!==-1}};b.$16=function(a,b,c,d){var e=this;if(!a)return[];var f=a.Role;f=(f=f)!=null?f:[];f=f[0];var g=f?f.$.value:null;f=a.$.lang;var h=f==="und"?null:f;f=a.$.FBVariantKey;var i=f==="und"?null:(f=f)!=null?f:null;return a.Representation.map(function(f){f=new b(e.$5,f,(f=f.ContentProtection)!=null?f:a.ContentProtection,e.$4,e.$1,e.$3,c,a.SegmentTemplate,a.$.mimeType,a.$.codecs,i,h,g,e.$7,e.$8);var j=f.parse();d.push(f);return j})};b.$13=function(a,b,d){var e=this,f=[],g=new Set();a.filter(Boolean).forEach(function(a,h,i){h=h===i.length-1;for(var i=a.Representation,j=Array.isArray(i),k=0,i=j?i:i[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var l,m;if(j){if(k>=i.length)break;m=i[k++]}else{k=i.next();if(k.done)break;m=k.value}m=m;if(((l=m.$.FBAbrPolicyTags)==null?void 0:l.includes("avoid_on_abr"))&&!h)continue;l=a.Role;l=(l=l)!=null?l:[];l=l[0];l=l?l.$.value:null;var n=a.$.lang;n=n==="und"?null:n;var o=a.$.FBVariantKey;o=o==="und"?null:(o=o)!=null?o:null;m=new(c("oz-player/parsers/OzVideoRepresentationParser"))(e.$5,m,(m=m.ContentProtection)!=null?m:a.ContentProtection,e.$4,e.$1,e.$3,b,a.SegmentTemplate,a.$.mimeType,a.$.codecs,o,n,l,e.$7,e.$8);o=m.parse();d.push(m);if(!MediaSource.isTypeSupported(o.getMimeCodecs())){g.add(o.getMimeCodecs());continue}f.push(o)}});return f.filter(Boolean)};b.$15=function(a,b,e){var f=this,g=[],h=new Set();a=a.filter(Boolean).map(function(a){var d=a.Role;d=(d=d)!=null?d:[];d=d[0];d=d?d.$.value:null;var g=a.$.lang;g=g==="und"?null:g;var i=a.$.FBVariantKey;i=i==="und"?null:(i=i)!=null?i:null;var j=[];for(var k=a.Representation,l=Array.isArray(k),m=0,k=l?k:k[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var n;if(l){if(m>=k.length)break;n=k[m++]}else{m=k.next();if(m.done)break;n=m.value}n=n;n=new(c("oz-player/parsers/OzAudioRepresentationParser"))(f.$5,n,(n=n.ContentProtection)!=null?n:a.ContentProtection,f.$4,f.$1,f.$3,b,a.SegmentTemplate,a.$.mimeType,a.$.codecs,i,g,d,f.$7);var o=n.parse();e.push(n);if(!MediaSource.isTypeSupported(o.getMimeCodecs())){h.add(o.getMimeCodecs());continue}j.push(o)}return j});a.forEach(function(a){if(a.length>1){var b=d("oz-player/utils/OzIbrUtils").getInitialAudioRepresentation(a,f.$5,f.$3);g.push((b=b)!=null?b:a[0])}else g.push.apply(g,a)});return g.filter(Boolean)};return a}();g["default"]=a}),98);
__d("oz-player/utils/OzMpdUtils",[],(function(a,b,c,d,e,f){"use strict";function g(a){var b=null;a.forEach(function(a){if(a){var c=a.endTime;c<((c=(c=b)==null?void 0:c.endTime)!=null?c:Infinity)&&(b=a)}});return b}function a(a,b){b=[];b.push.apply(b,a.getVideoRepresentations().concat(a.getAudioRepresentations()));if(b.length){a=b.map(function(a){a=a.getEndingSegment();return a?a.getTimeRange():null});return g(a)}return null}function b(a){var b=[];b.push.apply(b,a.getVideoRepresentations().concat(a.getAudioRepresentations()));if(b.length){a=b[0].getEndingSegment();if(a)return a.getSequenceNumber()}return null}f.getLeastEndTimeTimeRange=g;f.getMpdLastTimeRange=a;f.getMpdLastSequenceNumber=b}),66);
__d("oz-player/utils/OzStreamInterruptChecker",["oz-player/shims/OzEventEmitter","oz-player/utils/OzMpdUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){var d;d=a.call(this)||this;d.$OzStreamInterruptChecker$p_4=0;d.$OzStreamInterruptChecker$p_5=null;d.$OzStreamInterruptChecker$p_6=!1;d.$OzStreamInterruptChecker$p_2=b;d.$OzStreamInterruptChecker$p_3=c;d.$OzStreamInterruptChecker$p_1=d.$OzStreamInterruptChecker$p_3.getNumber("live_numerical_error_epsilon");return d}var c=b.prototype;c.notifyMpdUpdated=function(){var a=d("oz-player/utils/OzMpdUtils").getMpdLastTimeRange(this.$OzStreamInterruptChecker$p_2,this.$OzStreamInterruptChecker$p_3),b=a?a.endTime:null,c=!1;b!==null&&(c=b===this.$OzStreamInterruptChecker$p_5);c?this.$OzStreamInterruptChecker$p_4++:(this.$OzStreamInterruptChecker$p_4=0,this.$OzStreamInterruptChecker$p_6&&this.$OzStreamInterruptChecker$p_5!==null&&this.$OzStreamInterruptChecker$p_5!==void 0&&a!==null&&a!==void 0&&this.emit("streamResumedAt",a.startTime),this.$OzStreamInterruptChecker$p_6=!1);c=this.$OzStreamInterruptChecker$p_3.getNumber("stream_interrupt_check_mpd_stale_count_threshold");!this.$OzStreamInterruptChecker$p_6&&c>0&&this.$OzStreamInterruptChecker$p_4>=c&&b!==null&&b!==void 0&&(this.emit("streamInterruptAt",b),this.$OzStreamInterruptChecker$p_6=!0);this.$OzStreamInterruptChecker$p_5=b};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/parsers/OzMpdUpdater",["oz-player/parsers/OzMpdParser","oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/OzURI","oz-player/shims/ozClearTimeout","oz-player/shims/ozSetTimeoutAcrossTransitions","oz-player/utils/OzErrorEmitter","oz-player/utils/OzErrorUtils","oz-player/utils/OzMpdUtils","oz-player/utils/OzReadableStreamUtils","oz-player/utils/OzStreamInterruptChecker"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,e,f,g,h,i,j,k){var l;l=a.call(this)||this;l.$OzMpdUpdater$p_8=new(c("oz-player/utils/OzErrorEmitter"))();l.$OzMpdUpdater$p_10=new(c("oz-player/shims/OzSubscriptionsHandler"))();l.$OzMpdUpdater$p_11=!1;l.$OzMpdUpdater$p_16=0;l.$OzMpdUpdater$p_18=0;l.$OzMpdUpdater$p_19=null;l.$OzMpdUpdater$p_21=!0;l.$OzMpdUpdater$p_22=0;l.$OzMpdUpdater$p_25=function(){var a,b=l.$OzMpdUpdater$p_2.getLocation();l.$OzMpdUpdater$p_21=!1;if(b==null||b==="")return;var e=new(c("oz-player/shims/OzURI"))(b),f=String((a=(a=e.getQueryData().ms)!=null?a:e.getQueryData().msdev)!=null?a:e.getQueryData().mstest);if(!l.$OzMpdUpdater$p_12.isPlaying()){l.setupUpdateLoop();return}var g=l.$OzMpdUpdater$p_5.getOperationLogger("update_manifest").start();l.$OzMpdUpdater$p_27(b).then(function(a){var e,h;l.$OzMpdUpdater$p_18=0;l.$OzMpdUpdater$p_28();l.$OzMpdUpdater$p_7=0;if(l.$OzMpdUpdater$p_21)return;var i=babelHelpers["extends"]({},l.$OzMpdUpdater$p_13,{mpdUrl:b});i=new(c("oz-player/parsers/OzMpdParser"))({config:l.$OzMpdUpdater$p_6,ozParserContext:i,networkManager:l.$OzMpdUpdater$p_1,perfLoggerProvider:l.$OzMpdUpdater$p_5,drmManager:l.$OzMpdUpdater$p_14,initialRepresentationIDs:[],blockedRepresentationsManager:null,enableAlternativeAudioTracks:!1});i.onError(function(a){l.$OzMpdUpdater$p_8.emitError(a),g.setError(a).log()});i=i.parse(a);a=l.$OzMpdUpdater$p_2.isStaticMpd();l.$OzMpdUpdater$p_2.updateWith(i);l.$OzMpdUpdater$p_2.markRefreshed();i.isStaticMpd()&&!a&&l.emit("streamTransitionToStatic");i=d("oz-player/utils/OzMpdUtils").getMpdLastTimeRange(l.$OzMpdUpdater$p_2,l.$OzMpdUpdater$p_6);a=i&&i.endTime!=0?i.endTime:null;i=String((i=(i=l.$OzMpdUpdater$p_2)==null?void 0:i.getCustomField("currentServerTimeMs"))!=null?i:"");e=String((e=(e=l.$OzMpdUpdater$p_2)==null?void 0:e.getCustomField("lastVideoFrameTs"))!=null?e:"");i={currentServerTimeMs:i,ingestLastVideoFrameTs:e,nowMs:String(Date.now())};e=new Set(((e=(e=l.$OzMpdUpdater$p_2)==null?void 0:e.getVideoRepresentations())!=null?e:[]).map(function(a){return a.getCodecs()})).size>1;h=new Set(((h=(h=l.$OzMpdUpdater$p_2)==null?void 0:h.getAudioRepresentations())!=null?h:[]).map(function(a){return a.getCodecs()})).size>1;g.setLiveheadPosition(a).setLiveheadSeqNumMpd(d("oz-player/utils/OzMpdUtils").getMpdLastSequenceNumber(l.$OzMpdUpdater$p_2)).setManifestType(l.$OzMpdUpdater$p_2.isStaticMpd()?"static":"dynamic").setIsMixedCodecManifest(e||h).setIsTemplatedManifest(Boolean(l.$OzMpdUpdater$p_2.getCustomField("isLiveTemplated"))).setPlaybackFbmsParam(f).setUserInfo(i).log();l.$OzMpdUpdater$p_9.notifyMpdUpdated();l.setupUpdateLoop()})["catch"](function(a){l.$OzMpdUpdater$p_28();g.setError(a).log();var c=null;if(d("oz-player/utils/OzErrorUtils").isOzError(a))c=a;else{var e,f=null,h="Caught an unknown error when fetching the manifest.";if(a!=null)if(l.$OzMpdUpdater$p_6.getBool("normalize_mpd_fetch_errors")){var i=d("oz-player/utils/OzErrorUtils").getNormalizedErrorAndCode(a),j=i[0];i[1];c=j}else e=a,f=e.code!=null?String(e.code):null,h=e.name+"; "+e.message+"; "+e.description+";";if(c==null){i={originalError:e,url:b};f!==null&&(i.code=f);c=d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_NETWORK",description:h,extra:i})}}l.$OzMpdUpdater$p_26(c,b)})};var m=e.getMinimumUpdatePeriod();l.$OzMpdUpdater$p_7=0;l.$OzMpdUpdater$p_1=f;l.$OzMpdUpdater$p_2=e;l.$OzMpdUpdater$p_12=g;l.$OzMpdUpdater$p_3=m;l.$OzMpdUpdater$p_5=h.cloneContext().setType("manifest");l.$OzMpdUpdater$p_6=b;l.$OzMpdUpdater$p_13=i;l.$OzMpdUpdater$p_14=j;l.$OzMpdUpdater$p_15=k;l.$OzMpdUpdater$p_2.addListener("locationUpdated",function(){l.$OzMpdUpdater$p_23(),l.setupUpdateLoop()});l.$OzMpdUpdater$p_9=new(c("oz-player/utils/OzStreamInterruptChecker"))(l.$OzMpdUpdater$p_2,l.$OzMpdUpdater$p_6);l.$OzMpdUpdater$p_10.addSubscriptions(l.$OzMpdUpdater$p_9.addListener("streamResumedAt",function(a){l.emit("streamResumedAt",a)}),l.$OzMpdUpdater$p_9.addListener("streamInterruptAt",function(a){l.emit("streamInterruptAt",a)}));return l}var e=b.prototype;e.$OzMpdUpdater$p_23=function(){c("oz-player/shims/ozClearTimeout")(this.$OzMpdUpdater$p_4),this.$OzMpdUpdater$p_4=null,this.$OzMpdUpdater$p_24(),this.$OzMpdUpdater$p_21=!0};e.setupUpdateLoop=function(){var a,b=!this.$OzMpdUpdater$p_11;b&&(b=!this.$OzMpdUpdater$p_2.isStaticMpd(),this.$OzMpdUpdater$p_3=this.$OzMpdUpdater$p_2.getMinimumUpdatePeriod());a=this.$OzMpdUpdater$p_17==null&&this.$OzMpdUpdater$p_6.getNumber("manifest_initial_update_delay_ms")>0?this.$OzMpdUpdater$p_6.getNumber("manifest_initial_update_delay_ms"):this.$OzMpdUpdater$p_6.getNumber("manifest_update_frequency_ms")||((a=this.$OzMpdUpdater$p_3)!=null?a:0)*1e3;b&&a&&this.$OzMpdUpdater$p_2.getLocation()&&(this.$OzMpdUpdater$p_4=c("oz-player/shims/ozSetTimeoutAcrossTransitions")(this.$OzMpdUpdater$p_25,a))};e.onError=function(a){return this.$OzMpdUpdater$p_8.onError(a)};e.$OzMpdUpdater$p_26=function(a,b){var c=this;b=!0;var d=this.$OzMpdUpdater$p_18-1,e=a.getExtra().code;this.$OzMpdUpdater$p_19!==e?(this.$OzMpdUpdater$p_19=e,this.$OzMpdUpdater$p_16=1):this.$OzMpdUpdater$p_16++;var f=function(){b=!1};e={endStream:function(){f(),c.$OzMpdUpdater$p_11=!0,c.emit("streamGone")},consecutiveFailuresForErrorCode:this.$OzMpdUpdater$p_16,error:a,isInitialRequest:!1,retry:function(b){c.emit("manifestFetchErrorRetry",a),f(),c.setupUpdateLoop()},retryAttemptCount:d};this.emit("manifestFetchError",e);b&&this.$OzMpdUpdater$p_8.emitError(a)};e.$OzMpdUpdater$p_29=function(a,b){a=new(c("oz-player/shims/OzURI"))(a);a.addQueryData("_nc_expid",b);return a.toString()};e.$OzMpdUpdater$p_30=function(a){if(!this.$OzMpdUpdater$p_15)return a;a=new(c("oz-player/shims/OzURI"))(a);a.addQueryData("_nc_tsid","mpd-"+this.$OzMpdUpdater$p_22++);return a.toString()};e.$OzMpdUpdater$p_27=function(a){this.$OzMpdUpdater$p_24();this.$OzMpdUpdater$p_18++;var b=this.$OzMpdUpdater$p_6.getString("cdn_experiment_id");a=b.length===0?a:this.$OzMpdUpdater$p_29(a,b);a=this.$OzMpdUpdater$p_30(a);b=this.$OzMpdUpdater$p_1.requestRawUrl({debugName:"OzMpdUpdater/requestMpd/mpd",url:a,options:{networkTimeoutMs:this.$OzMpdUpdater$p_6.getNumber("mpd_updater_network_request_timeout_ms")},loggerProvider:this.$OzMpdUpdater$p_5});this.$OzMpdUpdater$p_17=Date.now();this.$OzMpdUpdater$p_20=b;a=b.getStream().getReader();return d("oz-player/utils/OzReadableStreamUtils").pumpString(a)};e.$OzMpdUpdater$p_24=function(){this.$OzMpdUpdater$p_20&&(this.$OzMpdUpdater$p_20.cancel(),this.$OzMpdUpdater$p_18=0),this.$OzMpdUpdater$p_28()};e.$OzMpdUpdater$p_28=function(){this.$OzMpdUpdater$p_20=null};e.destroy=function(){this.$OzMpdUpdater$p_4&&c("oz-player/shims/ozClearTimeout")(this.$OzMpdUpdater$p_4),this.$OzMpdUpdater$p_10.release()};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/shims/OzXmlParserTrustedTypesHTMLPolicy",["oz-player/shims/www/OzXmlParserTrustedTypesHTMLPolicyWWW"],(function(a,b,c,d,e,f,g){"use strict";g.createTrustedHTMLForDOMParser=d("oz-player/shims/www/OzXmlParserTrustedTypesHTMLPolicyWWW").createTrustedHTMLForDOMParser}),98);
__d("oz-player/parsers/OzXmlParserImplDOMParser",["oz-player/shims/OzXmlParserTrustedTypesHTMLPolicy","oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){function h(){return{$:{}}}function i(a){var b=h();for(var c=a.attributes,d=0;d<c.length;++d){var e=c[d];b.$[e.name]=e.value}for(e=a.childNodes,c=0;c<e.length;++c){d=e[c];if(d instanceof Element){a=d.nodeName;Object.prototype.hasOwnProperty.call(b,a)||(b[a]=[]);b[a].push(i(d))}else{a=d.nodeValue.trim();a&&(b._=a)}}return b}a=function(){function a(){this.$1=new DOMParser()}var b=a.prototype;b.parse=function(a){try{var b=h(),c=d("oz-player/shims/OzXmlParserTrustedTypesHTMLPolicy").createTrustedHTMLForDOMParser(a);c=this.$1.parseFromString(c,"application/xml");var e=c.querySelector("parsererror");if(e){var f=e.querySelector("h3");f=f?f.nextElementSibling:null;f=f?f.innerHTML:e.innerHTML;e=2e3;throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_XML_PARSER",description:"DOMParser parsererror: "+String(f).trim()+"; truncated xml ("+Math.min(e,a.length)+"/"+a.length+"): "+a.substring(0,e),extra:{}})}f=c.documentElement;f!=null&&(b[f.nodeName]=[i(f)]);return b}catch(b){if(d("oz-player/utils/OzErrorUtils").isOzError(b))throw b;else{e=2e3;throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_XML_PARSER",description:"XML parse exception: "+String(b)+"; truncated xml ("+Math.min(e,a.length)+"/"+a.length+"): "+a.substring(0,e),extra:{originalError:b}})}}};return a}();g["default"]=a}),98);
__d("oz-player/playback_controls/OzClearSourceBufferOnSeekManager",["oz-player/shims/OzDeferred","oz-player/shims/OzMaybeNativePromise","oz-player/utils/OzCustomErrorCode","oz-player/utils/OzErrorEmitter","oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d,e){e===void 0&&(e=null),this.$3=new(c("oz-player/utils/OzErrorEmitter"))(),this.$4=new Map(),this.$5=!1,this.$6=!1,this.$7=!1,this.$8=null,this.$9=[],this.$10=null,this.$11=null,this.$1=a,this.$2=b,this.$4=d,this.$11=e}var b=a.prototype;b.$12=function(a){var b;this.$5=!0;return(b=this.$8)!=null?b:a.call(this.$1)};b.$13=function(a,b){this.$6=!0,this.$9.push({t:b}),this.$8=b,this.$9.length===1&&this.$14(a)};b.$15=function(a){this.$7=!0;return this.$8!=null?!0:a.call(this.$1)};b.$16=function(a,b){var d=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise")),e=[];this.$4.forEach(function(c,d){d=c.clearSourceBufferRange(a,b);e.push(d)});var f=c("oz-player/shims/OzMaybeNativePromise").all(e);f.then(function(){d.resolve()})["catch"](function(a){d.reject(a)});return d.getPromise()};b.$14=function(a){var b=this,e=this.$9.length>0?this.$9[0]:null,f=this.$2.getNumber("clear_buffer_on_seek_epsilon_s");if(e){var g=e.t;e=this.$1.buffered;var h=e.length,i=e.length<=0,j=-1,k=!1;for(var l=0;j<0&&l<h;++l)j=g-f>=e.start(l)&&g+f<e.end(l)?l:j,k=g<e.start(l)-f;l=j>-1;var m=this.$2.getNumber("clear_buffer_on_seek_nudge_s");l&&j>=0&&j<h&&m>0&&(g=Math.min(g,e.end(j)-m),g=Math.max(g,e.start(j)+m));if(i||l||!k)this.$11&&this.$11.getOperationLogger("seek_to_next_time").setLength(Math.round(g*1e3)).setInitiator("no_clear").log(),a.call(this.$1,g),this.$9.shift(),this.$14(a);else{var n=null;this.$11&&(n=this.$11.getOperationLogger("clear_buffer_before_seek").setLength(Math.round(g*1e3)).setUserInfo({bufferRangesLength:String(h),nudgeSec:String(m)}).start());j=this.$16(Math.max(g-f,0),e.end(h-1)+f);j.then(function(){n&&n.log(),b.$11&&b.$11.getOperationLogger("seek_to_next_time").setLength(Math.round(g*1e3)).setInitiator("after_clear").log(),a.call(b.$1,g),b.$9.shift(),b.$14(a)})["catch"](function(a){n&&n.setError(a).log(),b.$3.emitError(d("oz-player/utils/OzErrorUtils").isOzError(a)?a:d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SOURCE_BUFFER",description:a?a.name+": "+a.message:"Unknown error while clearing the buffer.",extra:{code:c("oz-player/utils/OzCustomErrorCode").SOURCE_BUFFER_MANAGER_CLEAR_RANGE_FAILED,originalError:a}}))})}}else this.$8=null};b.maybeOverwriteVideoCurrentTimeProperty=function(){var a,b,c=this,d=Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(this.$1,"currentTime");d=(a=d)!=null?a:Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"currentTime");a=Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(this.$1,"seeking");a=(b=a)!=null?b:Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"seeking");var e=d&&typeof d.get==="function"?d.get:null,f=d&&typeof d.set==="function"?d.set:null,g=a&&typeof a.get==="function"?a.get:null;if(e&&f&&g&&Object.defineProperty){try{Object.defineProperty(this.$1,"currentTime",{get:function(){return c.$12(e)},set:function(a){c.$13(f,a)},configurable:!0,enumerable:!0});Object.defineProperty(this.$1,"seeking",{get:function(){return c.$15(g)},configurable:!0,enumerable:!0});b=this.$1.currentTime;this.$1.currentTime=b;this.$1.seeking}catch(a){}this.$17(function(){c.getCurrentTimePropertyOverwriteSuccess()&&Object.defineProperty(c.$1,"currentTime",{get:e,set:f,configurable:!0,enumerable:!0}),c.getSeekingPropertyOverwriteSuccess()&&Object.defineProperty(c.$1,"seeking",{get:g,configurable:!0,enumerable:!0})})}};b.getCurrentTimePropertyOverwriteSuccess=function(){return this.$5&&this.$6};b.getSeekingPropertyOverwriteSuccess=function(){return this.$7};b.$17=function(a){this.$10=a};b.onError=function(a){return this.$3.onError(a)};b.destroy=function(){try{this.$10&&this.$10()}catch(a){}};return a}();g["default"]=a}),98);
__d("oz-player/playback_controls/OzSteadyStateManager",["oz-player/shims/ozvariant"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){this.$1=[],this.$2=a,this.$3=b}var b=a.prototype;b.addSample=function(a){var b,c=Math.floor(Date.now()/(1e3*this.$3)),d=c%this.$2;((b=this.$1[d])==null?void 0:b.bucketNumber)!=c&&(this.$1[d]={bucketNumber:0,val:null});this.$1[d]={bucketNumber:c,val:Math.min(a,(b=this.$1[d].val)!=null?b:a)}};b.min=function(){var a=this,b=Date.now(),d=this.$1.filter(function(c){return c!=null&&c.val!=null&&b-a.$2*1e3*a.$3<c.bucketNumber*1e3*a.$3});if(d.length<this.$2)return null;d=d.reduce(function(a,b){if(a==null)return b;var d=b.val;d!=null||c("oz-player/shims/ozvariant")(0,56011);var e=a.val;e!=null||c("oz-player/shims/ozvariant")(0,56011);return d<e?b:a},null);return d==null?void 0:d.val};b.reset=function(){this.$1=[]};return a}();g["default"]=a}),98);
__d("oz-player/playback_controls/OzLiveLatencyManager",["oz-player/playback_controls/OzSteadyStateManager","oz-player/shims/OzDOMEventListener","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozThrottle","oz-player/utils/OzSourceBufferUtil"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=this;this.$8=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$9=null;this.$10=!1;this.$11=null;this.$12=null;this.$13=null;this.$14=!0;var d=a.config,e=a.mpd,f=a.playbackState,g=a.bufferingDetector,h=a.video,i=a.loggerProvider;a=a.getUserSelectedPlaybackRate;this.$1=d;this.$2=e;this.$3=f;this.$15=a;d.getNumber("steadystate_minbuffer_buckets")>0&&(this.$7=new(c("oz-player/playback_controls/OzSteadyStateManager"))(this.$1.getNumber("steadystate_minbuffer_buckets"),this.$1.getNumber("steadystate_minbuffer_buckets_sec")));g!=null&&(this.$8.addSubscriptions(g.addListener("enterBuffering",function(a){if(a==="in_play"){b.$9=0;(a=b.$7)==null?void 0:a.reset()}b.$10=!1;(a=b.$6)==null?void 0:a.log();b.$6=null})),this.$8.addSubscriptions(g.addListener("leaveBuffering",function(){b.$9===0&&(b.$9=Date.now()),b.$10=!1})));this.$4=h;this.$5=i;if(this.$16()){this.$8.addSubscriptions((e=c("oz-player/shims/OzDOMEventListener")).listenDOMEvent(this.$4,"timeupdate",c("oz-player/shims/ozThrottle")(function(){b.$17(),b.$18()},this.$1.getNumber("playhead_manager_timeupdate_throttle_ms"))),e.listenDOMEvent(this.$4,"waiting",function(){b.$17()}),e.listenDOMEvent(this.$4,"durationchange",function(){b.$17()}),e.listenDOMEvent(this.$4,"seeking",function(){var a;b.$13=Date.now();b.$11=null;(a=b.$7)==null?void 0:a.reset()}),e.listenDOMEvent(this.$4,"playing",function(){b.$13=Date.now(),b.$11=null}),e.listenDOMEvent(h,"pause",function(){var a;return(a=b.$7)==null?void 0:a.reset()}))}}var b=a.prototype;b.enabled=function(){var a=this.$1.getNumber("catchup_timeout_after_buffering_sec");return a===0||this.$9==null||this.$9!==0&&this.$9+a*1e3<=Date.now()};b.isBehindPreferredLiveHeadLatencyWithTolerance=function(){return this.$3.getCurrentTime()<this.getInitialPlayHeadPosition()-this.getPreferredLiveHeadLatencyToleranceSec()};b.$19=function(){return this.$3.getCurrentTime()<this.getInitialPlayHeadPosition()};b.$20=function(){var a;a=(a=this.$7)==null?void 0:a.min();return!this.$21()&&a!=null&&a>this.$1.getNumber("steadystate_minbuffer_sec")};b.getInitialPlayHeadPosition=function(){return this.getLiveHeadTimeSec()-this.getPreferredLiveHeadLatencySec()};b.getLiveHeadTimeSec=function(){var a=this.$22();return(a==null?void 0:(a=a.getEndingSegment())==null?void 0:a.getTimeRange().endTime)||0};b.$21=function(){return this.$9!=null&&this.$1.getBool("latencymanager_stalled_edgelatency_sec_on")};b.getPreferredLiveHeadLatencySec=function(){var a=this.$21()?this.$1.getNumber("latencymanager_stalled_edgelatency_sec"):this.$1.getNumber("pdash_download_cursor_catchup_threshold_sec");a=this.$23(a);this.$5.getOperationLogger("latency_manager").setPreferredEdgeLatency(a*1e3);return a};b.getPreferredLiveHeadLatencyToleranceSec=function(){return this.$1.getNumber("pdash_download_cursor_catchup_tolerance_sec")};b.shouldEnableManifestTimeRangeCatchup=function(){return!this.$1.getNumber("pdash_download_cursor_catchup_threshold_sec")};b.shouldEnableCursorBasedCatchup=function(){var a=this.$2.getVideoRepresentations()[0];a=a&&a.canPredict();return a&&this.$1.getNumber("pdash_download_cursor_catchup_threshold_sec")>0};b.setEnableCatchup=function(a){var b=this.$14;!this.$14&&a===!0&&(this.$9=null);this.$14=a;this.$1.getBool("fix_live_rewind_user_selected_playback_speed")&&a!==b&&this.$18()};b.$24=function(a,b,c){var d=this.$1.getNumber("playback_speed_min_sharpness_factor");c=a*2/(1+Math.pow(Math.E,-(c-b)*d));return 1-a+c};b.$16=function(){return!this.$1.getBool("playback_speed_latency_adjustment_disabled")&&(this.$1.getNumber("playback_speed_latency_adjustment_rate")>0||this.$1.getNumber("playback_speed_latency_slowdown_adjustment_rate")>0||this.$1.getNumber("playback_speed_latency_speedup_adjustment_rate")>0)};b.$17=function(){var a,b=d("oz-player/utils/OzSourceBufferUtil").getBufferAheadInBufferedRanges(d("oz-player/utils/OzSourceBufferUtil").convertToBufferedTimeRangeArray(this.$4.buffered),this.$3.getCurrentTime(),this.$1).bufferAheadSec;(a=this.$7)==null?void 0:a.addSample(b)};b.$18=function(){var a=d("oz-player/utils/OzSourceBufferUtil").getBufferAheadInBufferedRanges(d("oz-player/utils/OzSourceBufferUtil").convertToBufferedTimeRangeArray(this.$4.buffered),this.$3.getCurrentTime(),this.$1),b=a.bufferAheadSec;a=a.bufferedOffset;this.$25(b,a)};b.$25=function(a,b){var c=this.$1.getNumber("playback_speed_enabled_delay_sec"),d=this.$1.getNumber("playback_speed_min_buffer_sec");a>d&&(this.$10=!0);var e=this.$1.getNumber("playback_speed_min_duration_sec"),f=this.$1.getNumber("playback_speed_restore_min_duration_sec"),g=this.$1.getNumber("playback_speed_latency_adjustment_rate"),h=this.$1.getNumber("playback_speed_latency_slowdown_adjustment_rate"),i=this.$1.getNumber("playback_speed_latency_speedup_adjustment_rate");if(this.$4.playbackRate===0){var j;(j=this.$6)==null?void 0:j.log();this.$6=null}else if(this.$14&&this.$10&&a<d&&(g>0||h>0)&&b===0&&(c===0||this.$13!=null&&this.$13+c*1e3<Date.now())){j=h>0?1-h:this.$24(g,d,a);this.$6==null&&(this.$6=this.$5.getOperationLogger("latency_manager").start().setInitiator("speed_adjustment").setReason("slow").setUserInfo({newPlaybackRate:String(j),oldPlaybackRate:String(this.$4.playbackRate)}));this.$26(j)}else if(this.$14&&this.$10&&(this.$19()||this.$20())&&i>0&&b===0&&(this.$12==null||this.$12+f*1e3<Date.now())&&(c===0||this.$13!=null&&this.$13+c*1e3<Date.now())){h=1+i;this.$6==null&&(this.$6=this.$5.getOperationLogger("latency_manager").start().setInitiator("speed_adjustment").setReason("fast").setUserInfo({newPlaybackRate:String(h),oldPlaybackRate:String(this.$4.playbackRate)}));this.$26(h)}else if(this.$14===!1||this.$11==null||this.$11+e*1e3<Date.now()){g=this.$4.playbackRate;this.$1.getBool("fix_live_rewind_user_selected_playback_speed")?this.$4.playbackRate=this.$14===!1?this.$15():1:this.$4.playbackRate=1;(d=this.$6)==null?void 0:d.log();this.$6=null;g!==this.$4.playbackRate&&(this.$12=Date.now())}};b.$26=function(a){try{this.$4.playbackRate=a,this.$11=Date.now()}catch(b){(a=this.$6)==null?void 0:a.setError(b).setResult("failed").log();this.$6=null}};b.$22=function(){var a=this.$2.getVideoRepresentations().concat(this.$2.getAudioRepresentations());return a.length===0?null:a.reduce(function(a,b){var c;return(((c=a.getEndingSegment())==null?void 0:c.getTimeRange().endTime)||0)>(((c=b.getEndingSegment())==null?void 0:c.getTimeRange().endTime)||0)?a:b})};b.$23=function(a){var b;if(a<=0)return a;var c=this.$22();b=c==null?void 0:(b=c.getEndingSegment())==null?void 0:b.getTimeRange();if(!b)return a;c=c==null?void 0:(c=c.getSegmentByTime((b==null?void 0:b.endTime)-a))==null?void 0:c.getTimeRange();return!c?a:(b==null?void 0:b.endTime)-(c==null?void 0:c.startTime)};b.destroy=function(){this.$8.release()};return a}();g["default"]=a}),98);
__d("oz-player/playback_controls/OzPlaybackTimeRangeManager",["oz-player/shims/OzSubscriptionsHandler","oz-player/utils/OzBufferingUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=this;this.$4=null;this.$5=0;this.$6=0;this.$7=!0;this.$8=0;this.$9=0;this.$10=!1;this.$12=0;this.$13=0;this.$15=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$17=function(){b.$10!=b.$14.isPlaying()&&(b.$14.isPlaying()&&(b.$11=Date.now()),b.$10=b.$14.isPlaying())};var d=a.video,e=a.config,f=a.mpd,g=a.liveheadFallBehindBlockThreshold,h=a.liveheadFallBehindBlockMargin,i=a.playbackState;a=a.perfLoggerProvider;this.$1=e;this.$2=d;this.$3=f;this.$8=g;this.$9=h;this.$14=i;this.$16=a;this.$1.getNumber("catchup_timeout_after_play_sec")!==0&&this.$15.addSubscriptions(this.$14.addEventListener("play",this.$17),this.$14.addEventListener("pause",this.$17))}var b=a.prototype;b.setTimelineBlockingEnabled=function(a){this.$7=a,this.$7||this.$3.unblockTimeRange()};b.setTimeRangeProvider=function(a){var b=this;this.$4!=null&&this.$4.remove();this.$4=a.addUpdateListener(function(){var c=a.getTimeRanges(),d=0;if(c.length!==0){c=c[c.length-1];d=c.endTime}b.$18(d)})};b.$18=function(a){var b;if(!this.$7)return;if(this.$5===a)return;this.$5=a;if(this.$2.currentTime<=this.$6)return;a=this.$1.getBool("catchup_use_timeline_range_end_time_as_end")?a:this.$2.duration;var c=this.$1.getNumber("overwrite_livehead_fall_behind_block_threshold")!==0?this.$1.getNumber("overwrite_livehead_fall_behind_block_threshold"):this.$8,e=this.$1.getNumber("overwrite_live_time_range_block_margin")!==0?this.$1.getNumber("overwrite_live_time_range_block_margin"):this.$9;this.$17();this.$1.getBool("reset_catchup_timeout_after_play_sec_on_overwrite")&&(this.$13!=e||this.$12!=c)&&(this.$13=e,this.$12=c,this.$11=Date.now());b=this.$1.getNumber("catchup_timeout_after_play_sec")===0||Date.now()-((b=this.$11)!=null?b:0)<this.$1.getNumber("catchup_timeout_after_play_sec")*1e3;if(b&&this.$1.getNumber("pdash_download_cursor_catchup_threshold_sec")===0&&e!==0&&c!==0&&a-this.$2.currentTime>c){b=[];for(c=0;c<this.$2.buffered.length;c++)b.push({startTime:this.$2.buffered.start(c),endTime:this.$2.buffered.end(c)});c=d("oz-player/utils/OzBufferingUtils").getBufferAheadFromCurrentTime(this.$2.currentTime,b);this.$6=this.$2.currentTime+Math.min(c,e);b={startTime:this.$6,endTime:a-e};this.$16.getOperationLogger("latency_manager").setInitiator("time_range_manager").setReason("blocked_range").setLength(b.endTime-b.startTime).setUserInfo({blockedRangeStart:String(b.startTime),blockedRangeEnd:String(b.endTime)}).log();this.$3.blockTimeRange(b)}};b.destroy=function(){this.$4!=null&&(this.$4.remove(),this.$4=null),this.$15.release()};return a}();g["default"]=a}),98);
__d("oz-player/strategies/LiveheadSeekaheadStrategy",[],(function(a,b,c,d,e,f){"use strict";var g=.05;function a(a,b){b=Math.max.apply(Math,b.map(function(a){return a.startTime}));return b-a>0?b-a+g:0}f.computeSeekAhead=a}),66);
__d("oz-player/utils/OzTimelineGapUtil",["oz-player/utils/OzNumericalHelper","oz-player/utils/OzNumericalRangeUtil"],(function(a,b,c,d,e,f,g){"use strict";var h=1.5;function a(a,b,c,e){b=b.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}});return d("oz-player/utils/OzNumericalRangeUtil").findCurrentRangeIndex(c,a,b,e)===-1}function b(a,b,c,e,f){f===void 0&&(f=h);var g=b.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}});c=d("oz-player/utils/OzNumericalRangeUtil").findCurrentRangeIndex(c,a,g,e);if(c!==-1){g=b[c];return d("oz-player/utils/OzNumericalHelper").lessThanOrEqual(a,g.endTime)&&g.endTime-a<f}return!1}g.isInGap=a;g.isNearGap=b}),98);
__d("oz-player/playback_controls/OzPlayheadManager",["oz-player/shims/OzDOMEventListener","oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozThrottle","oz-player/shims/ozvariant","oz-player/strategies/LiveheadSeekaheadStrategy","oz-player/utils/OzNumericalRangeUtil","oz-player/utils/OzSourceBufferUtil","oz-player/utils/OzTimelineGapUtil"],(function(a,b,c,d,e,f,g){"use strict";var h=function(){function a(a){this.$1=a.perfLoggerProvider,this.$2=a.video,this.$4=a.config}var b=a.prototype;b.markState=function(a,b){var c=d("oz-player/utils/OzSourceBufferUtil").convertToBufferedTimeRangeArray(this.$2.buffered),e=this.$3;if(e==null){this.$3=c;return}var f=d("oz-player/utils/OzSourceBufferUtil").getBufferAheadInBufferedRanges(c,b.getCurrentTime(),this.$4);e=d("oz-player/utils/OzSourceBufferUtil").getBufferAheadInBufferedRanges(e,b.getCurrentTime(),this.$4);e.bufferedOffset!==-1&&f.bufferedOffset===-1&&this.$1.getOperationLogger("playhead_adjustment").setError("buffer_deleted").setResult("failed").setUserInfo({vidSeeking:String(this.$2.seeking),vidErrCode:this.$2.error?String(this.$2.error.code):null}).setInitiator(a).log();this.$3=c};return a}(),i=function(){function a(a){this.$5=!1,this.$6={},this.$1=a.perfLoggerProvider,this.$2=a.video}var b=a.prototype;b.markState=function(a,b){var c=this;if(this.$2.paused){this.$3=null;this.$4=null;this.$5=!1;this.$6={};return}(this.$3==null||this.$2.currentTime>this.$3)&&(this.$4=Date.now(),this.$3=this.$2.currentTime,this.$5=!1,this.$6={});this.$6[a]=this.$6[a]==null?1:this.$6[a]+1;var d=this.$4;if(!this.$5&&!this.$2.paused&&d!=null&&d+1e4<Date.now()){this.$5=!0;var e={};Object.keys(this.$6).forEach(function(a){e[a]=String(c.$6[a])});this.$1.getOperationLogger("playhead_adjustment").setError("not_advancing").setResult("failed").setLength(Date.now()-d).setUserInfo(babelHelpers["extends"]({},e,b,{lastCurrentTime:String(this.$3),lastCurrentTimeChanged:String(d-Date.now()),vidSeeking:String(this.$2.seeking),vidErrCode:this.$2.error?String(this.$2.error.code):null})).setInitiator(a).log()}};return a}();a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var e;e=a.call(this)||this;e.$OzPlayheadManager$p_2=new(c("oz-player/shims/OzSubscriptionsHandler"))();e.$OzPlayheadManager$p_3=new(c("oz-player/shims/OzSubscriptionsHandler"))();e.$OzPlayheadManager$p_4=new Set();e.$OzPlayheadManager$p_10=new Set();e.$OzPlayheadManager$p_12=function(a){e.$OzPlayheadManager$p_1.currentTime=a};e.$OzPlayheadManager$p_14=!1;e.$OzPlayheadManager$p_15=!1;e.$OzPlayheadManager$p_16=!0;e.$OzPlayheadManager$p_17=!1;e.$OzPlayheadManager$p_23=function(a,b){b===void 0&&(b=null);if(e.$OzPlayheadManager$p_20!=null?!e.$OzPlayheadManager$p_20.shouldEnableManifestTimeRangeCatchup():!1)return;var c=e.$OzPlayheadManager$p_9;if(c&&c.isEnabled(e.$OzPlayheadManager$p_1,e.$OzPlayheadManager$p_8)){c=c.computeNewPlayheadPosition(e.$OzPlayheadManager$p_1,e.$OzPlayheadManager$p_8);if(typeof c==="number"){e.$OzPlayheadManager$p_27(c,"live_catch_up_strategy",a,b);return}}c=e.$OzPlayheadManager$p_6.getNumber("auto_seek_playhead_slack");if(c===0)return;var f=e.$OzPlayheadManager$p_5;if(!f)return;var g=e.$OzPlayheadManager$p_7.getCurrentTime(),h=f.getTimeRanges().map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}}),i=d("oz-player/utils/OzNumericalRangeUtil").findNextRangeIndex(g,h);if((d("oz-player/utils/OzTimelineGapUtil").isNearGap(g,f.getTimeRanges(),e.$OzPlayheadManager$p_6)||d("oz-player/utils/OzTimelineGapUtil").isInGap(g,f.getTimeRanges(),e.$OzPlayheadManager$p_6))&&i!==-1){g=h[i];e.$OzPlayheadManager$p_27(g.rangeStart+c,"jump_over_timeline_gap",a,b)}};var f=b.video,g=b.mpd,j=b.playheadCatchup,k=b.playbackState,l=b.config,m=b.perfLoggerProvider,n=b.seekHandler,o=b.initialPlaybackPosition,p=b.canSupportSkipVideobufferGaps,q=b.liveLatencyManager;b=b.dynamicVideoLibrary;e.$OzPlayheadManager$p_1=f;e.$OzPlayheadManager$p_6=l;e.$OzPlayheadManager$p_7=k;e.$OzPlayheadManager$p_8=g;e.$OzPlayheadManager$p_9=j;e.$OzPlayheadManager$p_11=m;n&&(e.$OzPlayheadManager$p_12=n);e.$OzPlayheadManager$p_17=p;e.$OzPlayheadManager$p_20=q;e.$OzPlayheadManager$p_13=o;e.$OzPlayheadManager$p_21=b;e.$OzPlayheadManager$p_18=new i({video:f,perfLoggerProvider:m});e.$OzPlayheadManager$p_19=new h({video:f,perfLoggerProvider:m,config:l});e.$OzPlayheadManager$p_2.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(e.$OzPlayheadManager$p_1,"durationchange",function(){e.setPlaybackPositionOnFirstDurationChange("durationchange",e.$OzPlayheadManager$p_1.duration),e.$OzPlayheadManager$p_23("durationchange"),e.$OzPlayheadManager$p_24("durationchange")}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(e.$OzPlayheadManager$p_1,"pause",function(){e.$OzPlayheadManager$p_23("pause")}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(e.$OzPlayheadManager$p_1,"play",function(){e.$OzPlayheadManager$p_23("play")}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(e.$OzPlayheadManager$p_1,"playing",function(){e.$OzPlayheadManager$p_23("playing")}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(e.$OzPlayheadManager$p_1,"waiting",function(){e.$OzPlayheadManager$p_23.bind(babelHelpers.assertThisInitialized(e),"waiting"),e.$OzPlayheadManager$p_24("waiting")}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(e.$OzPlayheadManager$p_1,"timeupdate",c("oz-player/shims/ozThrottle")(function(){e.$OzPlayheadManager$p_23("timeupdate"),e.$OzPlayheadManager$p_6.getBool("playhead_manager_buffered_timerange_update_on_timeupdate")&&e.$OzPlayheadManager$p_24("timeupdate")},e.$OzPlayheadManager$p_6.getNumber("playhead_manager_timeupdate_throttle_ms"))),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(e.$OzPlayheadManager$p_1,"seeking",function(){e.$OzPlayheadManager$p_22=Date.now()}));return e}var e=b.prototype;e.$OzPlayheadManager$p_25=function(){return this.$OzPlayheadManager$p_1.playbackRate===0};e.observeSourceBufferState=function(a,b){var d=this;this.$OzPlayheadManager$p_4.has(a)&&c("oz-player/shims/ozvariant")(0,4179);this.$OzPlayheadManager$p_4.add(a);this.$OzPlayheadManager$p_2.addSubscriptions(a.addEventListener("buffer_updated",function(){d.$OzPlayheadManager$p_26(a,b),d.$OzPlayheadManager$p_6.getBool("skip_videobuffer_gaps_on_buffer_updated")&&d.$OzPlayheadManager$p_17&&d.$OzPlayheadManager$p_24("buffer_updated")}))};e.$OzPlayheadManager$p_26=function(a,b){var c=[];this.$OzPlayheadManager$p_4.forEach(function(a){a=a.getBufferedRanges();a.length&&c.push(a[0])});c.length>0&&this.$OzPlayheadManager$p_10.add(a);a=this.$OzPlayheadManager$p_1.currentTime;a=d("oz-player/strategies/LiveheadSeekaheadStrategy").computeSeekAhead(a,c);var e=this.$OzPlayheadManager$p_6.getNumber("timeline_offset_threshold");a>0&&(e===0||a<e)&&this.$OzPlayheadManager$p_27(this.$OzPlayheadManager$p_1.currentTime+a,"first_available_buffer","source_buffer",b)};e.setTimeRangeProvider=function(a){var b=this;this.$OzPlayheadManager$p_3.release();this.$OzPlayheadManager$p_3.engage();this.$OzPlayheadManager$p_3.addSubscriptions(a.addUpdateListener(function(){b.$OzPlayheadManager$p_23("time_range_updated")}));this.$OzPlayheadManager$p_5=a;this.$OzPlayheadManager$p_23("time_range_set")};e.resetCurrentTime=function(){this.$OzPlayheadManager$p_15=!1,this.setPlaybackPositionOnFirstDurationChange("reset",this.$OzPlayheadManager$p_1.duration)};e.setPlaybackPositionOnFirstDurationChange=function(a,b){if(this.$OzPlayheadManager$p_13!==0&&!this.$OzPlayheadManager$p_15&&!isNaN(b)&&b!==Infinity){b=this.$OzPlayheadManager$p_13>0?this.$OzPlayheadManager$p_13:b+this.$OzPlayheadManager$p_13;if(this.$OzPlayheadManager$p_20!=null){var c;b=(c=this.$OzPlayheadManager$p_20)==null?void 0:c.getInitialPlayHeadPosition()}this.$OzPlayheadManager$p_15=!0;if(this.$OzPlayheadManager$p_6.getBool("playhead_manager_clamp_initial_playback_position")){c=(c=this.$OzPlayheadManager$p_5)==null?void 0:c.getTimeRanges();c!=null&&c.length>0&&c[0].startTime>b&&(b=c[0].startTime)}this.$OzPlayheadManager$p_27(b,"initial_playback_position",a);this.emit("initialPlaybackPositionSet",b)}};e.$OzPlayheadManager$p_24=function(a){var b,c,e=this;if(!this.$OzPlayheadManager$p_6.getBool("skip_videobuffer_gaps"))return;if(!this.$OzPlayheadManager$p_17)return;var f=this.$OzPlayheadManager$p_6.getNumber("playhead_manager_buffered_auto_seek_playhead_slack");if(f===0)return;var g=this.$OzPlayheadManager$p_7.getCurrentTime(),h=[];for(var i=0;i<this.$OzPlayheadManager$p_1.buffered.length;i++)h.push({startTime:this.$OzPlayheadManager$p_1.buffered.start(i),endTime:this.$OzPlayheadManager$p_1.buffered.end(i)});i=h.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}});this.$OzPlayheadManager$p_19&&this.$OzPlayheadManager$p_19.markState(a,this.$OzPlayheadManager$p_7);var j=d("oz-player/utils/OzNumericalRangeUtil").findNextRangeIndex(g,i),k=d("oz-player/utils/OzNumericalRangeUtil").findCurrentRangeIndex(this.$OzPlayheadManager$p_6,g,i),l=this.$OzPlayheadManager$p_16?0:this.$OzPlayheadManager$p_6.getNumber("skip_videobuffer_gaps_max_gap_size_sec"),m=this.$OzPlayheadManager$p_6.getNumber("playhead_manager_buffered_is_near_gap_threshold"),n=this.$OzPlayheadManager$p_6.getNumber("playhead_manager_buffered_numerical_error");b=(b=this.$OzPlayheadManager$p_21)==null?void 0:b.getLastSegmentStartPTS();var o=b!=null?b/1e3:null,p=(c=this.$OzPlayheadManager$p_21)==null?void 0:c.getLast200RequestedUrlDecisionMinTime();c=o!=null?d("oz-player/utils/OzNumericalRangeUtil").findCurrentRangeIndex(this.$OzPlayheadManager$p_6,o,i):-1;var q=c>=0?i[c]:null,r=function(b){var c=e.$OzPlayheadManager$p_22==null||p==null||e.$OzPlayheadManager$p_22<p;!c&&b!=null&&e.$OzPlayheadManager$p_11.getOperationLogger("playhead_adjustment").setError("ignore_before_seek_main_"+b).setResult("failed").setInitiator(a).setUserInfo({last200RequestedUrlDecisionMinTime:String(p),lastSeekTime:String(e.$OzPlayheadManager$p_22)}).log();return c};if(o!=null&&this.$OzPlayheadManager$p_25()&&this.$OzPlayheadManager$p_16==!1&&r("buf")){if(o<g&&q!=null&&q.rangeStart<=o&&q.rangeEnd!=null&&q.rangeEnd>o){this.$OzPlayheadManager$p_27(o,"reverse_jump_over_buffer_gap",a,null,{lastSegmentStartPTS:String(b),last200RequestedUrlDecisionMinTime:String(p),lastSeekTime:String(this.$OzPlayheadManager$p_22)});return}if(q!=null&&c!=k){this.$OzPlayheadManager$p_27(q.rangeStart,"jump_over_buffer_gap_last_dl_range",a,null,{lastSegmentStartPTS:String(b),last200RequestedUrlDecisionMinTime:String(p),lastSeekTime:String(this.$OzPlayheadManager$p_22)});return}}if((d("oz-player/utils/OzTimelineGapUtil").isNearGap(g,h,this.$OzPlayheadManager$p_6,n,m)||d("oz-player/utils/OzTimelineGapUtil").isInGap(g,h,this.$OzPlayheadManager$p_6,n))&&j!==-1&&(l===0||i[j].rangeStart-g<l)&&(this.$OzPlayheadManager$p_16==!0||r("main"))){o=i[j];this.$OzPlayheadManager$p_6.getBool("enable_alternative_audio_tracks")&&this.$OzPlayheadManager$p_8.isStaticMpd()&&o.rangeStart!==0&&o.rangeEnd===this.$OzPlayheadManager$p_7.getDuration()?this.$OzPlayheadManager$p_27(0,"do_not_jump_over_buffer_gap",a,null,{lastSegmentStartPTS:String(b),last200RequestedUrlDecisionMinTime:String(p),lastSeekTime:String(this.$OzPlayheadManager$p_22)}):this.$OzPlayheadManager$p_27(o.rangeStart+f,"jump_over_buffer_gap",a,null,{lastSegmentStartPTS:String(b),last200RequestedUrlDecisionMinTime:String(p),lastSeekTime:String(this.$OzPlayheadManager$p_22)});return}this.$OzPlayheadManager$p_18&&this.$OzPlayheadManager$p_18.markState(a,{nextBufferedRangeIndex:String(j),limitMaxGapSize:String(l),rangeStart:j!==-1?String(i[j].rangeStart):null,isNearGapThreshold:String(m),numericalError:String(n)})};e.setEnableLiveheadCatchup=function(a){this.$OzPlayheadManager$p_16=a};e.destroy=function(){this.$OzPlayheadManager$p_2.release(),this.$OzPlayheadManager$p_3.release(),this.$OzPlayheadManager$p_4.clear()};e.$OzPlayheadManager$p_27=function(a,b,c,d,e){var f=a-this.$OzPlayheadManager$p_1.currentTime,g=this.$OzPlayheadManager$p_6.getNumber("seek_ahead_epsilon");if(g>0&&Math.abs(f)<=g)return;this.$OzPlayheadManager$p_11.getOperationLogger("playhead_adjustment").setLength(Math.round(a*1e3)).setReason(b).setInitiator(c).setType(d).setUserInfo(babelHelpers["extends"]({},e,{seekAdjustment:String(Math.round(f*1e3))})).log();this.$OzPlayheadManager$p_12(a);b==="initial_playback_position"&&(this.$OzPlayheadManager$p_14=!0)};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/shims/www/OzUuidWWW",["uuidv4"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("uuidv4")}),98);
__d("oz-player/shims/OzUuid",["oz-player/shims/www/OzUuidWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/OzUuidWWW")}),98);
__d("oz-player/states/OzObservedPlaybackState",["oz-player/loggings/OzMultiDestinationPerfLogger","oz-player/shims/OzDOMEventListener","oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,e){var f=this;e===void 0&&(e=new(d("oz-player/loggings/OzMultiDestinationPerfLogger").OzMultiDestinationPerfLoggerProvider)([]));this.$2=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$4=function(){f.$3.getOperationLogger("pause").setState("paused").log()};this.$5=function(){f.$3.getOperationLogger("playing").setState("playing").log()};this.$1=b;this.$3=e;this.$2.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"pause",this.$4),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"playing",this.$5))}var b=a.prototype;b.isPlaying=function(){return!this.$1.paused};b.getCurrentTime=function(){return this.$1.currentTime};b.getCurrentTimeUpdateTime=function(){return Date.now()};b.getDuration=function(){return this.$1.duration};b.addEventListener=function(a,b){return c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,a,b)};b.destroy=function(){this.$2.release()};return a}();g["default"]=a}),98);
__d("oz-player/utils/OzPositionToViewportUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c){b=b.filter(function(a){a=a.position;if(a==null)return!1;var b=a.y-window.scrollY;return b>=0||(a.height+b)/a.height>c}).sort(function(a,b){return a.position==null||b.position==null?0:a.position.y-b.position.y});return b.findIndex(function(b){return b.video===a})}function b(a){return a.isIntersecting!=null?a.isIntersecting:a.intersectionRatio>0||a.intersectionRect&&(a.intersectionRect.height>0||a.intersectionRect.width>0)}f.determinePositionIndexOfVideoFromViewportVertically=a;f.intersectionObserverEntryIsIntersecting=b}),66);
__d("oz-player/states/OzPositionToViewportTracker",["oz-player/shims/OzEventEmitter","oz-player/utils/OzPositionToViewportUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=null,i=.5;a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this)||this;c.$OzPositionToViewportTracker$p_1=[];c.$OzPositionToViewportTracker$p_5=function(a){a.forEach(function(a){var b=c.$OzPositionToViewportTracker$p_1.find(function(b){return a.target===b.video});b!=null&&(d("oz-player/utils/OzPositionToViewportUtils").intersectionObserverEntryIsIntersecting(a)?b.position=c.$OzPositionToViewportTracker$p_7(a):c.$OzPositionToViewportTracker$p_1.map(function(b){a.target===b.video&&(b.position=null)}));c.$OzPositionToViewportTracker$p_1.forEach(function(a){a.positionIndexToViewportVertically=c.$OzPositionToViewportTracker$p_6(a.video)})}),c.emit("state_changed")};c.$OzPositionToViewportTracker$p_2=b;return c}var c=b.prototype;c.$OzPositionToViewportTracker$p_4=function(){if(this.$OzPositionToViewportTracker$p_3!=null)return;this.$OzPositionToViewportTracker$p_3=new IntersectionObserver(this.$OzPositionToViewportTracker$p_5,{rootMargin:this.$OzPositionToViewportTracker$p_2.getNumber("pixels_above_viewport_to_observe")+"px 0px "+this.$OzPositionToViewportTracker$p_2.getNumber("pixels_below_viewport_to_observe")+"px 0px",threshold:0})};c.registerVideo=function(a){this.$OzPositionToViewportTracker$p_1.push({video:a,position:null,positionIndexToViewportVertically:-1}),this.$OzPositionToViewportTracker$p_4(),this.$OzPositionToViewportTracker$p_3!=null&&this.$OzPositionToViewportTracker$p_3.observe(a)};c.getPositionIndexOfVideoFromViewportVertically=function(a){var b=this.$OzPositionToViewportTracker$p_1.find(function(b){return b.video===a});return b!=null?b.positionIndexToViewportVertically:-1};c.$OzPositionToViewportTracker$p_6=function(a){return d("oz-player/utils/OzPositionToViewportUtils").determinePositionIndexOfVideoFromViewportVertically(a,this.$OzPositionToViewportTracker$p_1,i)};c.$OzPositionToViewportTracker$p_7=function(a){a=a.boundingClientRect;return{x:a.x+window.scrollX,y:a.y+window.scrollY,width:a.width,height:a.height}};b.getInstance=function(a){h==null&&(h=new b(a));return h};c.unregisterVideo=function(a){var b=this,c=[];this.$OzPositionToViewportTracker$p_1.forEach(function(d){d.video===a&&b.$OzPositionToViewportTracker$p_3!=null?b.$OzPositionToViewportTracker$p_3.unobserve(a):c.push(d)});this.$OzPositionToViewportTracker$p_1=c;this.$OzPositionToViewportTracker$p_1.length===0&&this.$OzPositionToViewportTracker$p_3!=null&&(this.$OzPositionToViewportTracker$p_3.disconnect(),this.$OzPositionToViewportTracker$p_3=null)};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/states/OzPositionToViewport",["oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler","oz-player/states/OzPositionToViewportTracker"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,d){var e;e=a.call(this)||this;e.$OzPositionToViewport$p_1=new(c("oz-player/shims/OzSubscriptionsHandler"))();e.$OzPositionToViewport$p_3=b;e.$OzPositionToViewport$p_2=c("oz-player/states/OzPositionToViewportTracker").getInstance(d);e.$OzPositionToViewport$p_2.registerVideo(b);e.$OzPositionToViewport$p_1.addSubscriptions(e.$OzPositionToViewport$p_2.addListener("state_changed",function(){e.emit("state_changed")}));return e}var d=b.prototype;d.getPositionIndexOfVideoFromViewportVertically=function(){return this.$OzPositionToViewport$p_3!=null?this.$OzPositionToViewport$p_2.getPositionIndexOfVideoFromViewportVertically(this.$OzPositionToViewport$p_3):-1};d.destroy=function(){this.$OzPositionToViewport$p_3!=null&&this.$OzPositionToViewport$p_2.unregisterVideo(this.$OzPositionToViewport$p_3),this.$OzPositionToViewport$p_3=null};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/strategies/OzPlaybackConfidenceUtils",[],(function(a,b,c,d,e,f){"use strict";var g=.8;function a(a,b,c,d,e,f){f=Math.min(1,c/d);c=1+(1-f)*e;d=a.getBandwidth()*c;return d>b?g*(b/d):1-(1-g)*d/b}f.getPlaybackConfidence=a}),66);
__d("oz-player/strategies/OzAbrManager",["oz-player/networks/OzBandwidthEstimator","oz-player/strategies/OzPlaybackConfidenceUtils","oz-player/utils/OzAbrUtils","oz-player/utils/OzBufferingUtils","oz-player/utils/OzPlaybackRestrictionsUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,c,d,e,f,g,h,i){this.$2=0,this.$3=Date.now(),this.$4=!1,this.$10=null,this.$1=a,this.$5=b,this.$6=this.$15(b,c),this.$7=d,this.$8=e,this.$11=f,this.$12=g,this.$13=h,this.$14=i,this.$1.getBool("enable_abr_logging")&&this.$14.getOperationLogger("abr_initialized").setResult("success").setUserInfo({newRepresentationIds:c.map(function(a){return a.getID()}).join(","),newCodecs:c.map(function(a){return a.getCodecs()}).join("|"),newDisplayLabels:c.map(function(a){return a.getDisplayLabel()}).join(",")}).setRepresentationID(b.getID()).setType("video").setInitiator("OzAbrManager").log()}var b=a.prototype;b.setSourceBuffer=function(a){this.$9=a};b.$15=function(a,b){var c=this.$1.getNumber("abr_restrict_from_index"),d=this.$1.getNumber("abr_restrict_to_index");if(d===0&&c===0)return b;var e=b.findIndex(function(b){return a.getID()===b.getID()});return e===-1?b:b.filter(function(a,b){return b-e>=c&&b-e<=d})};b.$16=function(a){a=d("oz-player/utils/OzAbrUtils").excludeLargeRepresentations(a,this.$12(),this.$11,{resolutionConstraintFactor:this.$1.getNumber("resolution_constraint_factor")});a=d("oz-player/utils/OzPlaybackRestrictionsUtils").applyVideoPlaybackRestrictions(this.$7,this.$12(),a);return a};b.getBestRepresentation=function(a){var b;a=(a=a==null?void 0:a.length)!=null?a:null;b=(b=(b=this.$9)==null?void 0:b.getSourceBufferState().getBufferedRanges())!=null?b:null;var e=this.$8.getCurrentTime();e=d("oz-player/utils/OzBufferingUtils").getBufferAheadFromCurrentTime(e,b);b=d("oz-player/utils/OzAbrUtils").getReasonToPreventEvaluation(this.$1,this.$4,e,c("oz-player/networks/OzBandwidthEstimator").getSampleCount(),this.$2,this.$3);if(b!=null){this.$10=b;this.$1.getBool("enable_abr_logging")&&this.$14.getOperationLogger("abr_best_representation_selected").setResult("failed").setReason(this.$10).setType("video").setInitiator("OzAbrManager").log();return this.$5}b=Date.now();this.$2=b;var f=c("oz-player/networks/OzBandwidthEstimator").getAdjustedBandwidth(this.$1.getLegacyConfig()),g=this.$16(this.$6);f=this.$17(g,f,e,a);a=g[0];f=f||a;if(this.$18(e,f)){this.$10="high_buffer";this.$1.getBool("enable_abr_logging")&&this.$14.getOperationLogger("abr_best_representation_selected").setResult("failed").setUserInfo({filteredRepresentationIds:g.map(function(a){return a.getID()}).join(",")}).setPreviousRepresentationID(this.$5.getID()).setReason(this.$10).setType("video").setInitiator("OzAbrManager").log();return this.$5}a=this.$5;a!==f&&(this.$4=!0,this.$3=b,this.$5=f);this.$10="bandwidth";this.$1.getBool("enable_abr_logging")&&this.$14.getOperationLogger("abr_best_representation_selected").setResult("success").setUserInfo({filteredRepresentationIds:g.map(function(a){return a.getID()}).join(",")}).setRepresentationID(f.getID()).setPreviousRepresentationID(a==null?void 0:a.getID()).setReason(this.$10).setType("video").setInitiator("OzAbrManager").log();return f};b.$17=function(a,b,c,e){e===void 0&&(e=null);var f=null;for(var g=0;g<a.length;g++){var h=d("oz-player/strategies/OzPlaybackConfidenceUtils").getPlaybackConfidence(a[g],b,c,this.$1.getNumber("low_buffer_bandwidth_target_threshold"),this.$1.getNumber("low_buffer_bandwidth_target_increase_factor"),e);h>this.$1.getNumber("abr_confidence_threshold")&&(!f||f.getBandwidth()<a[g].getBandwidth())&&(f=a[g])}return f};b.$18=function(a,b){var c=this.$1.getNumber("abr_prevent_down_switch_buffer_threshold");return c>0&&a>=c&&this.$5.getBandwidth()>b.getBandwidth()?!0:!1};b.getLastEvaluationReason=function(){return this.$10};b.updateRepresentations=function(a){var b=this,c=this.$6;this.$6=a;var d=this.$6.find(function(a){return a.getDisplayLabel()===b.$5.getDisplayLabel()}),e=this.$5;this.$5=(d=d)!=null?d:this.$6[0];this.$1.getBool("enable_abr_logging")&&this.$14.getOperationLogger("abr_representations_updated").setResult("success").setUserInfo({previousRepresentationIds:c.map(function(a){return a.getID()}).join(","),newRepresentationIds:a.map(function(a){return a.getID()}).join(","),newCodecs:a.map(function(a){return a.getCodecs()}).join("|"),newDisplayLabels:a.map(function(a){return a.getDisplayLabel()}).join(",")}).setRepresentationID(this.$5.getID()).setPreviousRepresentationID(e==null?void 0:e.getID()).setReason(this.$10).setType("video").setInitiator("OzAbrManager").log()};return a}();g["default"]=a}),98);
__d("oz-player/strategies/getSegmentsCount",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c,d){var e=0,f=a.getTimeRange().startTime;a=a;var g=a.getTimeRange().startTime;while(a!==null&&g<c+f){var h=g;e++;a=b.getSegmentAfter(a);if(a)g=a.getTimeRange().startTime;else break;if(g<=h)return d}return Math.max(e,1)}f["default"]=a}),66);
__d("oz-player/strategies/OzStaticStreamSegmentsStrategy",["oz-player/strategies/getSegmentsCount"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$1=a}var b=a.prototype;b.isActive=function(){return!0};b.getSegmentsCount=function(a,b,d){a=this.$1.getNumber("seconds_to_stream");var e=this.$1.getNumber("segments_to_stream");a>0&&(e=c("oz-player/strategies/getSegmentsCount")(b,d,a,e));return e};return a}();g["default"]=a}),98);
__d("oz-player/strategies/OzBandwidthBoundaryStreamSegmentsCountStrategy",["oz-player/networks/OzBandwidthEstimator","oz-player/strategies/OzStaticStreamSegmentsStrategy","oz-player/strategies/getSegmentsCount"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){this.$1=a,this.$2=b,this.$3=new(c("oz-player/strategies/OzStaticStreamSegmentsStrategy"))(a)}var b=a.prototype;b.isActive=function(a){return!0};b.getSegmentsCount=function(a,b,d){var e=c("oz-player/networks/OzBandwidthEstimator").getBandwidth(this.$1.getLegacyConfig()),f=c("oz-player/networks/OzBandwidthEstimator").getStandardDeviationOfBandwidth(),g=this.$1.getNumber("bandwidth_boundary_standard_deviation_factor"),h=this.$2.some(function(a){a=a.getBandwidth();return Math.abs(a-e)<f*g});h=h?this.$4(a,b,d):this.$3.getSegmentsCount(a,b,d);a=this.$5(b,e);return Math.min(h,a)};b.$4=function(a,b,d){a=this.$1.getNumber("seconds_to_stream_near_bandwidth_boundary");var e=this.$1.getNumber("segments_to_stream_near_bandwidth_boundary");a>0&&(e=c("oz-player/strategies/getSegmentsCount")(b,d,a,e));return e};b.$5=function(a,b){var c=Infinity;a=a.getByteRange();if(a){var d=a.endByte;if(d!=null){var e=this.$1.getNumber("per_stream_duration_target");d=d-a.startByte;e>1e-5&&d!==0&&(c=Math.ceil(e*b/(d*8)))}}return c};return a}();g["default"]=a}),98);
__d("oz-player/strategies/OzBlockedRepresentationsManager",["oz-player/shims/OzEventEmitter","oz-player/shims/ozClearTimeout","oz-player/shims/ozSetTimeoutAcrossTransitions","oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$2=new Map(),this.$3=new Set(),this.$4=new Set(),this.$5=new(c("oz-player/shims/OzEventEmitter"))(),this.$6(a),this.$7(a)}var b=a.prototype;b.isBlocked=function(a){return this.$3.has(a)};b.handleError=function(a,b){if(this.$1!=null&&this.$3.size===this.$1-1)return!1;if(d("oz-player/utils/OzErrorUtils").isOzError(b)&&b.getType()==="OZ_NETWORK"){b=Number(b.getExtra().code);if(!isNaN(b)&&this.$2.has(b)){this.$3.has(a)||this.$8(a,b);return!0}}return!1};b.$8=function(a,b){var d,e=this;this.$3.add(a);(d=this.$5)==null?void 0:d.emit("representation_blocked",a);d=this.$2.get(b)||0;if(d>0){var f=c("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){e.$3["delete"](a),e.$4["delete"](f)},d);this.$4.add(f)}};b.applyRestriction=function(a){var b=this;return a.filter(function(a){return!b.$3.has(a.getID())})};b.onRepresentationBlocked=function(a){return this.$5?this.$5.addListener("representation_blocked",a):{remove:function(){}}};b.setAvailableRepresentationsCount=function(a){this.$1=a};b.destroy=function(){var a;(a=this.$5)==null?void 0:a.removeAllListeners();this.$5=null;for(var a=this.$4,b=Array.isArray(a),d=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(b){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;c("oz-player/shims/ozClearTimeout")(e)}this.$4.clear()};b.$6=function(a){var b=this;try{a=JSON.parse(a.getString("block_representation_status_codes_json"));Array.isArray(a)&&a.forEach(function(a){a=parseInt(a,10);isNaN(a)||b.$2.set(a,-1)})}catch(a){}};b.$7=function(a){var b=this;try{a=JSON.parse(a.getString("block_representation_status_codes_temporarily_json"));Object.entries(a).forEach(function(a){var c=a[0];a=a[1];c=parseInt(c,10);a=parseInt(a,10);!isNaN(c)&&!isNaN(a)&&b.$2.set(c,a)})}catch(a){}};return a}();g["default"]=a}),98);
__d("oz-player/strategies/OzBufferAheadPriorityStrategy",["oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozThrottle","oz-player/utils/OzBufferingUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=6,i=1e3;a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,d){var e;e=a.call(this)||this;e.$OzBufferAheadPriorityStrategy$p_3=new(c("oz-player/shims/OzSubscriptionsHandler"))();e.$OzBufferAheadPriorityStrategy$p_5=function(){e.emit("state_changed")};e.$OzBufferAheadPriorityStrategy$p_4=b;e.$OzBufferAheadPriorityStrategy$p_1=d;e.$OzBufferAheadPriorityStrategy$p_3.addSubscriptions(e.$OzBufferAheadPriorityStrategy$p_1.addEventListener("progress",c("oz-player/shims/ozThrottle")(e.$OzBufferAheadPriorityStrategy$p_5,i)),e.$OzBufferAheadPriorityStrategy$p_1.addEventListener("timeupdate",c("oz-player/shims/ozThrottle")(e.$OzBufferAheadPriorityStrategy$p_5,i)));return e}var e=b.prototype;e.getName=function(){return"buffer_ahead"};e.setSourceBufferState=function(a){if(this.$OzBufferAheadPriorityStrategy$p_2)return;this.$OzBufferAheadPriorityStrategy$p_2=a;this.$OzBufferAheadPriorityStrategy$p_3.addSubscriptions(a.addEventListener("buffer_updated",c("oz-player/shims/ozThrottle")(this.$OzBufferAheadPriorityStrategy$p_5,i)))};e.isActive=function(){return!0};e.getPriority=function(){var a=this.$OzBufferAheadPriorityStrategy$p_2;if(!a)return 1;var b=this.$OzBufferAheadPriorityStrategy$p_1.getCurrentTime();a=a.getBufferedRanges();b=d("oz-player/utils/OzBufferingUtils").getBufferAheadFromCurrentTime(b,a);return b>=h?0:1};e.destroy=function(){this.$OzBufferAheadPriorityStrategy$p_3.release()};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/strategies/OzBufferAheadTargetStrategy",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a}var b=a.prototype;b.isActive=function(){return!0};b.getBufferTarget=function(){return this.$1.getNumber("buffer_ahead_target")};return a}();f["default"]=a}),66);
__d("oz-player/strategies/OzBufferEndLimitStrategy",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.isActive=function(){return!0};b.getBufferTarget=function(){var a=this.$3();return this.$2>=a?this.$2-a:0};b.$3=function(){return this.$1.buffered.length===0?0:this.$1.buffered.end(0)};return a}();f["default"]=a}),66);
__d("oz-player/strategies/OzBufferTargetBoundedStreamSegmentsCountStrategy",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.isActive=function(a){return!a.isPlaying()};b.getSegmentsCount=function(a,b,c){a=a.getCurrentTime();var d=this.$1.computeBufferTarget(),e=1,f=b;b=b.getTimeRange().startTime;while(f!==null&&b<d+a){f=c.getSegmentAfter(f);if(!f)break;b=f.getTimeRange().startTime;e++}return e};return a}();f["default"]=a}),66);
__d("oz-player/strategies/OzBufferTargetCalculator",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$1=0,this.$2=a,this.$3=b}var b=a.prototype;b.computeBufferTarget=function(){var a=this.$1;for(var b=this.$2,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;if(e.isActive()){a=e.getBufferTarget();break}}for(e=this.$3,d=Array.isArray(e),c=0,e=d?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(d){if(c>=e.length)break;b=e[c++]}else{c=e.next();if(c.done)break;b=c.value}b=b;a=b.adjustBufferTargetInSeconds(a)}this.$1=a;return a};b.handleEvent=function(a){for(var b=this.$3,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;e.handleEvent(a)}};return a}();f["default"]=a}),66);
__d("oz-player/strategies/OzBufferTargetCalculatorQuotaExceededConstraint",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){var b=a.config;a=a.minimumBufferTargetSec;this.$2=1;this.$1=b;this.$3=a}var b=a.prototype;b.adjustBufferTargetInSeconds=function(a){var b;return Math.max((b=this.$3)!=null?b:this.$1.getNumber("buffer_target_constraint_minimum_sec"),a*this.$2)};b.handleEvent=function(a){var b=this.$2;switch(a){case"append_succeeded":b=Math.max(0,Math.min(1,b+this.$1.getNumber("buffer_target_constraint_append_succeeded_reward")));break;case"append_quota_exceeded":b=Math.max(0,Math.min(1,b-this.$1.getNumber("buffer_target_constraint_quota_exceeded_penalty")));break;default:a}this.$2=b};return a}();f["default"]=a}),66);
__d("oz-player/strategies/OzPausedStreamSegmentsCountStrategy",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.isActive=function(){return!this.$1.isPlaying()};b.getSegmentsCount=function(a,b,c){return this.$2.getNumber("paused_stream_segments_count")};return a}();f["default"]=a}),66);
__d("oz-player/strategies/OzPlayheadAtInterruptionDetector",["oz-player/shims/OzDOMEventListener","oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";var h=1;a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,d){var e;e=a.call(this)||this;e.$OzPlayheadAtInterruptionDetector$p_2=null;e.$OzPlayheadAtInterruptionDetector$p_3=new(c("oz-player/shims/OzSubscriptionsHandler"))();e.$OzPlayheadAtInterruptionDetector$p_4=null;e.$OzPlayheadAtInterruptionDetector$p_1=b;b=d?d.addListener("enterBuffering",function(){e.$OzPlayheadAtInterruptionDetector$p_5()}):c("oz-player/shims/OzDOMEventListener").listenDOMEvent(e.$OzPlayheadAtInterruptionDetector$p_1,"waiting",function(){e.$OzPlayheadAtInterruptionDetector$p_5()});e.$OzPlayheadAtInterruptionDetector$p_3.addSubscriptions(b);e.$OzPlayheadAtInterruptionDetector$p_4=d;return e}var d=b.prototype;d.notifyStreamInterrupted=function(a){this.$OzPlayheadAtInterruptionDetector$p_2=a,this.$OzPlayheadAtInterruptionDetector$p_5()};d.notifyStreamResumed=function(){this.$OzPlayheadAtInterruptionDetector$p_2=null};d.$OzPlayheadAtInterruptionDetector$p_5=function(){if(this.$OzPlayheadAtInterruptionDetector$p_2!=null){var a=this.$OzPlayheadAtInterruptionDetector$p_2||0;Math.abs(this.$OzPlayheadAtInterruptionDetector$p_1.currentTime-a)<h&&this.emit("playheadAtInterruption",a)}};d.destroy=function(){this.$OzPlayheadAtInterruptionDetector$p_3.release(),this.$OzPlayheadAtInterruptionDetector$p_4=null};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/strategies/OzPlayingStatePriorityStrategy",["oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var d;d=a.call(this)||this;d.$OzPlayingStatePriorityStrategy$p_1=new(c("oz-player/shims/OzSubscriptionsHandler"))();d.$OzPlayingStatePriorityStrategy$p_3=function(){d.emit("state_changed")};d.$OzPlayingStatePriorityStrategy$p_2=b;d.$OzPlayingStatePriorityStrategy$p_1.addSubscriptions(d.$OzPlayingStatePriorityStrategy$p_2.addEventListener("playing",d.$OzPlayingStatePriorityStrategy$p_3),d.$OzPlayingStatePriorityStrategy$p_2.addEventListener("play",d.$OzPlayingStatePriorityStrategy$p_3),d.$OzPlayingStatePriorityStrategy$p_2.addEventListener("pause",d.$OzPlayingStatePriorityStrategy$p_3));return d}var d=b.prototype;d.isActive=function(){return!0};d.getName=function(){return"playing_state"};d.setSourceBufferState=function(a){};d.getPriority=function(){return this.$OzPlayingStatePriorityStrategy$p_2.isPlaying()?1:0};d.destroy=function(){this.$OzPlayingStatePriorityStrategy$p_1.release()};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/strategies/OzPositionToViewportPriorityStrategy",["oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,d){var e;e=a.call(this)||this;e.$OzPositionToViewportPriorityStrategy$p_3=new(c("oz-player/shims/OzSubscriptionsHandler"))();e.$OzPositionToViewportPriorityStrategy$p_4=function(){e.emit("state_changed")};e.$OzPositionToViewportPriorityStrategy$p_2=b;e.$OzPositionToViewportPriorityStrategy$p_1=d;e.$OzPositionToViewportPriorityStrategy$p_3.addSubscriptions(b.addListener("state_changed",e.$OzPositionToViewportPriorityStrategy$p_4));return e}var d=b.prototype;d.isActive=function(){return!0};d.getName=function(){return"position_to_viewport"};d.setSourceBufferState=function(a){};d.getPriority=function(){var a=this.$OzPositionToViewportPriorityStrategy$p_1.getNumber("prioritize_by_viewport_static_penalty"),b=this.$OzPositionToViewportPriorityStrategy$p_2.getPositionIndexOfVideoFromViewportVertically();return a>0?b===-1?a*-1:0:b===-1?-Infinity:-1*b};d.destroy=function(){this.$OzPositionToViewportPriorityStrategy$p_3.release()};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/strategies/OzPriorityCalculator",["oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var d;d=a.call(this)||this;d.$OzPriorityCalculator$p_2=new(c("oz-player/shims/OzSubscriptionsHandler"))();d.$OzPriorityCalculator$p_1=b;(b=d.$OzPriorityCalculator$p_2).addSubscriptions.apply(b,d.$OzPriorityCalculator$p_1.map(function(a){return a.addListener("state_changed",function(){d.emit("state_changed",d.compute(),a.getName())})}));return d}var d=b.prototype;d.setSourceBufferState=function(a){this.$OzPriorityCalculator$p_1.forEach(function(b){return b.setSourceBufferState(a)}),this.emit("state_changed",this.compute(),"source_buffer")};d.compute=function(){var a=this.$OzPriorityCalculator$p_1.reduce(function(a,b){b=b.isActive()?b.getPriority():0;return a+b},0);return Math.max(a,0)};d.destroy=function(){this.$OzPriorityCalculator$p_2.release()};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/strategies/OzSingleCodecRestriction",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){}var b=a.prototype;b.applyRestriction=function(a){if(a.length<=0)return a.slice();var b=new Set(a.map(function(a){return g(a)})),c="av01",d=b.has(c)?c:b.values().next().value;return d==null?a.slice():a.filter(function(a){return g(a)===d})};return a}();function g(a){return a.getMimeCodecs().replace(/\..*$/,"")}f["default"]=a}),66);
__d("oz-player/strategies/OzStaleManifestBufferTargetStrategy",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$1=b,this.$2=a}var b=a.prototype;b.isActive=function(){return this.$2.getRefreshDate()==null&&this.$1.getNumber("stale_mpd_buffer_ahead_target")>0};b.getBufferTarget=function(){return this.$1.getNumber("stale_mpd_buffer_ahead_target")};return a}();f["default"]=a}),66);
__d("oz-player/strategies/OzStartupBufferTargetStrategy",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$1=a,this.$3=b}var b=a.prototype;b.isActive=function(){var a=this.$1.isPlaying();a&&(this.$2=!0);return!this.$2};b.getBufferTarget=function(){return this.$3.getNumber("pre_start_buffer_ahead_target")};return a}();f["default"]=a}),66);
__d("oz-player/strategies/OzStreamSegmentsCountCalculator",[],(function(a,b,c,d,e,f){"use strict";var g=1;a=function(){function a(a){this.$1=a}var b=a.prototype;b.computeMin=function(a,b,c){var d=Number.MAX_VALUE;for(var e=this.$1,f=Array.isArray(e),h=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(f){if(h>=e.length)break;i=e[h++]}else{h=e.next();if(h.done)break;i=h.value}i=i;i.isActive(a)&&(d=Math.min(d,i.getSegmentsCount(a,b,c)))}return d===Number.MAX_VALUE?g:Math.max(d,g)};return a}();f["default"]=a}),66);
__d("oz-player/strategies/OzSupportedMimeCodecsRestriction",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){}var b=a.prototype;b.applyRestriction=function(a){return a.filter(function(a){a=MediaSource.isTypeSupported(a.getMimeCodecs());return!!a})};return a}();f["default"]=a}),66);
__d("oz-player/streams/OzEndOfStreamWatcher",["oz-player/shims/OzEventEmitter","oz-player/shims/ozvariant"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){var d;d=a.call(this)||this;d.$OzEndOfStreamWatcher$p_1=new Map();d.$OzEndOfStreamWatcher$p_4=!1;d.$OzEndOfStreamWatcher$p_2=b;d.$OzEndOfStreamWatcher$p_3=c;return d}var d=b.prototype;d.registerMediaStream=function(a){this.$OzEndOfStreamWatcher$p_1.has(a)&&c("oz-player/shims/ozvariant")(0,5191),this.$OzEndOfStreamWatcher$p_1.set(a,!1)};d.notifyRepresentationSwitched=function(a){this.$OzEndOfStreamWatcher$p_1.has(a)||c("oz-player/shims/ozvariant")(0,5192),this.$OzEndOfStreamWatcher$p_1.get(a)===!0&&this.$OzEndOfStreamWatcher$p_1.set(a,!1),this.$OzEndOfStreamWatcher$p_5("end_of_stream_watcher","representation_switched")};d.notifyMediaStreamEnded=function(a,b){this.$OzEndOfStreamWatcher$p_1.has(a)||c("oz-player/shims/ozvariant")(0,5192),this.$OzEndOfStreamWatcher$p_1.set(a,!0),this.$OzEndOfStreamWatcher$p_5("end_of_stream_watcher","media_stream_ended:"+b)};d.$OzEndOfStreamWatcher$p_5=function(a,b){var c=this;if(this.$OzEndOfStreamWatcher$p_3.getBool("do_not_end_stream")){!this.$OzEndOfStreamWatcher$p_4&&this.$OzEndOfStreamWatcher$p_6()&&(this.$OzEndOfStreamWatcher$p_4=!0,this.emit("streamEnd"));return}var d=this.$OzEndOfStreamWatcher$p_2.getReadyState();d==="open"&&this.$OzEndOfStreamWatcher$p_6()&&this.$OzEndOfStreamWatcher$p_2.notifyEndOfStream(a,b).then(function(){c.emit("streamEnd")})["catch"](function(){c.emit("streamEnd")})};d.$OzEndOfStreamWatcher$p_6=function(){if(this.$OzEndOfStreamWatcher$p_1.size===0)return!1;for(var a=this.$OzEndOfStreamWatcher$p_1.values(),b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;if(!d)return!1}return!0};d.destroy=function(){this.$OzEndOfStreamWatcher$p_1.clear()};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/streams/OzHandleUserRepresentationSwitch",["oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozReportUnexpectedError","oz-player/utils/OzErrorEmitter"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d,e,f,g){var h=this;this.$2=new(c("oz-player/utils/OzErrorEmitter"))();this.$5=null;this.$6=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$1=a;this.$3=b;this.$4=d;this.$7=e;this.$8=g;f.then(function(a){h.$5=a},function(){})["catch"](function(a){c("oz-player/shims/ozReportUnexpectedError")(a,"OzHandleUserRepresentationSwitch SBM promise then - create")});this.$6.addSubscriptions(e.addListener("switchRepresentation",function(a,b){h.$9(a,b)}))}var b=a.prototype;b.destroy=function(){this.$6.release(),this.$6.engage()};b.onError=function(a){return this.$2.onError(a)};b.$9=function(a,b){if(a!=="user")return;a=this.$5;if(a==null)return;var d=this.$7.getRepresentationIDAtTime(this.$3.getCurrentTime()),e;for(var f=0;f<this.$4.length;f++)this.$4[f].getID()===d&&(e=this.$4[f]);if(e&&b&&(this.$8||e.getBandwidth()<b.getBandwidth())){d=e.getSegmentByTime(this.$3.getCurrentTime());d&&a.clearRangeWithWait([{fromTime:this.$3.getCurrentTime(),toTime:this.$3.getDuration()}])["catch"](function(a){c("oz-player/shims/ozReportUnexpectedError")(a,"OzHandleUserRepresentationSwitch clearRangeWithWait catch")})}};return a}();g["default"]=a}),98);
__d("oz-player/manifests/IOzSegment",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return((a==null?void 0:a.getSequenceNumber())||0)===((b==null?void 0:b.getSequenceNumber())||0)}function b(a,b){return((a==null?void 0:a.getSequenceNumber())||0)>=((b==null?void 0:b.getSequenceNumber())||0)}f.isSequenceNumberEqual=a;f.isSequenceNumberGreaterOrEqual=b}),66);
__d("oz-player/networks/OzReadableStreamDataReader",["oz-player/networks/OzTransformStream","oz-player/utils/ozConcatUint8Arrays"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){var d;c===void 0&&(c=null);d=a.call(this)||this;d.$OzReadableStreamDataReader$p_1=[];d.$OzReadableStreamDataReader$p_3=Infinity;d.$OzReadableStreamDataReader$p_4=0;d.$OzReadableStreamDataReader$p_2=b;if(c!=null){b=c.getNumber("stream_reader_max_buffer_len");d.$OzReadableStreamDataReader$p_3=b>0?b:Infinity}return d}var d=b.prototype;d.onDataWritten=function(a){if(this.$OzReadableStreamDataReader$p_4+a.byteLength>=this.$OzReadableStreamDataReader$p_3){var b=c("oz-player/utils/ozConcatUint8Arrays")(this.$OzReadableStreamDataReader$p_1);b=b.buffer;this.$OzReadableStreamDataReader$p_2(b);this.$OzReadableStreamDataReader$p_1.length=0;this.$OzReadableStreamDataReader$p_4=0}this.$OzReadableStreamDataReader$p_1.push(a);this.$OzReadableStreamDataReader$p_4+=a.byteLength};d.onClose=function(){var a=this.$OzReadableStreamDataReader$p_1,b=c("oz-player/utils/ozConcatUint8Arrays")(a);b=b.buffer;a.length=0;this.$OzReadableStreamDataReader$p_4=0;this.$OzReadableStreamDataReader$p_2(b)};return b}(c("oz-player/networks/OzTransformStream"));g["default"]=a}),98);
__d("oz-player/networks/OzStreamingTask",["oz-player/loggings/OzLoggingUtils","oz-player/shims/OzDeferred","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzPerformance","oz-player/utils/OzErrorUtils","oz-player/utils/OzNetworkRequestLoggingUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d){this.$3=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise")),this.$5=!1,this.$9=null,this.$1=this.$2=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise")),this.$6=c("oz-player/shims/OzPerformance").now(),this.$7=b,this.$8=a,this.$9=d}var b=a.prototype;b.run=function(){var a=this.$3.getPromise(),b=this.$7;if(b){var e=c("oz-player/shims/OzPerformance").now()-this.$6;d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(a,b,"streaming_task",function(){},function(a){a.setTimeToRequestSent(Math.floor(e))})}this.$2.resolve();return a};b.getPromise=function(){return this.$3.getPromise()};b.cancel=function(){this.$3.getPromise()["catch"](function(){}),this.$3.reject(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_STREAMING_TASK",description:"task cancelled",extra:{code:"OZ_ST-1"}})),this.$5=!0};b.finish=function(){this.$3.resolve()};b.isCancelled=function(){return this.$5};b.addStreamDeferred=function(a,b){var d=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise")),e=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));this.$10({createStreamResult:a,changeStatusDeferred:d,createStreamDeferred:e,loggerProviderWithStreamContext:b});b=function(){return e.getPromise()};return{genStream:b,cancel:function(){if(a){var b=a.pausableStream;return b.pauseStream()}},getStatusChangePromise:function(){return d.getPromise()}}};b.$10=function(a){var b=this,e=a.createStreamResult,f=a.changeStatusDeferred,g=a.createStreamDeferred,h=a.loggerProviderWithStreamContext,i=a.loggingPayloads;a=this.$1.getPromise();var j=c("oz-player/shims/OzPerformance").now(),k=this.$1=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));k.getPromise()["catch"](function(){});a.then(function(){if(e){var a=e.pausableStream;e.loggingPayloads&&(i=e.loggingPayloads);g.resolve(a.getStream());b.$4=a;var f=c("oz-player/shims/OzPerformance").now(),k=b.$11(a.startStream());if(h){var l=function(c){var e=i;if(e){d("oz-player/utils/OzNetworkRequestLoggingUtils").setFetchStreamLoggingAttributes(c,e.getRequestUrl(),e.segments,f-j,a.getBytesStreamed(),e.getResponse());var g=b.$9;g&&g(c,e.getRequestUrl(),e.getResponse())}};d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(k,h,"fetch_stream",l,l)}return k}return null}).then(function(a){b.$4=null,k.resolve(),f.resolve(a||"cancelled")})["catch"](function(a){b.$4=null,b.$3.reject(a),k.reject(a),f.reject(a)})};b.$11=function(a){return a.then(function(a){a=a.statusPromise;return a.then(function(a){return a==="stream_done"?"done":"error"})})};return a}();g["default"]=a}),98);
__d("oz-player/scheduling/OzRoundRobinPriorityTaskQueue",["oz-player/shims/ozReportUnexpectedError"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){b===void 0&&(b=-1),this.$3=function(){},this.$4=[],this.$5=new Map(),this.$1=a,this.$2=b}var b=a.prototype;b.getHighestPriority=function(){return Math.max.apply(Math,this.$4.map(function(a){return a.queue.length?a.priority:-Infinity}))};b.enqueue=function(a,b){var d=this;b=b;b=this.$6(b);var e=this.$5.get(a);if(e===b)return;this.$5.has(a)&&this.remove(a);e=this.$7(b);var f=this.$4[e];f&&f.priority===b||(f={priority:b,queue:[]},this.$4.splice(e,0,f));this.$5.set(a,b);f.queue.push(a);a.getPromise().then(function(){d.remove(a)},function(){d.remove(a)})["catch"](function(a){c("oz-player/shims/ozReportUnexpectedError")(a,"OzRoundRobinPriorityTaskQueue remove after task run")});this.$3(a,b>=this.$1?"immediate":"normal")};b.updatePriority=function(a,b){if(!this.$5.has(a))return;this.enqueue(a,b)};b.dequeue=function(){for(var a=0;a<this.$4.length;a++){var b=this.$4[a];if(b.queue.length){b=b.queue.shift();this.$5["delete"](b);return b}}return null};b.remove=function(a){var b=this.$5.get(a);if(b!==void 0){b=this.$7(b);b=this.$4[b];if(b&&b.queue){var c=b.queue.findIndex(function(b){return b===a});c>-1&&b.queue.splice(c,1)}this.$5["delete"](a)}};b.setOnTaskUpdated=function(a){this.$3=a};b.clearOnTaskUpdated=function(){this.setOnTaskUpdated(function(){})};b.getLength=function(){return this.$5.size};b.test_isEmpty=function(){return this.$5.size===0&&this.$4.every(function(a){return a.queue.length===0})};b.$7=function(a){a=a;a=this.$6(a);var b;for(b=0;b<this.$4.length;b++)if(a>=this.$4[b].priority)return b;return b};b.$6=function(a){a=a;this.$2>=0&&(a=Number.parseFloat(a.toFixed(this.$2)));return a};return a}();g["default"]=a}),98);
__d("oz-player/scheduling/OzSequentialTaskScheduler",["oz-player/shims/OzMaybeNativePromise","oz-player/shims/ozReportUnexpectedError","oz-player/shims/ozSetTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){this.$3=0;this.$1=a;a=b||{};b=a.taskTimeout;this.$4=b||0}var b=a.prototype;b.start=function(){this.$1.setOnTaskUpdated(this.$5.bind(this));var a=this.$1.dequeue();a&&this.$6(a,"immediate")};b.destroy=function(){this.$2&&this.$2.cancel(),this.$1.clearOnTaskUpdated()};b.$5=function(a,b){b=this.$6(a,b);b&&this.$1.remove(a)};b.$6=function(a,b){var d=this;if(this.$2&&b!=="immediate")return!1;this.$2&&this.$2.cancel();b=a.run()["catch"](function(a){});this.$4>0&&(b=c("oz-player/shims/OzMaybeNativePromise").race([b,new(c("oz-player/shims/OzMaybeNativePromise"))(function(a,b){c("oz-player/shims/ozSetTimeoutAcrossTransitions")(a,d.$4)})]));this.$3++;this.$2=a;b=b.then(function(){d.$3--;d.$2===a&&(d.$2=null);if(d.$3===0){var b=d.$1.dequeue();b&&d.$6(b,"immediate")}});b["catch"](function(a){c("oz-player/shims/ozReportUnexpectedError")(a,"OzSequentialTaskScheduler task complete")});return!0};return a}();g["default"]=a}),98);
__d("oz-player/networks/OzStreamingTaskQueueProvider",["oz-player/scheduling/OzRoundRobinPriorityTaskQueue","oz-player/scheduling/OzSequentialTaskScheduler"],(function(a,b,c,d,e,f,g){"use strict";var h=new Map(),i=new Map(),j=2,k=2,l=6e4;function a(a){var b=h.get(a);if(!b){b=new(c("oz-player/scheduling/OzRoundRobinPriorityTaskQueue"))(j,k);var d=new(c("oz-player/scheduling/OzSequentialTaskScheduler"))(b,{taskTimeout:l});h.set(a,b);i.set(a,d);d.start()}return b}g.OZ_QUEUE_MAX_PRIORITY=j;g.getQueue=a}),98);
__d("oz-player/networks/OzStreamingTaskStateManager",["Promise","oz-player/networks/OzStreamingTask","oz-player/networks/OzStreamingTaskQueueProvider","oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter","oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a){var b=this;this.$3=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$4=0;this.$9=!1;this.$10=null;var e=a.mimeType,f=a.priorityCalculator,g=a.loggerProvider,h=a.setCustomFetchStreamLoggingAttributes,i=a.config;a=a.bandwidthEstimator;this.$5=e;this.$1=f;this.$6=d("oz-player/networks/OzStreamingTaskQueueProvider").getQueue(this.$5);this.$7=g;this.$8=i;this.$11=(e=a)!=null?e:null;this.$10=h;this.$3.addSubscriptions(this.$1.addListener("state_changed",function(a,c){b.$12(a,c),b.$2&&b.$6.updatePriority(b.$2,b.$4)}))}var e=a.prototype;e.$13=function(){var a=[];a.push(c("oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter")(this.$5,this.$11));return a};e.startStreamDeferred=function(a){var b=a.debugName,c=a.segments,d=a.networkManager,e=a.segmentsLoggerProvider,f=a.mediaStreamType,g=a.dataAppendedCallback;a=a.dataAppendedErrorCallback;var h=this.$14(e),i=this.$13();c.length>0?d=d.createPausableStream({debugName:b,segments:c,pipeThroughRangeStreamProviders:i,loggerProvider:e,mediaStreamType:f,dataAppendedCallback:g,dataAppendedErrorCallback:a}):d=null;this.$9=!0;b=h.addStreamDeferred(d,e);return{genStream:b.genStream,cancel:b.cancel,getStatusChangePromise:this.$15(b.getStatusChangePromise)}};e.$14=function(a){var b=this.$2;this.$12(this.$1.compute(),"start_stream");!b||b.isCancelled()?(b=this.$2=new(c("oz-player/networks/OzStreamingTask"))(this.$8,a,this.$10),this.$6.enqueue(b,this.$4)):this.$6.updatePriority(b,this.$4);return b};e.$15=function(a){var c=this;return function(){return a().then(function(a){c.$16();return a})["catch"](function(a){c.$16();return(h||(h=b("Promise"))).reject(a)})}};e.finishTaskIfNoOngoingStream=function(){this.$9||this.$17()};e.destroy=function(){this.$3.release();var a=this.$2;this.$2=null;a&&this.$6.remove(a)};e.$16=function(){this.$9=!1,this.$12(this.$1.compute(),"end_stream"),this.$4<d("oz-player/networks/OzStreamingTaskQueueProvider").OZ_QUEUE_MAX_PRIORITY&&this.$17()};e.$17=function(){this.$2&&(this.$2.finish(),this.$2=null)};e.$12=function(a,b){if(a===this.$4)return;this.$4=a;this.$7&&this.$7.getOperationLogger("priority_changed").setPriorityFloat(this.$4).setInitiator(b).log()};return a}();g["default"]=a}),98);
__d("oz-player/strategies/OzStreamLengthStrategy",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c,d,e){b=b;e=e;var f=a.getNumber("segments_to_stream_under_playhead_threshold");a=a.getNumber("low_segment_stream_playhead_threshold");f>0&&d.getCurrentTime()<a&&(b=f);d=[];d.push(e);for(a=1;a<b;a++){f=c.getSegmentAfter(e);if(!f)break;e=f;d.push(e)}return d}f.getStreamingSegments=a}),66);
__d("oz-player/streams/OzMediaStreamLoopDriver",["oz-player/shims/ozClearTimeout","oz-player/shims/ozSetTimeoutAcrossTransitions","oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){var d=this;this.$2=null;this.$3=!1;this.$6=function(){var a;d.$7();if(d.$3)return;(a=d.$5)==null?void 0:a.start();a=d.$1.execute();var b=d.$1.getLoopInterval();b&&(d.$2=c("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){d.$6()},b));a&&a.then(d.$6)["catch"](function(b){d.$7();var a=d.$1.handleError(b);if(a)d.$2=c("oz-player/shims/ozSetTimeoutAcrossTransitions")(d.$6,a);else{(a=d.$5)==null?void 0:a.setError(b);(a=d.$5)==null?void 0:a.log();d.$5=null;d.$3=!0}})};this.$1=a;this.$4=b}var b=a.prototype;b.start=function(){if(this.$3)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_NOT_IMPLEMENTED_ERROR",description:"restart is not implemented"});this.$5=this.$4.getOperationLogger("media_stream").start();this.$6()};b.stop=function(){var a;this.$7();this.$3=!0;(a=this.$5)==null?void 0:a.log();this.$5=null};b.$7=function(){this.$2&&(c("oz-player/shims/ozClearTimeout")(this.$2),this.$2=null)};return a}();g["default"]=a}),98);
__d("oz-player/utils/OzRangeUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){b=b.filter(function(b){return b.startTime<=a&&b.endTime>=a});return b!=null&&b.length>0?b[0]:null}f.getRangeForTime=a}),66);
__d("oz-player/streams/OzSegmentLocator",["oz-player/utils/OzNumericalRangeUtil","oz-player/utils/OzRangeUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=a.getEndingSegment();return a!=null&&a.getSequenceNumber()!=null?a.getSequenceNumber():0}var h=function(a,b){a=a.getCurrentTime();return b?d("oz-player/utils/OzRangeUtils").getRangeForTime(a,b.getBufferedRanges()):null},i=function(a,b,c){b=h(a,b);c=c?c.getTimeRange().endTime:0;a=a.getCurrentTime()||0;c?a=c:b&&(a=b.endTime);return a};b=function(a,b,c,e,f,g,h,j){h=a.getPredictedSegmentAfter(g);if(h&&b.isPlaying())return h;j=i(b,e,g);h=f.getTimeRanges();e=d("oz-player/utils/OzNumericalRangeUtil").findDiffCoveredByRanges(b.getCurrentTime(),j,h.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}}));if(e>c)return null;g=a.getSegment(0);g&&g.getTimeRange().startTime>j&&(j=g.getTimeRange().startTime);return a.getSegmentByTime(j)};g.getEndingSequenceNumber=a;g.getTimeToQuery=i;g.getSegment=b}),98);
__d("oz-player/streams/OzSegmentUtils",["oz-player/manifests/OzSegmentOptions","oz-player/shims/OzURI"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return a.reduce(function(a,b){var c;return((c=b==null?void 0:b.getSequenceNumber())!=null?c:0)>((c=a==null?void 0:a.getSequenceNumber())!=null?c:0)?b:a})}function b(a,b){var d=new(c("oz-player/manifests/OzSegmentOptions"))();return a.getPredictedSegmentAfter({getData:function(){return null},getByteRange:function(){return null},getSequenceNumber:function(){return b-1},getTimeRange:function(){return{endTime:0,startTime:0}},getURI:function(){return new(c("oz-player/shims/OzURI"))("")},getOptions:function(){return d}})}function d(a){a.getOptions().setSegmentNumDecisionTime(Date.now());return a}g.getMaxSegment=a;g.getSegmentForSequenceNumber=b;g.markSegmentCreateTime=d}),98);
__d("oz-player/utils/OzTaggedTimeRanges",[],(function(a,b,c,d,e,f){a=function(){function a(a){this.$1=[],this.$2=0,this.$3=0,this.$4=a?a:function(a,b){return a===b}}var b=a.prototype;b.add=function(a,b,c){if(b<a)return;if(b===a)return;if(this.$1.length===0){this.$1.push({startTime:a,endTime:b,tag:c});return}var d=0,e=0;for(var f=0;f<this.$1.length;f++){if(a===this.$1[f].startTime&&b===this.$1[f].endTime){d=f;e=f+1;break}a>=this.$1[f].startTime&&(d=f+1);b<=this.$1[f].endTime&&(e=f);if(b<this.$1[f].startTime)break}this.$1.splice(d,e-d,{startTime:a,endTime:b,tag:c});this.$5(d)};b.$5=function(a){a=a;var b=this.$1[a],c=null;a!==0&&(c=this.$1[a-1]);c!==null&&(this.$4(c.tag,b.tag)?c.endTime>=b.startTime&&(this.$1.splice(a-1,2,{startTime:c.startTime,endTime:Math.max(b.endTime,c.endTime),tag:b.tag}),a--):(c.endTime>b.startTime&&c.startTime===b.startTime?(this.$1.splice(a-1,1),a--):c.endTime>b.startTime&&this.$1.splice(a-1,1,{startTime:c.startTime,endTime:b.startTime,tag:c.tag}),c.endTime>b.endTime&&this.$1.splice(a+1,0,{startTime:b.endTime,endTime:c.endTime,tag:c.tag})));c=null;a!==this.$1.length-1&&(c=this.$1[a+1]);c&&(this.$4(c.tag,b.tag)?c.startTime<=b.endTime&&this.$1.splice(a,2,{startTime:b.startTime,endTime:Math.max(c.endTime,b.endTime),tag:b.tag}):c.startTime<=b.endTime&&(c.endTime<b.endTime?(this.$1.splice(a,1,{startTime:b.startTime,endTime:c.startTime,tag:b.tag}),this.$1.push({startTime:c.endTime,endTime:b.endTime,tag:b.tag})):this.$1.splice(a+1,1,{startTime:b.endTime,endTime:c.endTime,tag:c.tag})))};b.get=function(a){var b=a>=this.$3?this.$2:0,c=null;for(b=b;b<this.$1.length;b++)if(this.$1[b].startTime<=a&&a<this.$1[b].endTime){c=b;break}this.$2=c===null?0:c;this.$3=a;return c===null?null:this.$1[c].tag};b.getLength=function(){return this.$1.length};return a}();f["default"]=a}),66);
__d("oz-player/streams/OzMediaStream",["oz-player/manifests/IOzSegment","oz-player/networks/OzNetworkManager","oz-player/networks/OzReadableStreamDataReader","oz-player/networks/OzStreamingTaskStateManager","oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter","oz-player/shims/OzDeferred","oz-player/shims/OzEventEmitter","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzNetworkDiagnostics","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozClearTimeout","oz-player/shims/ozReportUnexpectedError","oz-player/shims/ozSetTimeoutAcrossTransitions","oz-player/shims/ozvariant","oz-player/strategies/OzStreamLengthStrategy","oz-player/streams/OzMediaStreamLoopDriver","oz-player/streams/OzSegmentLocator","oz-player/streams/OzSegmentUtils","oz-player/utils/OzBufferingUtils","oz-player/utils/OzCustomErrorCode","oz-player/utils/OzErrorEmitter","oz-player/utils/OzErrorUtils","oz-player/utils/OzMimeUtil","oz-player/utils/OzTaggedTimeRanges"],(function(a,b,c,d,e,f,g){"use strict";var h=1e3,i=.2,j={AUDIO:1,CAPTION:3,VIDEO:0};a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var e;e=a.call(this)||this;e.$OzMediaStream$p_2=0;e.$OzMediaStream$p_3=0;e.$OzMediaStream$p_4=null;e.$OzMediaStream$p_13=null;e.$OzMediaStream$p_15=!1;e.$OzMediaStream$p_16=null;e.$OzMediaStream$p_17=new(c("oz-player/shims/OzSubscriptionsHandler"))();e.$OzMediaStream$p_19=[];e.$OzMediaStream$p_22=0;e.$OzMediaStream$p_29=!0;e.$OzMediaStream$p_31=!1;e.$OzMediaStream$p_32=null;e.$OzMediaStream$p_33=new(c("oz-player/utils/OzErrorEmitter"))();e.$OzMediaStream$p_35=!0;e.$OzMediaStream$p_38=0;e.$OzMediaStream$p_39=null;e.$OzMediaStream$p_40=null;var f=b.config,g=b.sourceBufferManagerPromise,h=b.networkManager,i=b.playbackState,j=b.endOfStreamWatcher,k=b.bufferTargetCalculator,l=b.priorityCalculator,m=b.streamSegmentsCountCalculator,n=b.abrManager,o=b.representation,p=b.loggerProvider,q=b.segmentLocator,r=b.setCustomFetchStreamLoggingAttributes,s=b.blockedRepresentationsManager,t=b.dynamicVideoLibrary,u=b.shouldAppendOncePerStream,v=b.mediaStreamType,w=b.warningEmitter;b=b.mpd;e.$OzMediaStream$p_1=f;e.$OzMediaStream$p_5=g;e.$OzMediaStream$p_5.then(function(a){e.$OzMediaStream$p_6=a,e.$OzMediaStream$p_16&&e.$OzMediaStream$p_16.setSourceBuffer(a),e.$OzMediaStream$p_27.setSourceBufferState(a.getSourceBufferState()),e.$OzMediaStream$p_47()},function(){})["catch"](function(a){c("oz-player/shims/ozReportUnexpectedError")(a,"OzMediaStream SBM promise then - create")});e.$OzMediaStream$p_12=h;e.$OzMediaStream$p_7=i;e.$OzMediaStream$p_14=j;(f=e.$OzMediaStream$p_14)==null?void 0:f.registerMediaStream(babelHelpers.assertThisInitialized(e));e.$OzMediaStream$p_26=k;e.$OzMediaStream$p_27=l;e.$OzMediaStream$p_28=m;e.$OzMediaStream$p_16=n;e.$OzMediaStream$p_18=p.cloneContext();e.$OzMediaStream$p_36=q;e.$OzMediaStream$p_25=new(c("oz-player/utils/OzTaggedTimeRanges"))(function(a,b){return a.id===b.id});e.$OzMediaStream$p_39=r;e.$OzMediaStream$p_40=s;e.$OzMediaStream$p_42=t;e.$OzMediaStream$p_43=u;e.$OzMediaStream$p_44=v;e.$OzMediaStream$p_45=w;e.$OzMediaStream$p_46=b;e.$OzMediaStream$p_17.addSubscriptions(e.$OzMediaStream$p_7.addEventListener("seeking",function(){var a=i.getCurrentTime(),b=null;e.$OzMediaStream$p_1.getBool("ignore_reset_after_seek_if_bufferahead")&&e.$OzMediaStream$p_8.canPredict()&&(e.$OzMediaStream$p_6?d("oz-player/utils/OzBufferingUtils").getBufferAheadFromCurrentTime(a,e.$OzMediaStream$p_6.getSourceBufferState().getBufferedRanges())>0:!1)?b="no_reset_anchor":(b="reset_anchor",e.$OzMediaStream$p_41=Date.now(),e.$OzMediaStream$p_9!=null&&(e.$OzMediaStream$p_48(),e.$OzMediaStream$p_31=!1,e.$OzMediaStream$p_24&&e.$OzMediaStream$p_24.resolve()));e.$OzMediaStream$p_18.cloneContext().getOperationLogger("media_element_event").setInitiator("seeking").setLength(a*1e3).setReason(b).setUserInfo({streamAnchorSegmentNumber:String((a=e.$OzMediaStream$p_9)==null?void 0:a.getSequenceNumber())}).log()}));e.$OzMediaStream$p_40!=null&&e.$OzMediaStream$p_17.addSubscriptions(e.$OzMediaStream$p_40.onRepresentationBlocked(function(a){return e.$OzMediaStream$p_49(a)}));e.$OzMediaStream$p_21=d("oz-player/utils/OzMimeUtil").getMimeType(o.getMimeCodecs());e.$OzMediaStream$p_30=new(c("oz-player/networks/OzStreamingTaskStateManager"))({mimeType:e.$OzMediaStream$p_21,priorityCalculator:e.$OzMediaStream$p_27,loggerProvider:e.$OzMediaStream$p_18,setCustomFetchStreamLoggingAttributes:e.$OzMediaStream$p_39,config:e.$OzMediaStream$p_1,bandwidthEstimator:e.$OzMediaStream$p_12.getBandwidthEstimator()});e.$OzMediaStream$p_23=new(c("oz-player/streams/OzMediaStreamLoopDriver"))(babelHelpers.assertThisInitialized(e),e.$OzMediaStream$p_18);e.$OzMediaStream$p_50(o);return e}var e=b.prototype;e.start=function(){this.$OzMediaStream$p_23.start()};e.getCurrentRepresentation=function(){return this.$OzMediaStream$p_8};e.switchRepresentation=function(a,b){b===void 0&&(b=null),this.$OzMediaStream$p_50(a,"user",b)};e.onError=function(a){return this.$OzMediaStream$p_33.onError(a)};e.updateRunTimeConfigs=function(a){var b=a.streamDataHandler;a=a.resetStreamAnchor;b!==void 0&&(this.$OzMediaStream$p_34=b);a===!0&&this.$OzMediaStream$p_8.canApproximateId()&&(this.$OzMediaStream$p_48(),this.$OzMediaStream$p_10=null)};e.$OzMediaStream$p_50=function(a,b,d){var e,f=this;b===void 0&&(b="internal");d===void 0&&(d=null);b==="user"&&this.$OzMediaStream$p_48();(e=this.$OzMediaStream$p_20)==null?void 0:e.remove();this.$OzMediaStream$p_20=null;e=this.$OzMediaStream$p_18.cloneContext().setType(this.$OzMediaStream$p_21+";init");var g=e.cloneContext().setRepresentationID(a.getID()),h=a.getInitSegment(),i=h.getData(),j=e.getOperationLogger("stream_switch").setPreviousRepresentationID(this.$OzMediaStream$p_8?this.$OzMediaStream$p_8.getID():null).setInitiator(b).setRepresentationID(a.getID()).setReason(b==="internal"?this.$OzMediaStream$p_16&&this.$OzMediaStream$p_16.getLastEvaluationReason():b).start();this.$OzMediaStream$p_8=a;e=function(){var a;j.log();f.$OzMediaStream$p_26.handleEvent("append_succeeded");f.emit("initAppended");(a=f.$OzMediaStream$p_14)==null?void 0:a.notifyRepresentationSwitched(f)};var k=function(b){var c;j.setError(b).log();f.$OzMediaStream$p_51(b);(c=f.$OzMediaStream$p_40)==null?void 0:c.handleError(a.getID(),b);if(a.getID()!==f.$OzMediaStream$p_8.getID()){(c=f.$OzMediaStream$p_24)==null?void 0:c.resolve()}};if(i==null){h=this.$OzMediaStream$p_12.request({debugName:"OzMediaStream/init/"+this.$OzMediaStream$p_44,segments:[h],pipeThroughRangeStreamProviders:[c("oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter")(this.$OzMediaStream$p_21,this.$OzMediaStream$p_12.getBandwidthEstimator())],loggerProvider:g,requestOptions:null,mediaStreamType:this.$OzMediaStream$p_44,dataAppendedCallback:e,dataAppendedErrorCallback:k});i=h.getStream()}this.emit("switchRepresentation",b,a);this.$OzMediaStream$p_52({data:i,mimeCodecs:a.getMimeCodecs(),clearSourceBufferRange:d,dataAppendedCallback:e,dataAppendedErrorCallback:k,loggerProvider:g.cloneContext(),appendTarget:0});if(d){h=a.getSegmentByTime(d[0]);if(h){b=this.$OzMediaStream$p_12.request({debugName:"OzMediaStream/startingSegment/"+this.$OzMediaStream$p_44,segments:[h],pipeThroughRangeStreamProviders:[c("oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter")(this.$OzMediaStream$p_21,this.$OzMediaStream$p_12.getBandwidthEstimator())],loggerProvider:g,requestOptions:null,mediaStreamType:this.$OzMediaStream$p_44,dataAppendedCallback:e,dataAppendedErrorCallback:k});i=b.getStream();this.$OzMediaStream$p_52({data:i,mimeCodecs:a.getMimeCodecs(),clearSourceBufferRange:null,dataAppendedCallback:e,dataAppendedErrorCallback:k,loggerProvider:g.cloneContext(),appendTarget:1})}}};e.getLoopInterval=function(){return this.$OzMediaStream$p_22};e.execute=function(){var a=this.$OzMediaStream$p_53();if(a){var b=this.$OzMediaStream$p_24=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));a.then(function(){return b.resolve()})["catch"](function(a){return b.reject(a)});return b.getPromise()}return null};e.$OzMediaStream$p_54=function(a){if(this.$OzMediaStream$p_16&&this.$OzMediaStream$p_29&&this.$OzMediaStream$p_15){a=this.$OzMediaStream$p_16.getBestRepresentation(a);if(this.$OzMediaStream$p_8!==a)return a}return null};e.$OzMediaStream$p_55=function(a){var b=this.$OzMediaStream$p_6?this.$OzMediaStream$p_6.getSourceBufferState():null,c=this.$OzMediaStream$p_26.computeBufferTarget();if(c<=0)return null;var e=null;a&&(e=this.$OzMediaStream$p_8.getCustomFieldFirstSegment());if(!e&&this.$OzMediaStream$p_8.canPredict()&&this.$OzMediaStream$p_36!=null){a=this.$OzMediaStream$p_35&&this.$OzMediaStream$p_7.isPlaying();return this.$OzMediaStream$p_36.getSegment(this.$OzMediaStream$p_8,this.$OzMediaStream$p_7,c,b,this.$OzMediaStream$p_9,this.$OzMediaStream$p_10,this.$OzMediaStream$p_1,a,this.$OzMediaStream$p_21)}else{e||(e=d("oz-player/streams/OzSegmentLocator").getSegment(this.$OzMediaStream$p_8,this.$OzMediaStream$p_7,c,b,this.$OzMediaStream$p_8,this.$OzMediaStream$p_9,this.$OzMediaStream$p_1,this.$OzMediaStream$p_32));if(this.$OzMediaStream$p_8.canPredict()){a=this.$OzMediaStream$p_10&&this.$OzMediaStream$p_10.getSequenceNumber()||0;c=e&&e.getSequenceNumber()||0;if(e&&this.$OzMediaStream$p_10&&a>=c){c=d("oz-player/streams/OzSegmentLocator").getEndingSequenceNumber(this.$OzMediaStream$p_8);return(c||0)>=a?this.$OzMediaStream$p_10:null}}}if(!e&&!this.$OzMediaStream$p_56()){c=this.$OzMediaStream$p_8.getEndingSegment();if(c&&this.$OzMediaStream$p_8.isEndingSegment(c)){a=c.getTimeRange().endTime;b=d("oz-player/streams/OzSegmentLocator").getTimeToQuery(this.$OzMediaStream$p_7,b,this.$OzMediaStream$p_9);b>=a&&!this.$OzMediaStream$p_56()&&(e=c)}}return e};e.$OzMediaStream$p_57=function(){return!this.$OzMediaStream$p_15};e.$OzMediaStream$p_58=function(a,b){var e;e=(e=b.fetchSingleSegment)!=null?e:!1;b=(b=b.preventRepresentationSwitch)!=null?b:!1;var f=[];if(e)f=[a];else{e=this.$OzMediaStream$p_28.computeMin(this.$OzMediaStream$p_7,a,this.$OzMediaStream$p_8);f=d("oz-player/strategies/OzStreamLengthStrategy").getStreamingSegments(this.$OzMediaStream$p_1,e,this.$OzMediaStream$p_8,this.$OzMediaStream$p_7,a);f=c("oz-player/networks/OzNetworkManager").getStreamableSegmentsRange(f);if(!b){e=this.$OzMediaStream$p_54(f);if(e){this.$OzMediaStream$p_50(e);a=this.$OzMediaStream$p_55(!1);if(!a)return[];else return this.$OzMediaStream$p_58(a,{fetchSingleSegment:!1,preventRepresentationSwitch:!0})}}}return f};e.$OzMediaStream$p_59=function(){var a=this,b=function(b){b==null?void 0:b.remove(),a.$OzMediaStream$p_20===b&&(a.$OzMediaStream$p_20=null)};b(this.$OzMediaStream$p_20);var d=null;return new(c("oz-player/shims/OzMaybeNativePromise"))(function(c,e){d=a.getCurrentRepresentation().addUpdateListener(function(){b(d),c()}),a.$OzMediaStream$p_20=d})["catch"](function(a){b(d);throw a})};e.$OzMediaStream$p_53=function(){var a=this,b=this.$OzMediaStream$p_6?this.$OzMediaStream$p_6.getSourceBufferState():null;if(this.$OzMediaStream$p_8.canPredict()&&this.$OzMediaStream$p_10&&this.$OzMediaStream$p_8.isEndingSegment(this.$OzMediaStream$p_10)){this.endStream("pdash_ending_segment_had_error");this.$OzMediaStream$p_18.cloneContext().getOperationLogger("media_loop_end").setInitiator("end1").setRepresentationID(this.$OzMediaStream$p_8.getID()).log();return}if(this.$OzMediaStream$p_8.canPredict()&&this.$OzMediaStream$p_9&&this.$OzMediaStream$p_8.isEndingSegment(this.$OzMediaStream$p_9)){this.endStream("pdash_anchor_segment_is_ending_segment");this.$OzMediaStream$p_18.cloneContext().getOperationLogger("media_loop_end").setInitiator("end2").setRepresentationID(this.$OzMediaStream$p_8.getID()).log();return}var e=this.$OzMediaStream$p_57(),f=this.$OzMediaStream$p_55(e);if(this.$OzMediaStream$p_8.canPredict()&&this.$OzMediaStream$p_11!=null&&d("oz-player/manifests/IOzSegment").isSequenceNumberGreaterOrEqual(f,this.$OzMediaStream$p_11)){this.$OzMediaStream$p_18.cloneContext().getOperationLogger("media_loop_end").setInitiator("segment_end").setRepresentationID(this.$OzMediaStream$p_8.getID()).log();return}d("oz-player/manifests/IOzSegment").isSequenceNumberEqual(f,this.$OzMediaStream$p_37)?this.$OzMediaStream$p_38++:this.$OzMediaStream$p_38=0;this.$OzMediaStream$p_37=f;this.$OzMediaStream$p_7.isPlaying()&&this.$OzMediaStream$p_38>0&&this.$OzMediaStream$p_18.cloneContext().getOperationLogger("get_segment_to_stream_same_segment").setReason((f==null?void 0:f.getSequenceNumber())!=null?String(f==null?void 0:f.getSequenceNumber()):null).setLength(this.$OzMediaStream$p_38).setRepresentationID(this.$OzMediaStream$p_8.getID()).setSegmentStartTime(f==null?void 0:f.getTimeRange().startTime).setSegmentEndTime(f==null?void 0:f.getTimeRange().endTime).log();if(this.$OzMediaStream$p_31){var g;this.$OzMediaStream$p_22=h;this.$OzMediaStream$p_18.cloneContext().getOperationLogger("media_loop_end").setInitiator("ongoing_stream").setReason(((g=this.$OzMediaStream$p_9)==null?void 0:g.getSequenceNumber())!=null?String((g=this.$OzMediaStream$p_9)==null?void 0:g.getSequenceNumber()):null).setRepresentationID(this.$OzMediaStream$p_8.getID()).log();return null}if(!f||this.$OzMediaStream$p_31){if(this.$OzMediaStream$p_8.canPredict()&&this.$OzMediaStream$p_1.getBool("ms_promise_for_null")){var i=this.$OzMediaStream$p_1.getNumber("ms_promise_for_null_ms");return new(c("oz-player/shims/OzMaybeNativePromise"))(function(b,d){var e=c("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){c("oz-player/shims/ozClearTimeout")(e),b()},i?i:(a.$OzMediaStream$p_8.getMaxGopSec()||1)*1e3)})}this.$OzMediaStream$p_22=h;this.$OzMediaStream$p_31||this.$OzMediaStream$p_30.finishTaskIfNoOngoingStream();return this.$OzMediaStream$p_59()}this.$OzMediaStream$p_22=0;var j=this.$OzMediaStream$p_58(f,{fetchSingleSegment:e});if(j.length===0){this.$OzMediaStream$p_18.cloneContext().getOperationLogger("media_loop_end").setInitiator("no_stream_segments").setReason(((g=this.$OzMediaStream$p_9)==null?void 0:g.getSequenceNumber())!=null?String((f=this.$OzMediaStream$p_9)==null?void 0:f.getSequenceNumber()):null).setRepresentationID(this.$OzMediaStream$p_8.getID()).log();return this.$OzMediaStream$p_59()}this.$OzMediaStream$p_15=!0;var k=j[j.length-1]||null,l=this.$OzMediaStream$p_8,m=function(){return l.isEndingSegment(k)};j.length!==0||c("oz-player/shims/ozvariant")(0,23148);g=j[0];f=g.getTimeRange().startTime;var n=k.getTimeRange().endTime,o={startTime:f,endTime:n,tag:{id:this.$OzMediaStream$p_8.getID()}},p=function(b){v.setAppendedBufferMs(Math.round(b.appendedSec*1e3)),v.log(),a.$OzMediaStream$p_26.handleEvent("append_succeeded"),j.forEach(function(b){a.emit("SegmentAppended",a.$OzMediaStream$p_60(b,o))}),m()&&a.endStream("appended_ending_segment"),a.$OzMediaStream$p_61(o,b)},q=function(b){v.setError(b).log();var c=t||s;c&&c.cancel();a.$OzMediaStream$p_51(b)},r=this.$OzMediaStream$p_18.cloneContext();r.setRepresentationID(this.$OzMediaStream$p_8.getID());r.setSegmentStartTime(f).setSegmentEndTime(n);var s,t;!e?(t=this.$OzMediaStream$p_30.startStreamDeferred({debugName:"OzMediaStream/streamableSegments/"+this.$OzMediaStream$p_44,segments:j,networkManager:this.$OzMediaStream$p_12,sourceBufferState:b,playbackState:this.$OzMediaStream$p_7,segmentsLoggerProvider:r.cloneContext(),mediaStreamType:this.$OzMediaStream$p_44,dataAppendedCallback:p,dataAppendedErrorCallback:q}),this.$OzMediaStream$p_13=s):(s=this.$OzMediaStream$p_12.request({debugName:"OzMediaStream/streamableSegments/"+this.$OzMediaStream$p_44+"/prefetch",segments:j,pipeThroughRangeStreamProviders:[c("oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter")(this.$OzMediaStream$p_21,this.$OzMediaStream$p_12.getBandwidthEstimator())],loggerProvider:r.cloneContext(),requestOptions:null,mediaStreamType:this.$OzMediaStream$p_44,dataAppendedCallback:p,dataAppendedErrorCallback:q}),this.$OzMediaStream$p_13=s);this.$OzMediaStream$p_31=!0;var u=this.$OzMediaStream$p_62(g,k,j.length),v=r.getOperationLogger("queued_append");v.start().setReason(this.$OzMediaStream$p_16&&this.$OzMediaStream$p_16.getLastEvaluationReason());var w=function(c,b){a.$OzMediaStream$p_52({data:c,mimeCodecs:b,clearSourceBufferRange:null,dataAppendedCallback:p,dataAppendedErrorCallback:q,loggerProvider:r.cloneContext(),appendTarget:u})},x;!!t||!!s||c("oz-player/shims/ozvariant")(0,23147);var y=this.$OzMediaStream$p_8.getMimeCodecs();t?(t.genStream().then(function(a){return w(a,y)})["catch"](function(b){return a.$OzMediaStream$p_33.emitError(b)}),x=t.getStatusChangePromise()):s&&(w(s.getStream(),y),x=s.getStatusChangePromise());!x&&c("oz-player/shims/ozvariant")(0,51928);f=x.then(function(b){a.$OzMediaStream$p_63(b,k);return a.$OzMediaStream$p_64()}).then(function(){a.$OzMediaStream$p_2=0});return f["catch"](function(b){var c,d=a.$OzMediaStream$p_9;a.$OzMediaStream$p_65(k);(c=a.$OzMediaStream$p_40)==null?void 0:c.handleError(l.getID(),b);return a.$OzMediaStream$p_66(b,k,d)})};e.handleError=function(a){var b=this.$OzMediaStream$p_18.getOperationLogger("media_stream_loop_error");b.setError(a).setResult("failed").log();return this.$OzMediaStream$p_1.getNumber("loop_body_handle_error_interval_ms")};e.$OzMediaStream$p_66=function(a,b,e){var f=this;this.$OzMediaStream$p_31=!1;var g=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise")),h=d("oz-player/utils/OzErrorUtils").getNormalizedErrorAndCode(a),i=h[0],j=h[1],k=d("oz-player/utils/OzErrorUtils").getOzErrorWithMIMEType(i,this.$OzMediaStream$p_21),l=function(b){f.$OzMediaStream$p_2++;f.$OzMediaStream$p_18.getOperationLogger("media_stream").setInitiator("fetch_stream_"+(b.behavior!=null?b.behavior:"default")).setLength(b.timeoutMs).setReason(""+k.getDescription()).setError(k).setCode(j.length>0?Number.parseInt(j,10):null).setType(f.$OzMediaStream$p_21).log();if(b.behavior==="retry_failed_request")f.$OzMediaStream$p_9=e;else if(b.behavior==="recover_failed_request"&&d("oz-player/utils/OzErrorUtils").isOzError(a)){var h;h=(h=a.getExtra())==null?void 0:h.headers;h=c("oz-player/shims/OzNetworkDiagnostics").getNextValidSegmentId(h);h!=null&&(f.$OzMediaStream$p_9=d("oz-player/streams/OzSegmentUtils").getSegmentForSequenceNumber(f.$OzMediaStream$p_8,h-1))}c("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){f.emit("streamErrorRetry",k);return g.resolve()},b.timeoutMs)};this.$OzMediaStream$p_4!==j?(this.$OzMediaStream$p_4=j,this.$OzMediaStream$p_3=1):this.$OzMediaStream$p_3++;h=!0;var m=function(){h=!1};i={consecutiveFailuresForErrorCode:this.$OzMediaStream$p_3,endStream:function(){m(),f.$OzMediaStream$p_10=b,f.$OzMediaStream$p_11=b,f.endStream("streamError_event_object"),g.resolve()},error:k,isInitialRequest:!1,retry:function(a){var b;m();l({timeoutMs:(b=a==null?void 0:a.waitMs)!=null?b:0,behavior:a==null?void 0:a.behavior})},retryAttemptCount:this.$OzMediaStream$p_2};this.emit("streamError",i);h&&(this.$OzMediaStream$p_33.emitError(k),this.$OzMediaStream$p_2=0,g.resolve());return g.getPromise()};e.$OzMediaStream$p_65=function(a){this.$OzMediaStream$p_48();this.$OzMediaStream$p_10=a;this.$OzMediaStream$p_30.finishTaskIfNoOngoingStream();a=this.$OzMediaStream$p_6;a&&a.cancelOperationAndCleanQueue(this.$OzMediaStream$p_18)};e.$OzMediaStream$p_63=function(a,b){a==="done"&&(this.$OzMediaStream$p_9=b)};e.$OzMediaStream$p_64=function(){this.$OzMediaStream$p_31=!1};e.$OzMediaStream$p_52=function(a){this.$OzMediaStream$p_19.push(a),this.$OzMediaStream$p_6&&this.$OzMediaStream$p_47()};e.$OzMediaStream$p_61=function(a,b){if(a==null)return;this.$OzMediaStream$p_8.canPredict()&&b.startTime_UNSAFE&&b.endTime_UNSAFE?this.$OzMediaStream$p_25.add(b.startTime_UNSAFE,b.endTime_UNSAFE,a.tag):this.$OzMediaStream$p_25.add(a.startTime,a.endTime,a.tag)};e.$OzMediaStream$p_47=function(){var a=this;this.$OzMediaStream$p_19.forEach(function(b){var d=b.data,e=b.mimeCodecs,f=b.clearSourceBufferRange,g=b.dataAppendedCallback,h=b.dataAppendedErrorCallback,i=b.loggerProvider;b=b.appendTarget;d=d instanceof Uint8Array||a.$OzMediaStream$p_34==null?d:d.pipeThrough(new(c("oz-player/networks/OzReadableStreamDataReader"))(a.$OzMediaStream$p_34.bind(a,a.$OzMediaStream$p_8),a.$OzMediaStream$p_1));a.$OzMediaStream$p_6&&a.$OzMediaStream$p_6.queueData(d,e,f,i,b).then(function(a){if(!a)return;g(a)})["catch"](function(a){h(a)})});this.$OzMediaStream$p_19=[]};e.$OzMediaStream$p_67=function(){var a=this.$OzMediaStream$p_6;if(!a)return c("oz-player/shims/OzMaybeNativePromise").resolve();var b=this.$OzMediaStream$p_7.getCurrentTime(),d=[{fromTime:0,toTime:b}],e=this.$OzMediaStream$p_1.getNumber("clear_buffer_around_playhead_boundary_ms");if(e>0){e=e/1e3;var f=a.getSourceBufferState();f=f.getBufferedRanges();f=f.length>=1?f[f.length-1].endTime:b;d=[{fromTime:0,toTime:Math.max(0,b-e)}];b+e<f&&d.push({fromTime:b+e,toTime:f})}return a.clearRangeWithWait(d)};e.$OzMediaStream$p_68=function(a){return!1};e.$OzMediaStream$p_51=function(a){var b=this;if(d("oz-player/utils/OzErrorUtils").isOzError(a)&&a.getType()==="OZ_SOURCE_BUFFER_QUOTA_EXCEEDED"){this.emit("streamErrorRetry",d("oz-player/utils/OzErrorUtils").getOzErrorWithMIMEType(a,this.$OzMediaStream$p_21));this.$OzMediaStream$p_26.handleEvent("append_quota_exceeded");var e=this.$OzMediaStream$p_67();e.then(function(){b.restartLoopBody()})["catch"](function(a){a=d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_STREAM_APPEND_QUOTA_EXCEEDED_HANDLER_ERROR",description:"Stream append quota exceeded: "+String(a),extra:{originalError:a,code:c("oz-player/utils/OzCustomErrorCode").STREAM_APPEND_QUOTA_EXCEEDED_HANDLER_ERROR}});b.$OzMediaStream$p_33.emitError(a)})}else if(d("oz-player/utils/OzErrorUtils").isOzError(a)&&a.getType()==="OZ_CANCELLED")return;else if(d("oz-player/utils/OzErrorUtils").isOzError(a)&&a.getType()==="OZ_SOURCE_BUFFER_CHANGE_TYPE")this.$OzMediaStream$p_33.emitError(a);else if(d("oz-player/utils/OzErrorUtils").isOzError(a)&&a.getType()==="OZ_SOURCE_BUFFER_CHANGE_TYPE_UNAVAILABLE")this.$OzMediaStream$p_33.emitError(a);else if(this.$OzMediaStream$p_1.getBool("emit_caption_parse_errors_as_warning")&&d("oz-player/utils/OzErrorUtils").isOzError(a)&&a.getType()==="OZ_WEBVTT_CAPTION_PARSE_ERROR"){c("oz-player/shims/ozReportUnexpectedError")(a,"OzMediaStream append error callback: OZ_WEBVTT_CAPTION_PARSE_ERROR branch","warn");(e=this.$OzMediaStream$p_45)==null?void 0:e.emitError(a)}else c("oz-player/shims/ozReportUnexpectedError")(a,"OzMediaStream append error callback","warn"),this.$OzMediaStream$p_68(a)&&this.$OzMediaStream$p_33.emitError(a)};e.$OzMediaStream$p_62=function(a,b,c){var d=0;if(this.$OzMediaStream$p_43)return Infinity;var e=this.$OzMediaStream$p_1.getNumber("appends_per_segment");if(e>0){a=a.getByteRange();b=b.getByteRange();a&&b&&b.endByte!=null&&(d=Math.ceil((b.endByte-a.startByte+1)/(c*e)))}d===0&&(d=this.$OzMediaStream$p_1.getNumber("append_byte_target_without_range"));return d};e.getIsAdaptationEnabled=function(){return this.$OzMediaStream$p_29};e.enableAdaptation=function(){this.$OzMediaStream$p_29=!0};e.disableAdaptation=function(){this.$OzMediaStream$p_29=!1};e.destroy=function(){this.$OzMediaStream$p_23.stop(),this.$OzMediaStream$p_5.then(function(a){a.destroy()},function(){})["catch"](function(a){c("oz-player/shims/ozReportUnexpectedError")(a,"OzMediaStream SBM promise then - destroy")}),this.$OzMediaStream$p_30.destroy(),this.$OzMediaStream$p_17.release(),this.$OzMediaStream$p_17.engage(),this.removeAllListeners(),this.$OzMediaStream$p_20&&(this.$OzMediaStream$p_20.remove(),this.$OzMediaStream$p_20=null)};e.getRepresentationIDAtTime=function(a){var b=this.$OzMediaStream$p_25.get(a);if(!b){var c=this.$OzMediaStream$p_8.getTimeRanges();c=c[c.length-1];var d=.001;c&&a>=c.endTime&&a<=this.$OzMediaStream$p_7.getDuration()+d&&(b=this.$OzMediaStream$p_25.get(c.endTime-d))}return b?b.id:null};e.endStream=function(a){var b;(b=this.$OzMediaStream$p_14)==null?void 0:b.notifyMediaStreamEnded(this,a);this.$OzMediaStream$p_69()};e.endStreamIfBufferedToEndTime=function(){var a=this.$OzMediaStream$p_8.getTimeRanges();if(a.length>0){a=a[a.length-1].endTime;if(this.$OzMediaStream$p_6){var b=this.$OzMediaStream$p_6.getSourceBufferState().getBufferedRanges();b.length>0&&(Math.abs(b[b.length-1].endTime-a)<i&&this.endStream("buffered_to_end_time"))}}};e.$OzMediaStream$p_60=function(a,b){return{type:this.$OzMediaStream$p_21.indexOf("audio")===0?j.AUDIO:this.$OzMediaStream$p_21.indexOf("video")===0?j.VIDEO:j.CAPTION,segment:a,sourceBuffer:(a=(a=this.$OzMediaStream$p_6)==null?void 0:(a=a.getDebug())==null?void 0:a.SourceBuffer)!=null?a:null,timeRange:b}};e.$OzMediaStream$p_48=function(){this.$OzMediaStream$p_9=null};e.restartLoopBody=function(){this.$OzMediaStream$p_48(),this.$OzMediaStream$p_31=!1,this.$OzMediaStream$p_13&&this.$OzMediaStream$p_13.cancel(),this.$OzMediaStream$p_22!==0&&this.$OzMediaStream$p_24&&this.$OzMediaStream$p_24.resolve()};e.$OzMediaStream$p_69=function(){if(this.$OzMediaStream$p_6){var a=this.$OzMediaStream$p_6.getSourceBufferState().getBufferedRanges();a.length>0&&(this.$OzMediaStream$p_32=a[a.length-1].endTime)}};e.$OzMediaStream$p_56=function(){return this.$OzMediaStream$p_32!==null};e.$OzMediaStream$p_49=function(a){this.$OzMediaStream$p_8.getID()===a&&this.$OzMediaStream$p_16!=null&&this.$OzMediaStream$p_50(this.$OzMediaStream$p_16.getBestRepresentation())};e.setEnableLiveheadCatchup=function(a){this.$OzMediaStream$p_35=a};e.clearSourceBufferRange=function(a,b){var d=this.$OzMediaStream$p_6;return d?d.clearRangeWithWait([{fromTime:a,toTime:b}]):c("oz-player/shims/OzMaybeNativePromise").resolve()};e.getDebug=function(){return{SourceBufferManager:this.$OzMediaStream$p_6,MediaStreamAbrManager:this.$OzMediaStream$p_16}};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/streams/OzPredictedSegmentLocator",["oz-player/streams/OzSegmentLocator","oz-player/streams/OzSegmentUtils","oz-player/utils/OzSourceBufferUtil"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){var c=0;for(var d in a){var e;if(d===b)continue;c=Math.max(c,(e=a[d].lastSkippedToSegmentNumber)!=null?e:0)}return c}function i(a,b){var c=null;for(var d in a){if(d===b)continue;a[d].inBufferAheadTimeSince!=null&&(c=c!=null?Math.min(c,a[d].inBufferAheadTimeSince):a[d].inBufferAheadTimeSince)}return c}a=function(){function a(a){this.$5={};var b=a.videoNode,c=a.liveLatencyManager,d=a.loggerProvider;a=a.dynamicVideoLibrary;this.$1=b;this.$2=c;this.$3=d;this.$4=a}var b=a.prototype;b.getSegment=function(a,b,c,d,e,f,g,h,i){var j;this.$5[i]==null&&(this.$5[i]={lastSkippedToSegmentNumber:null,inBufferAheadTimeSince:null});(j=this.$2)==null?void 0:j.setEnableCatchup(h);j=this.$6(a,b,c,d,e,f,g,h,i);(a=j.segment)==null?void 0:a.getOptions().setSegmentNumDecisionTime(Date.now());j.segment===null&&this.$3.getOperationLogger("segment_locator").setInitiator(j.initiator).setReason(j.reason).setType(i).setUserInfo(j.userInfo).log();b=this.$4;if(j.segment&&b!=null){c=j.segment.getOptions();c.setIsDVLEnabled(b.shouldRequestDynamicInfo(i))}return j.segment};b.$6=function(a,b,c,e,f,g,j,k,l){var m,n=b.getCurrentTime(),o=this.$2==null?!1:this.$2.shouldEnableCursorBasedCatchup(),p=e!=null?d("oz-player/utils/OzSourceBufferUtil").getTotalBufferAheadOfPosition(e.getBufferedRanges(),b.getCurrentTime(),j):{bufferAheadSec:0,bufferedOffset:0},q=p.bufferAheadSec;p=p.bufferedOffset;var r=null,s=null,t=this.$2?this.$2.enabled():!0,u=a.getPredictedSegmentAfter(f),v=d("oz-player/streams/OzSegmentUtils").getSegmentForSequenceNumber(a,j.getNumber("pdash_download_cursor_between_catchups_seg")>0?h(this.$5):h(this.$5,l)),w=!0,x=null;if(o&&k&&((m=u)==null?void 0:m.getSequenceNumber())!=null&&((m=(m=u)==null?void 0:m.getSequenceNumber())!=null?m:0)<=((m=v==null?void 0:v.getSequenceNumber())!=null?m:0)){u=v;r="paired_catchup";this.$3.getOperationLogger("segment_locator").setInitiator(r).setUserInfo({bufferAheadSec:String(q),bufferedOffset:String(p)}).setLength(((m=v==null?void 0:v.getSequenceNumber())!=null?m:0)-((m=(m=u)==null?void 0:m.getSequenceNumber())!=null?m:0)).setType(l).log();w=!1;x=r}else if(o&&k&&t&&u!=null&&((m=this.$2)==null?void 0:m.isBehindPreferredLiveHeadLatencyWithTolerance())){if(this.$2&&q>this.$2.getPreferredLiveHeadLatencySec()&&p==0)return{segment:null,initiator:"catchup_pause",userInfo:{bufferAheadSec:String(q),bufferedOffset:String(p)}};o=a.getEndingSegment();k=d("oz-player/streams/OzSegmentUtils").getMaxSegment([o,u]);m=j.getNumber("pdash_download_cursor_between_catchups_seg")===0||((m=v==null?void 0:v.getSequenceNumber())!=null?m:0)+j.getNumber("pdash_download_cursor_between_catchups_seg")<((v=o==null?void 0:o.getSequenceNumber())!=null?v:0);if(m){if(((o=k==null?void 0:k.getSequenceNumber())!=null?o:0)>((m=(v=u)==null?void 0:v.getSequenceNumber())!=null?m:0)){this.$5[l].lastSkippedToSegmentNumber=(o=k==null?void 0:k.getSequenceNumber())!=null?o:0;this.$3.getOperationLogger("segment_locator").setInitiator("catchup").setUserInfo({bufferAheadSec:String(q),bufferedOffset:String(p)}).setLength(((v=k==null?void 0:k.getSequenceNumber())!=null?v:0)-((o=(m=u)==null?void 0:m.getSequenceNumber())!=null?o:0)).setType(l).log()}u=k;r="catchup";w=!1;x=r}}else if(f==null){u=a.getSegmentByTime(n);r="1st_run";v=a.getTimeRanges();s={approx:String(a.canApproximateId()),ranges:String(v.length),mpdStartTime:v.length>0?String(v[v.length-1].startTime):null,mpdEndTime:v.length>0?String(v[v.length-1].endTime):null};this.$5[l].lastSkippedToSegmentNumber=(o=(m=u)==null?void 0:m.getSequenceNumber())!=null?o:0}w&&(w=t,x="stream_state");if(w&&q>c){this.$5[l].inBufferAheadTimeSince==null&&(this.$5[l].inBufferAheadTimeSince=Date.now());return{segment:null,initiator:"buffer_ahead_rule",userInfo:{bufferAheadSec:String(q),bufferedOffset:String(p),lastMaxSegNum:String(h(this.$5,l)),segment:u?String(u.getSequenceNumber()):null,computedBufferAheadTarget:String(c)}}}else!w&&q>c&&this.$3.getOperationLogger("segment_locator").setUserInfo({bufferAheadSec:String(q),bufferedOffset:String(p),computedBufferAheadTarget:String(c)}).setReason("disabled_buffer_ahead_rule:"+(x||"")).setType(l).log();k=g&&g.getSequenceNumber()||0;f=u&&u.getSequenceNumber()||0;if(u&&g&&k>=f){n=d("oz-player/streams/OzSegmentLocator").getEndingSequenceNumber(a);return(n||0)>=k?{segment:g}:{segment:null,initiator:"mpd_refresh",userInfo:{leSegNum:String(k)}}}v=e?d("oz-player/utils/OzSourceBufferUtil").getTotalInBufferedRanges(e.getBufferedRanges()):0;m=e?d("oz-player/utils/OzSourceBufferUtil").getTotalBufferAheadOfPosition(e.getBufferedRanges(),b.getCurrentTime(),j).bufferAheadSec:0;o=i(this.$5,l);t=Date.now();if(j.getNumber("download_cursor_total_buffer_max_sec")!=0&&j.getNumber("download_cursor_total_buffer_max_sec")<m||j.getNumber("download_cursor_buffer_ahead_time_max_sec")!=0&&o!=null&&j.getNumber("download_cursor_buffer_ahead_time_max_sec")<(t-o)/1e3){this.$5[l].lastSkippedToSegmentNumber=(x=(w=u)==null?void 0:w.getSequenceNumber())!=null?x:0;this.$3.getOperationLogger("segment_locator").setUserInfo({bufferAheadSec:String(q),bufferedOffset:String(p),totalBufferedSec:String(v),computedBufferAheadTarget:String(c),inBufferAheadElapsedTime:String((t-((f=o)!=null?f:0))/1e3)}).setReason("force_paired_catchup").setType(l).log()}this.$5[l].inBufferAheadTimeSince=null;return{segment:u,initiator:r?r:void 0,userInfo:s?s:void 0}};return a}();g.OzPredictedSegmentLocator=a}),98);
__d("oz-player/utils/getRepresentationInCache",["oz-player/networks/RequestParamCreator"],(function(a,b,c,d,e,f,g){"use strict";var h=new(c("oz-player/networks/RequestParamCreator"))();function a(a,b){b===void 0&&(b=null);return a.find(function(a){a=a.getInitSegment();var c=a&&a.getByteRange();return a&&c&&b?b.hasCacheValue(h.createRequestParam(a.getURI(),c).uri.toString()):!1})||null}g["default"]=a}),98);
__d("oz-player/Player",["Promise","oz-player/configs/OzPlayerConfig","oz-player/drm/OzDrmManager","oz-player/loggings/OzDevConsolePerfLogger","oz-player/loggings/OzLoggingUtils","oz-player/loggings/OzMultiDestinationPerfLogger","oz-player/loggings/OzOperationLoggerObserver","oz-player/manifests/OzDynamicVideoLibrary","oz-player/manifests/OzVideoRepresentation","oz-player/media_source/MediaSourceManager","oz-player/media_source/OzMediaSeekableRangeManager","oz-player/networks/OzBandwidthEstimator","oz-player/networks/OzClientClock","oz-player/networks/OzNetworkManager","oz-player/parsers/OzMpdParser","oz-player/parsers/OzMpdUpdater","oz-player/parsers/OzXmlParserImplDOMParser","oz-player/playback_controls/OzClearSourceBufferOnSeekManager","oz-player/playback_controls/OzLiveLatencyManager","oz-player/playback_controls/OzPlaybackTimeRangeManager","oz-player/playback_controls/OzPlayheadManager","oz-player/shims/OzEventEmitter","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzPerformance","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/OzUuid","oz-player/shims/ozClearTimeout","oz-player/shims/ozReportUnexpectedError","oz-player/shims/ozSetTimeoutAcrossTransitions","oz-player/shims/ozvariant","oz-player/states/OzObservedPlaybackState","oz-player/states/OzPositionToViewport","oz-player/strategies/OzAbrManager","oz-player/strategies/OzBandwidthBoundaryStreamSegmentsCountStrategy","oz-player/strategies/OzBlockedRepresentationsManager","oz-player/strategies/OzBufferAheadPriorityStrategy","oz-player/strategies/OzBufferAheadTargetStrategy","oz-player/strategies/OzBufferEndLimitStrategy","oz-player/strategies/OzBufferTargetBoundedStreamSegmentsCountStrategy","oz-player/strategies/OzBufferTargetCalculator","oz-player/strategies/OzBufferTargetCalculatorQuotaExceededConstraint","oz-player/strategies/OzBufferingDetector","oz-player/strategies/OzPausedStreamSegmentsCountStrategy","oz-player/strategies/OzPlayheadAtInterruptionDetector","oz-player/strategies/OzPlayingStatePriorityStrategy","oz-player/strategies/OzPositionToViewportPriorityStrategy","oz-player/strategies/OzPriorityCalculator","oz-player/strategies/OzSingleCodecRestriction","oz-player/strategies/OzStaleManifestBufferTargetStrategy","oz-player/strategies/OzStartupBufferTargetStrategy","oz-player/strategies/OzStaticStreamSegmentsStrategy","oz-player/strategies/OzStreamSegmentsCountCalculator","oz-player/strategies/OzSupportedMimeCodecsRestriction","oz-player/streams/OzEndOfStreamWatcher","oz-player/streams/OzHandleUserRepresentationSwitch","oz-player/streams/OzMediaStream","oz-player/streams/OzPredictedSegmentLocator","oz-player/utils/OzCustomErrorCode","oz-player/utils/OzErrorEmitter","oz-player/utils/OzErrorUtils","oz-player/utils/OzIbrUtils","oz-player/utils/OzMimeUtil","oz-player/utils/OzMpdUtils","oz-player/utils/OzPlaybackRestrictionsUtils","oz-player/utils/OzReadableStreamUtils","oz-player/utils/getRepresentationInCache"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){a||c("oz-player/shims/ozvariant")(0,21876);return a}var j="av01",k="vp09",l="avc1";a=function(a){babelHelpers.inheritsLoose(e,a);function e(b){var e;e=a.call(this)||this;e.$Player$p_5=new Map();e.$Player$p_6=new Map();e.$Player$p_9=void 0;e.$Player$p_10=new(c("oz-player/shims/OzSubscriptionsHandler"))();e.$Player$p_11=new(c("oz-player/utils/OzErrorEmitter"))();e.$Player$p_12=new(c("oz-player/utils/OzErrorEmitter"))();e.$Player$p_19=void 0;e.$Player$p_25=[];e.$Player$p_26=void 0;e.$Player$p_27=void 0;e.$Player$p_32=null;e.$Player$p_33=null;e.$Player$p_43=null;e.$Player$p_51=!1;e.$Player$p_54=0;e.$Player$p_55=null;e.$Player$p_56=null;e.$Player$p_57=0;e.$Player$p_58=null;e.$Player$p_59=null;e.$Player$p_60=!1;e.$Player$p_63=null;e.$Player$p_64=null;e.$Player$p_70=!1;e.$Player$p_71=!1;e.$Player$p_76=!1;e.$Player$p_77=null;e.$Player$p_88=function(){var a=new(c("oz-player/parsers/OzXmlParserImplDOMParser"))();return a};e.$Player$p_90=function(){e.$Player$p_5.forEach(function(a){return a.endStreamIfBufferedToEndTime()})};e.$Player$p_91=function(){e.$Player$p_5.forEach(function(a){return a.endStream("streamGone")})};var f=b.audioOnly;f=f===void 0?!1:f;var g=b.bufferingDetector,h=b.videoNode,i=b.config,j=b.configMap,k=b.rawMpdXml,l=b.mpdUrl;l=l===void 0?null:l;var m=b.loggerConfig;m=m===void 0?{perfLoggerProviders:[],observedOperationLoggers:[],isOzDevConsoleEnabled:!1}:m;var n=b.bandwidthEstimatorOverride;n=n===void 0?null:n;var o=b.customVTTBufferTargetStrategies;o=o===void 0?null:o;var p=b.prefetchCache;p=p===void 0?null:p;var q=b.getOverrideOzRequestImplementation;q=q===void 0?null:q;var r=b.getUserSelectedPlaybackRate,s=b.networkRequestStreamHandlers,t=b.networkRequestStreamRetryHandler,u=b.networkRequestUrlRefreshHandler,v=b.getShouldIncludeCredentials;v=v===void 0?null:v;var w=b.getCustomRequestParametersForURI;w=w===void 0?null:w;var x=b.initialRepresentationIDs;x=x===void 0?[]:x;var y=b.debugCreateInitiator;y=y===void 0?null:y;var z=b.customParsers;z=z===void 0?new Map():z;var A=b.videoPlaybackRestrictions;A=A===void 0?[]:A;var B=b.customSegmentTimelineParser;B=B===void 0?null:B;var C=b.customRepresentationParsers;C=C===void 0?{}:C;var D=b.videoAbrManagerFactory;D=D===void 0?null:D;var E=b.seekHandler;E=E===void 0?null:E;var F=b.initialPlaybackPositionForDynamicMpd;F=F===void 0?-20:F;var G=b.liveheadFallBehindBlockThreshold;G=G===void 0?30:G;var H=b.liveheadFallBehindBlockMargin;H=H===void 0?5.9:H;var I=b.startTimeStamp;I=I===void 0?0:I;var J=b.drmProviders;J=J===void 0?[]:J;var K=b.getVideoDimensions;K=K===void 0?null:K;var L=b.setCustomFetchStreamLoggingAttributes;L=L===void 0?null:L;var M=b.bufferEndLimit;M=M===void 0?null:M;var N=b.configureCustomRequestParametersForSegment;N=N===void 0?null:N;var O=b.isClientTriggeredTraceEnabled;O=O===void 0?!1:O;var P=b.enableImmediateQualityDownSwitch;P=P===void 0?!1:P;b=b.userPreferenceLang;b=b===void 0?null:b;e.$Player$p_75="changeType"in SourceBuffer.prototype;e.$Player$p_1=o;e.$Player$p_49=y;o=m.perfLoggerProviders;y=m.observedOperationLoggers;m=m.isOzDevConsoleEnabled;e.$Player$p_17=m||!1;e.$Player$p_16=new(d("oz-player/loggings/OzMultiDestinationPerfLogger").OzMultiDestinationPerfLoggerProvider)(e.$Player$p_78().concat(o));e.$Player$p_2=f;e.$Player$p_4=(m=i)!=null?m:new(c("oz-player/configs/OzPlayerConfig"))((o=j)!=null?o:{});e.$Player$p_12.onError(function(){});e.$Player$p_22=new(c("oz-player/loggings/OzOperationLoggerObserver"))();e.$Player$p_22.observe(y,e.$Player$p_16);e.$Player$p_16.getOperationLogger("player_initialization").setInitiator("player-"+c("oz-player/shims/OzUuid")()).log();e.$Player$p_53=q;e.$Player$p_28=z;e.$Player$p_67=new(c("oz-player/strategies/OzBlockedRepresentationsManager"))(e.$Player$p_4);e.$Player$p_10.addSubscriptions(e.$Player$p_67.onRepresentationBlocked(function(a){e.emit("representationBlocked",a)}));e.$Player$p_31=[e.$Player$p_67,new(c("oz-player/strategies/OzSupportedMimeCodecsRestriction"))()].concat(A);e.$Player$p_75||e.$Player$p_31.push(new(c("oz-player/strategies/OzSingleCodecRestriction"))());e.$Player$p_29=C;e.$Player$p_30=B;e.$Player$p_35=D;e.$Player$p_36=E;e.$Player$p_37=I;e.$Player$p_38=F;e.$Player$p_41=(f=r)!=null?f:function(){return 1};e.$Player$p_39=G;e.$Player$p_42=H;e.$Player$p_66=M;e.$Player$p_69=O;e.$Player$p_71=P;e.$Player$p_47=J;e.$Player$p_63=L;e.$Player$p_3=h;e.$Player$p_7=new(c("oz-player/media_source/MediaSourceManager"))({videoNode:e.$Player$p_3,config:e.$Player$p_4,perfLoggerProvider:e.$Player$p_16,isChangeTypeSupported:e.$Player$p_75,handleVttCaptionsUpdated:function(a){var b;b=(b=e.$Player$p_5.get("caption"))==null?void 0:(b=b.getCurrentRepresentation())==null?void 0:b.getLang();e.emit("vttCaptionsUpdated",a,b)},onClearVideoNodeError:function(){e.$Player$p_79()},onRetryVideoElementError:function(a){e.emit("videoNodeErrorRetry",a)}});e.$Player$p_7.onError(function(a){e.$Player$p_11.emitError(a)});if(e.$Player$p_4.getBool("clear_on_seek")){i=new(c("oz-player/playback_controls/OzClearSourceBufferOnSeekManager"))(e.$Player$p_3,e.$Player$p_4,e.$Player$p_5,e.$Player$p_16);i.maybeOverwriteVideoCurrentTimeProperty();e.$Player$p_10.addSubscriptions(i.onError(e.$Player$p_11.emitError));e.$Player$p_64=i}e.$Player$p_24=p;m=e.$Player$p_24&&e.$Player$p_24.getCachedRepresentations();e.$Player$p_25=m||x;e.$Player$p_65=new(c("oz-player/manifests/OzDynamicVideoLibrary"))({config:e.$Player$p_4});e.$Player$p_44=s;e.$Player$p_45=v;e.$Player$p_46=w;e.$Player$p_68=N;e.$Player$p_77=(j=n)!=null?j:c("oz-player/networks/OzBandwidthEstimator");e.$Player$p_13=new(c("oz-player/networks/OzNetworkManager"))({config:e.$Player$p_4,prefetchCache:e.$Player$p_24,networkRequestStreamHandlers:e.$Player$p_44,getOverrideOzRequestImplementation:e.$Player$p_53,getShouldIncludeCredentials:e.$Player$p_45,getCustomRequestParametersForURI:e.$Player$p_46,networkRequestStreamRetryHandler:t,networkRequestUrlRefreshHandler:u,setCustomFetchStreamLoggingAttributes:e.$Player$p_63,dynamicVideoLibrary:e.$Player$p_65,configureCustomRequestParametersForSegment:e.$Player$p_68,onResourceTimingBufferFull:function(){e.$Player$p_80()},bandwidthEstimator:e.$Player$p_77});e.$Player$p_18=l;e.$Player$p_8=k;e.$Player$p_14=new(c("oz-player/states/OzObservedPlaybackState"))(e.$Player$p_4,e.$Player$p_3,e.$Player$p_16);e.$Player$p_52=K;e.$Player$p_15=new(c("oz-player/streams/OzEndOfStreamWatcher"))(e.$Player$p_7,e.$Player$p_4);e.$Player$p_10.addSubscriptions(e.$Player$p_15.addListener("streamEnd",function(){e.$Player$p_51=!0,e.emit("streamEnd")}));e.$Player$p_50=(o=g)!=null?o:e.$Player$p_81();e.$Player$p_4.getNumber("pixels_below_viewport_to_observe")>0&&(e.$Player$p_61=new(c("oz-player/states/OzPositionToViewport"))(e.$Player$p_3,e.$Player$p_4));e.$Player$p_72=b;e.$Player$p_73=null;e.$Player$p_74={lang:null,role:null};return e}var f=e.prototype;f.$Player$p_80=function(){if(this.$Player$p_70)return;c("oz-player/shims/ozReportUnexpectedError")(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_JAVASCRIPT_NATIVE",description:"ResourceTiming buffer is full"}),"ResourceTiming buffer is full","warn");this.$Player$p_70=!0};f.$Player$p_82=function(a){var b=this;this.$Player$p_83();var c=d("oz-player/loggings/OzLoggingUtils").executeOperationAndLog(this.$Player$p_16.cloneContext().setInitiator(this.$Player$p_49),"parse_manifest",function(e){var f,g,c=b.$Player$p_84(a);f=String((f=c.getCustomField("currentServerTimeMs"))!=null?f:"");g=String((g=c.getCustomField("lastVideoFrameTs"))!=null?g:"");f={currentServerTimeMs:f,ingestLastVideoFrameTs:g,nowMs:String(Date.now())};g=d("oz-player/utils/OzMpdUtils").getMpdLastTimeRange(c,b.$Player$p_4);g=g&&g.endTime!=0?g.endTime:null;e.setLiveheadPosition(g).setLiveheadSeqNumMpd(d("oz-player/utils/OzMpdUtils").getMpdLastSequenceNumber(c)).setManifestType(c.isStaticMpd()?"static":"dynamic").setIsMixedCodecManifest(b.$Player$p_76).setIsTemplatedManifest(Boolean(c.getCustomField("isLiveTemplated"))).setUserInfo(f);return c});this.$Player$p_85(c)};f.$Player$p_85=function(a){var b=this;this.$Player$p_9=i(a);this.$Player$p_4.getBool("player_emit_mpdparsed_early")&&this.emit("mpdParsed",a);this.$Player$p_26=this.$Player$p_86();this.$Player$p_27=this.$Player$p_87();this.$Player$p_67.setAvailableRepresentationsCount(a.getVideoRepresentations().length);if(this.$Player$p_18!=null){var e=new(c("oz-player/parsers/OzMpdUpdater"))(this.$Player$p_4,a,this.$Player$p_13,this.$Player$p_14,this.$Player$p_16,{mpdUrl:null,createXmlParser:this.$Player$p_88,customParsers:this.$Player$p_28,customRepresentationParsers:this.$Player$p_29,customSegmentTimelineParser:this.$Player$p_30},this.$Player$p_48,this.$Player$p_69);this.$Player$p_89(e);this.$Player$p_10.addSubscriptions(e.onError(this.$Player$p_11.emitError),e.addListener("manifestFetchError",function(a){return b.emit("manifestFetchError",a)}),e.addListener("manifestFetchErrorRetry",function(a){return b.emit("manifestFetchErrorRetry",a)}),e.addListener("streamTransitionToStatic",this.$Player$p_90),e.addListener("streamGone",this.$Player$p_91));e.setupUpdateLoop();this.$Player$p_21=e}this.$Player$p_4.getBool("use_live_latency_manager")?!a.isStaticMpd()?(this.$Player$p_40=new(c("oz-player/playback_controls/OzLiveLatencyManager"))({config:this.$Player$p_4,mpd:a,playbackState:this.$Player$p_14,bufferingDetector:this.$Player$p_50,video:this.$Player$p_3,loggerProvider:this.$Player$p_16,getUserSelectedPlaybackRate:this.$Player$p_41}),this.$Player$p_37=this.$Player$p_40.getPreferredLiveHeadLatencySec()*-1):this.$Player$p_37=this.$Player$p_37:this.$Player$p_37=a.isStaticMpd()?this.$Player$p_37:this.$Player$p_92(a);this.$Player$p_19=new(c("oz-player/playback_controls/OzPlayheadManager"))({video:this.$Player$p_3,mpd:a,dynamicVideoLibrary:this.$Player$p_65,playheadCatchup:this.$Player$p_34,playbackState:this.$Player$p_14,config:this.$Player$p_4,perfLoggerProvider:this.$Player$p_16,seekHandler:this.$Player$p_36,initialPlaybackPosition:this.$Player$p_37,canSupportSkipVideobufferGaps:(e=(e=this.$Player$p_64)==null?void 0:e.getCurrentTimePropertyOverwriteSuccess())!=null?e:!1,liveLatencyManager:this.$Player$p_40});this.$Player$p_20=new(c("oz-player/playback_controls/OzPlaybackTimeRangeManager"))({config:this.$Player$p_4,video:this.$Player$p_3,mpd:a,liveheadFallBehindBlockThreshold:this.$Player$p_39,liveheadFallBehindBlockMargin:this.$Player$p_42,playbackState:this.$Player$p_14,perfLoggerProvider:this.$Player$p_16});this.$Player$p_93()["catch"](function(a){var e=d("oz-player/utils/OzErrorUtils").isOzError(a)?a:null;b.$Player$p_11.emitError(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_INITIALIZATION",description:"Failed to setup streams: "+String(a),extra:babelHelpers["extends"]({},e==null?void 0:e.getExtra(),{originalError:a,code:c("oz-player/utils/OzCustomErrorCode").SETUP_STREAMS_PROMISE_REJECTION.toString()})}))});this.emit("mpdReady",a)};f.load=function(a){var b=this;this.$Player$p_18=a;try{var c=this.$Player$p_8;c!=null?this.$Player$p_82(c):a!=null?this.$Player$p_94(a).then(function(a){if(b.$Player$p_60){b.$Player$p_60=!1;b.load(b.$Player$p_18);return}b.$Player$p_8=a;b.$Player$p_54=0;b.$Player$p_82(a)})["catch"](function(c){if(b.$Player$p_60){b.$Player$p_60=!1;b.load(b.$Player$p_18);return}var e=d("oz-player/utils/OzErrorUtils").isOzError(c)?c:null;e=d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_INITIALIZATION",description:"Failed to setup player with fetched MPD: "+String(c),extra:babelHelpers["extends"]({},e==null?void 0:e.getExtra(),{originalError:c,url:a})});b.$Player$p_95(e,a)}):this.$Player$p_11.emitError(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_INITIALIZATION",description:"Cannot start Oz without a raw mpd xml or mpd url"}))}catch(a){c=d("oz-player/utils/OzErrorUtils").isOzError(a)?a:null;this.$Player$p_11.emitError(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_INITIALIZATION",description:"Failed to setup player: "+String(a),extra:babelHelpers["extends"]({},c==null?void 0:c.getExtra(),{originalError:a})}))}};f.$Player$p_92=function(a){var b;b=(b=a.getVideoRepresentations()[0].getMaxGopSec())!=null?b:0;a=(a=a.getVideoRepresentations()[0].getEndingSegment())==null?void 0:a.getTimeRange();a=a!=null?a.endTime-a.startTime:0;a>0&&(b=a);return Math.min(this.$Player$p_38+this.$Player$p_4.getNumber("dynamic_mpd_initial_playback_position_offset_modifier"),-1*b*this.$Player$p_4.getNumber("pdash_download_cursor_catchup_threshold_gop_multiplier"))};f.$Player$p_94=function(a){this.$Player$p_54++;a=this.$Player$p_13.requestRawUrl({debugName:"OzPlayer/fetchMpdXml/mpd",url:a,options:null,loggerProvider:this.$Player$p_16});a=a.getStream().getReader();return d("oz-player/utils/OzReadableStreamUtils").pumpString(a)};f.$Player$p_96=function(){this.$Player$p_55!=null&&(c("oz-player/shims/ozClearTimeout")(this.$Player$p_55),this.$Player$p_55=null)};f.$Player$p_95=function(a,b){var d=this,e=!0,f=this.$Player$p_54-1,g=a.getExtra().code;this.$Player$p_56!==g?(this.$Player$p_56=g,this.$Player$p_57=1):this.$Player$p_57++;var h=function(){e=!1};g={endStream:function(){h(),d.$Player$p_51=!0,d.emit("streamGoneBeforeStart")},consecutiveFailuresForErrorCode:this.$Player$p_57,error:a,isInitialRequest:!0,retry:function(a){h(),d.$Player$p_96(),d.$Player$p_55=c("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){d.$Player$p_96(),d.load(b)},(a==null?void 0:a.waitMs)!=null?a==null?void 0:a.waitMs:1e3)},retryAttemptCount:f};this.$Player$p_4.getNumber("initial_manifest_request_retry_count")>0&&this.emit("manifestFetchError",g);e&&this.$Player$p_11.emitError(a)};f.updatePlayerRunTimeConfig=function(a){var b=a.manifestUrl,c=a.audioStreamDataHandler,d=a.videoStreamDataHandler,e=a.applicationStreamDataHandler;a=a.resetStreamAnchor;if(d!==void 0){var f=this.$Player$p_5.get("video");f&&f.updateRunTimeConfigs({streamDataHandler:d})}if(a!==void 0){f=this.$Player$p_5.get("video");f&&f.updateRunTimeConfigs({resetStreamAnchor:a});d=this.$Player$p_5.get("audio");d&&d.updateRunTimeConfigs({resetStreamAnchor:a});(f=this.$Player$p_19)==null?void 0:f.resetCurrentTime()}if(c!==void 0){d=this.$Player$p_5.get("audio");d&&d.updateRunTimeConfigs({streamDataHandler:c})}if(e!==void 0){f=this.$Player$p_5.get("caption");f&&f.updateRunTimeConfigs({streamDataHandler:e,resetStreamAnchor:a})}b!=null&&b!==""&&this.$Player$p_97(b)};f.$Player$p_98=function(a,b){var c=this,e=a.getMimeCodecs();e=this.$Player$p_7.createSourceBufferManager(b+"/"+a.getMimeType()+"/"+a.getCodecs(),e,b,a.getInitSegment().getData());this.$Player$p_99(e,b,a);a=e.then(function(a){c.$Player$p_50&&b!=="caption"&&c.$Player$p_50.setSourceBufferState(b,a.getSourceBufferState());return a});d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(a,this.$Player$p_16,"source_attach",function(a){a.setType(b)});return a.then(function(a){if(b!=="caption"){var d;(d=c.$Player$p_19)==null?void 0:d.observeSourceBufferState(a.getSourceBufferState(),b)}})};f.isDrm=function(){var a=this.$Player$p_48;if(a!=null){a=a.hasContentProtections();return a!=null?a:!1}return!1};f.$Player$p_83=function(){var a=this.$Player$p_47;if(a.length>0){var b=this.$Player$p_48=new(d("oz-player/drm/OzDrmManager").OzDrmManager)(this.$Player$p_16,this.$Player$p_3,{maxStartEMEAttempts:this.$Player$p_4.getNumber("max_start_eme_attempts"),throwNoLicenseError:!0});a.forEach(function(a){b.addProvider(a)});this.$Player$p_10.addSubscriptions(b.onError(this.$Player$p_11.emitError))}};f.$Player$p_100=function(a){var b=this,d=i(this.$Player$p_9);a=[this.$Player$p_4,a,this.$Player$p_101(),this.$Player$p_31,this.$Player$p_14,window.devicePixelRatio||1,function(){return b.$Player$p_102()},d.isStaticMpd()?"static":"dynamic",this.$Player$p_16];d=this.$Player$p_35&&this.$Player$p_35.apply(this,a);return(d=d)!=null?d:babelHelpers.construct(c("oz-player/strategies/OzAbrManager"),a)};f.$Player$p_103=function(a){return a==="caption"?!0:!1};f.$Player$p_99=function(a,b,e){var f=this,g=i(this.$Player$p_9),h=this.$Player$p_6.get(b),j=new(c("oz-player/streams/OzMediaStream"))({config:this.$Player$p_4,sourceBufferManagerPromise:a,networkManager:this.$Player$p_13,playbackState:this.$Player$p_14,endOfStreamWatcher:b!=="caption"?this.$Player$p_15:null,bufferTargetCalculator:this.$Player$p_104(b),priorityCalculator:this.$Player$p_105(),streamSegmentsCountCalculator:this.$Player$p_106(b),abrManager:h,representation:e,loggerProvider:this.$Player$p_16.cloneContext().setType(b),segmentLocator:this.$Player$p_62,setCustomFetchStreamLoggingAttributes:this.$Player$p_63,blockedRepresentationsManager:this.$Player$p_67,dynamicVideoLibrary:this.$Player$p_65,shouldAppendOncePerStream:this.$Player$p_103(b),mediaStreamType:b,warningEmitter:this.$Player$p_12,mpd:g});this.$Player$p_37===0?j.start():(i(this.$Player$p_9),this.$Player$p_19&&this.$Player$p_10.addSubscriptions(this.$Player$p_19.addListener("initialPlaybackPositionSet",function(){j.start()})));this.$Player$p_10.addSubscriptions(j.onError(this.$Player$p_11.emitError));this.$Player$p_23&&this.$Player$p_10.addSubscriptions(this.$Player$p_23.listenToMediaStreamInitAppended(j));b==="video"&&(this.$Player$p_33=new(c("oz-player/streams/OzHandleUserRepresentationSwitch"))(this.$Player$p_4,this.$Player$p_14,d("oz-player/utils/OzPlaybackRestrictionsUtils").applyVideoPlaybackRestrictions(this.$Player$p_31,this.$Player$p_102(),this.$Player$p_101()),j,a,this.$Player$p_71),this.$Player$p_10.addSubscriptions(this.$Player$p_33.onError(this.$Player$p_11.emitError)));this.$Player$p_5.set(b,j);this.$Player$p_10.addSubscriptions(j.addListener("switchRepresentation",function(){var c,a=j.getCurrentRepresentation();(c=f.$Player$p_23)==null?void 0:c.setTimeRangeProvider(a);(c=f.$Player$p_19)==null?void 0:c.setTimeRangeProvider(a);(c=f.$Player$p_20)==null?void 0:c.setTimeRangeProvider(a);b==="video"&&f.emit("switchVideoRepresentation")}),j.addListener("SegmentAppended",function(a){f.$Player$p_107("SegmentAppended",a)}),j.addListener("streamError",function(a){f.emit("streamError",a)}),j.addListener("streamErrorRetry",function(a){f.emit("streamErrorRetry",a)}))};f.$Player$p_108=function(){if(this.$Player$p_66!=null)return[new(c("oz-player/strategies/OzBufferEndLimitStrategy"))(this.$Player$p_3,this.$Player$p_66)];else return[new(c("oz-player/strategies/OzStaleManifestBufferTargetStrategy"))(i(this.$Player$p_9),this.$Player$p_4),new(c("oz-player/strategies/OzStartupBufferTargetStrategy"))(this.$Player$p_14,this.$Player$p_4),new(c("oz-player/strategies/OzBufferAheadTargetStrategy"))(this.$Player$p_4)]};f.$Player$p_109=function(){return this.$Player$p_66==null?[new(c("oz-player/strategies/OzBufferTargetCalculatorQuotaExceededConstraint"))({config:this.$Player$p_4,minimumBufferTargetSec:this.$Player$p_4.getNumber("buffer_target_constraint_minimum_sec")})]:[]};f.$Player$p_110=function(){return this.$Player$p_66==null?[new(c("oz-player/strategies/OzBufferTargetCalculatorQuotaExceededConstraint"))({config:this.$Player$p_4,minimumBufferTargetSec:0})]:[]};f.$Player$p_86=function(){return new(c("oz-player/strategies/OzBufferTargetCalculator"))(this.$Player$p_108(),this.$Player$p_109())};f.$Player$p_87=function(){return this.$Player$p_1!=null?new(c("oz-player/strategies/OzBufferTargetCalculator"))([].concat(this.$Player$p_1,this.$Player$p_108()),this.$Player$p_110()):this.$Player$p_86()};f.$Player$p_104=function(a){var b=a==="caption"?this.$Player$p_27:this.$Player$p_26;b||c("oz-player/shims/ozvariant")(0,76764,a);return b};f.$Player$p_89=function(a){var b=this;if(this.$Player$p_4.getNumber("stream_interrupt_check_mpd_stale_count_threshold")>0){var d=this.$Player$p_50,e=new(c("oz-player/strategies/OzPlayheadAtInterruptionDetector"))(this.$Player$p_3,d);this.$Player$p_10.addSubscriptions(e.addListener("playheadAtInterruption",function(a){b.$Player$p_16.getOperationLogger("stream_interrupted").log(),b.emit("streamInterruptAt",a)}),a.addListener("streamInterruptAt",function(a){var c;(c=b.$Player$p_50)==null?void 0:c.notifyStreamInterrupted();e.notifyStreamInterrupted(a)}),a.addListener("streamResumedAt",function(a){var c;b.$Player$p_16.getOperationLogger("stream_resumed").log();(c=b.$Player$p_50)==null?void 0:c.notifyStreamResumed();e.notifyStreamResumed();b.emit("streamResumedAt",a)}));this.$Player$p_32=e}};f.$Player$p_105=function(){var a=[new(c("oz-player/strategies/OzPlayingStatePriorityStrategy"))(this.$Player$p_14),new(c("oz-player/strategies/OzBufferAheadPriorityStrategy"))(this.$Player$p_4,this.$Player$p_14)].concat(this.$Player$p_4.getNumber("pixels_below_viewport_to_observe")>0&&this.$Player$p_61!=null?new(c("oz-player/strategies/OzPositionToViewportPriorityStrategy"))(this.$Player$p_61,this.$Player$p_4):[]);return new(c("oz-player/strategies/OzPriorityCalculator"))(a)};f.$Player$p_106=function(a){var b=[new(c("oz-player/strategies/OzStaticStreamSegmentsStrategy"))(this.$Player$p_4),new(c("oz-player/strategies/OzBufferTargetBoundedStreamSegmentsCountStrategy"))(this.$Player$p_104(a),this.$Player$p_4)];this.$Player$p_4.getNumber("paused_stream_segments_count")!==0&&b.push(new(c("oz-player/strategies/OzPausedStreamSegmentsCountStrategy"))(this.$Player$p_14,this.$Player$p_4));a==="video"&&b.push(new(c("oz-player/strategies/OzBandwidthBoundaryStreamSegmentsCountStrategy"))(this.$Player$p_4,this.$Player$p_101()));return new(c("oz-player/strategies/OzStreamSegmentsCountCalculator"))(b)};f.onError=function(a){return this.$Player$p_11.onError(a)};f.onWarning=function(a){return this.$Player$p_12.onError(a)};f.getSelectedVideoQuality=function(){var a=this.$Player$p_9;if(!a||this.$Player$p_2)return null;a=this.$Player$p_5.get("video");a=a&&a.getCurrentRepresentation();if(a instanceof c("oz-player/manifests/OzVideoRepresentation"))return a.getDisplayLabel();a=this.$Player$p_101();a=a[0];return a?a.getDisplayLabel():null};f.getTargetAudioTrack=function(){var a=this.$Player$p_9;if(!a)return null;a=this.$Player$p_5.get("audio");a=a&&a.getCurrentRepresentation();if(a){var b;return{id:a.getID(),displayLabel:a.getDisplayLabel(),lang:(b=a.getLang())!=null?b:null,role:a.getRole(),mimeCodecs:a.getMimeCodecs(),variantKey:a.getVariantKey()}}b=this.$Player$p_111();a=b[0];return a?a.getAudioTrack():null};f.getCurrentPlayingVideoVariant=function(){return this.$Player$p_73};f.getTargetVideoVariant=function(){return this.$Player$p_74};f.switchToVideoQuality=function(a){var b=this.$Player$p_101().find(function(b){return b.getDisplayLabel()===a});if(b){var c=this.$Player$p_5.get("video");c&&(c.switchRepresentation(b),c.disableAdaptation())}};f.switchToVideoVariant=function(a){this.$Player$p_74=a===null?{lang:null,role:null}:a;if(this.$Player$p_74.lang===((a=(a=this.$Player$p_73)==null?void 0:a.lang)!=null?a:null)&&this.$Player$p_74.role===((a=(a=this.$Player$p_73)==null?void 0:a.role)!=null?a:null)){c("oz-player/shims/ozReportUnexpectedError")(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SWITCH_VARIANT",description:"switchToVideoVariant switch to the same lang: "+((a=this.$Player$p_74.lang)!=null?a:"default lang")+", same role: "+((a=this.$Player$p_74.role)!=null?a:"default role")}),"switchToVideoVariant switch to the same lang: "+((a=this.$Player$p_74.lang)!=null?a:"default lang")+", same role: "+((a=this.$Player$p_74.role)!=null?a:"default role"),"warn");return}else if(!this.$Player$p_9){c("oz-player/shims/ozReportUnexpectedError")(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SWITCH_VARIANT",description:"switchToVideoVariant mpd is void"}),"switchToVideoVariant mpd is void","warn");return}else if(!this.$Player$p_112(this.$Player$p_74.lang)){c("oz-player/shims/ozReportUnexpectedError")(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SWITCH_VARIANT",description:"switchToVideoVariant lang not exist in mpd: "+((a=this.$Player$p_74.lang)!=null?a:"default lang")+", same role: "+((a=this.$Player$p_74.role)!=null?a:"default role")}),"switchToVideoVariant lang not exist in mpd: "+((a=this.$Player$p_74.lang)!=null?a:"default lang")+", same role: "+((a=this.$Player$p_74.role)!=null?a:"default role"),"warn");return}this.$Player$p_113();this.$Player$p_4.getBool("enable_lip_sync_abr_select_quality")&&this.$Player$p_4.getBool("enable_alternative_audio_tracks")&&this.$Player$p_75&&this.$Player$p_114();this.$Player$p_73=this.$Player$p_74};f.$Player$p_113=function(){var a=this.$Player$p_111()[0];if(a){var b=this.$Player$p_5.get("audio");b&&(b.switchRepresentation(a,[0,this.$Player$p_14.getDuration()]),b.disableAdaptation())}};f.$Player$p_114=function(){var a=this.$Player$p_5.get("video");if(!a)return;var b=a.getCurrentRepresentation();if(b.getLang()===this.$Player$p_74.lang&&b.getRole()===this.$Player$p_74.role)return;b=this.$Player$p_101();if(b.length===0){c("oz-player/shims/ozReportUnexpectedError")(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SWITCH_VARIANT",description:"switchVideoByTargetVariant no representations with target variant: "+JSON.stringify(this.$Player$p_74)}),"switchVideoByTargetVariant no representations with target variant: "+JSON.stringify(this.$Player$p_74),"warn");return}var e=this.$Player$p_6.get("video");e?(e.updateRepresentations(b),e=e.getBestRepresentation()):e=b[0];if(!e){c("oz-player/shims/ozReportUnexpectedError")(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SWITCH_VARIANT",description:"switchVideoByTargetVariant unable to update representations given target variant: "+JSON.stringify(this.$Player$p_74)}),"switchVideoByTargetVariant unable to update representations given target variant: "+JSON.stringify(this.$Player$p_74));return}a.switchRepresentation(e,[0,this.$Player$p_14.getDuration()]);return};f.getIsVideoQualityAdaptationEnabled=function(){var a=this.$Player$p_5.get("video");return a?a.getIsAdaptationEnabled():!1};f.enableVideoQualityAdaptation=function(){var a=this.$Player$p_5.get("video");a&&a.enableAdaptation()};f.getVideoQualities=function(){var a=this,b=this.$Player$p_9;if(!b)return[];b=this.$Player$p_101().filter(function(b){var c;return!((c=a.$Player$p_67)==null?void 0:c.isBlocked(b.getID()))});var c=b.some(function(a){return d("oz-player/utils/OzMimeUtil").getParsedCodecFamily(a.getCodecs())===j}),e=b.some(function(a){return d("oz-player/utils/OzMimeUtil").getParsedCodecFamily(a.getCodecs())===k});c=c?b.filter(function(a){return d("oz-player/utils/OzMimeUtil").getParsedCodecFamily(a.getCodecs())===j}):e?b.filter(function(a){return d("oz-player/utils/OzMimeUtil").getParsedCodecFamily(a.getCodecs())===k}):b.filter(function(a){return d("oz-player/utils/OzMimeUtil").getParsedCodecFamily(a.getCodecs())===l});return c.sort(function(a,b){return a.getBandwidth()-b.getBandwidth()}).map(function(a){return a.getDisplayLabel()})};f.getVideoTracks=function(){var a=this,b=this.$Player$p_9;return!b?[]:this.$Player$p_101().filter(function(b){var c;return!((c=a.$Player$p_67)==null?void 0:c.isBlocked(b.getID()))}).map(function(a){return{mimeCodecs:a.getMimeCodecs(),codec:a.getCodecs(),codecFamily:d("oz-player/utils/OzMimeUtil").getParsedCodecFamily(a.getMimeCodecs()),displayLabel:a.getDisplayLabel(),qualityLabel:a.getDisplayLabel(),height:a.getHeight(),id:a.getID(),qualityScoreCurveString:a.getQualityScoreCurveString("csvqm"),width:a.getWidth(),lang:a.getLang(),role:a.getRole(),variantKey:a.getVariantKey()}})};f.getAudioTracks=function(){var a=this,b=this.$Player$p_9;return!b?[]:b.getAudioRepresentations().filter(function(b){var c;return!((c=a.$Player$p_67)==null?void 0:c.isBlocked(b.getID()))}).map(function(a){return a.getAudioTrack()})};f.setEnableLiveheadCatchup=function(a){if(this.$Player$p_20){var b;a?this.$Player$p_16.getOperationLogger("live_catchup_enabled").setIsLatencyCachupEnabled(!0).log():this.$Player$p_16.getOperationLogger("live_catchup_disabled").setIsLatencyCachupEnabled(!1).log();(b=this.$Player$p_20)==null?void 0:b.setTimelineBlockingEnabled(a)}this.$Player$p_5.forEach(function(b){b.setEnableLiveheadCatchup(a)});(b=this.$Player$p_19)==null?void 0:b.setEnableLiveheadCatchup(a)};f.$Player$p_93=function(){var a=this;if(this.$Player$p_4.getBool("enable_alternative_audio_tracks")&&this.$Player$p_112(this.$Player$p_72)){var c;this.$Player$p_74=babelHelpers["extends"]({},this.$Player$p_74,{lang:(c=this.$Player$p_72)!=null?c:null,role:this.$Player$p_72!=null?"dub":null})}c=this.$Player$p_101()[0];this.$Player$p_62=c&&c.canPredict()&&this.$Player$p_4.getBool("pdash_use_pdash_segmentlocator")||c&&c.canApproximateId()?new(d("oz-player/streams/OzPredictedSegmentLocator").OzPredictedSegmentLocator)({videoNode:this.$Player$p_3,liveLatencyManager:this.$Player$p_40,loggerProvider:this.$Player$p_16,dynamicVideoLibrary:this.$Player$p_65}):null;c=this.$Player$p_2?[this.$Player$p_115({liveConfigsFromAudioStream:!0}),this.$Player$p_116()]:[this.$Player$p_117(),this.$Player$p_115({liveConfigsFromAudioStream:!1}),this.$Player$p_116()];var e=[];return(h||(h=b("Promise"))).all(c).then(function(){var b=a.$Player$p_5.get("video"),c=a.$Player$p_5.get("audio"),d=a.$Player$p_5.get("caption");b&&e.push(b.getCurrentRepresentation());c&&e.push(c.getCurrentRepresentation());d&&e.push(d.getCurrentRepresentation());e.forEach(function(b){a.$Player$p_10.addSubscriptions(b.addUpdateListener(function(){a.$Player$p_107("SegmentIndexesUpdated",e)}))});a.$Player$p_107("InitialSegmentIndexes",e);a.$Player$p_3&&a.$Player$p_3.style&&(a.$Player$p_3.style.display=a.$Player$p_2?"none":"block");a.$Player$p_73=a.$Player$p_74;a.emit("initialized")})};f.$Player$p_118=function(a){if(!a.getTimeRanges().length){this.$Player$p_16.getOperationLogger("playhead_adjustment").setInitiator("setup_initial_duration").setResult("failed").log();return}a=a.getTimeRanges()[a.getTimeRanges().length-1].endTime;this.$Player$p_7.updateDuration(a,!0)};f.$Player$p_119=function(a){var b;this.$Player$p_23=new(c("oz-player/media_source/OzMediaSeekableRangeManager"))(this.$Player$p_7,this.$Player$p_4);this.$Player$p_118(a);(b=this.$Player$p_23)==null?void 0:b.setTimeRangeProvider(a);(b=this.$Player$p_19)==null?void 0:b.setTimeRangeProvider(a);(b=this.$Player$p_20)==null?void 0:b.setTimeRangeProvider(a)};f.$Player$p_117=function(){var a=this.$Player$p_101();if(!a.length)return c("oz-player/shims/OzMaybeNativePromise").reject(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_INITIALIZATION",description:"No video representations in the manifest",extra:{code:c("oz-player/utils/OzCustomErrorCode").SETUP_STREAMS_PROMISE_REJECTION.toString()}}));var b=d("oz-player/utils/OzPlaybackRestrictionsUtils").applyVideoPlaybackRestrictions(this.$Player$p_31,this.$Player$p_102(),a);if(!b.length){a=a.map(function(a){return a.getDisplayLabel()+"@"+a.getWidth()+"x"+a.getHeight()+"("+a.getMimeCodecs()+")"});return c("oz-player/shims/OzMaybeNativePromise").reject(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_INITIALIZATION",description:"Restricted all video representations: "+a.join(", "),extra:{code:c("oz-player/utils/OzCustomErrorCode").SETUP_STREAMS_PROMISE_REJECTION.toString()}}))}this.$Player$p_119(b[0]);a=this.$Player$p_120(b);a&&this.$Player$p_4.getBool("enable_abr_logging")&&this.$Player$p_16.getOperationLogger("video_stream_setup_initial_representation_from_prefetch").setResult("success").setReason("player_initialized").setRepresentationID(a.getID()).setPreviousRepresentationID(null).setUserInfo({initialRepresentationIDs:JSON.stringify(this.$Player$p_25)}).setType("video").setInitiator("Player").log();var e=this.$Player$p_100(a||b[0]);this.$Player$p_6.set("video",e);a||(a=e.getBestRepresentation());return this.$Player$p_98(a||b[0],"video")};f.$Player$p_101=function(){var a=this.$Player$p_9;if(!a)return[];var b=a.getVideoRepresentations();if(this.$Player$p_4.getBool("enable_lip_sync_abr_select_quality")&&this.$Player$p_4.getBool("enable_alternative_audio_tracks")&&this.$Player$p_75){var c=a.getVideoRepresentationsByVariant(this.$Player$p_74);b=c.length>0?c:a.getVideoRepresentationsByVariant({lang:null,role:null})}var e=d("oz-player/utils/OzPlaybackRestrictionsUtils").applyVideoPlaybackRestrictions(this.$Player$p_31,this.$Player$p_102(),b);return b.filter(function(a){return e.includes(a)})};f.$Player$p_111=function(){var a=this.$Player$p_9;if(!a)return[];return this.$Player$p_4.getBool("enable_alternative_audio_tracks")?a.getAudioRepresentationsByVariant(this.$Player$p_74):a.getAudioRepresentations()};f.$Player$p_112=function(a){var b=this.$Player$p_9;if(!b)return!1;var c=b.getAudioRepresentations();if(a==null)return!0;if(this.$Player$p_4.getBool("enable_alternative_audio_tracks")&&b.isStaticMpd()){b=c.findIndex(function(b){return b.getLang()===a});return b>-1}return!1};f.$Player$p_115=function(a){var b=this;a=a.liveConfigsFromAudioStream;a=a===void 0?!1:a;var d=i(this.$Player$p_9),e=d.getAudioRepresentations();a&&this.$Player$p_119(e[0]);a=-1;this.$Player$p_4.getBool("enable_alternative_audio_tracks")&&e.length>1&&d.isStaticMpd()&&(this.$Player$p_72!=null&&(a=e.findIndex(function(a){return a.getLang()===b.$Player$p_72})));if(e.length){d=a>-1?a:e.findIndex(function(a){return a.getLang()==null&&a.getRole()==null});d=d>-1?d:0;return this.$Player$p_98(a>=0&&a<e.length?e[a]:this.$Player$p_121(e)||e[d],"audio")}return c("oz-player/shims/OzMaybeNativePromise").resolve()};f.$Player$p_116=function(){var a=i(this.$Player$p_9);a=a.getApplicationRepresentations();return a.length?this.$Player$p_98(this.$Player$p_122(a)||a[0],"caption"):c("oz-player/shims/OzMaybeNativePromise").resolve()};f.getMpd=function(){return this.$Player$p_9};f.destroy=function(a){var c,d,e=this;a=this.$Player$p_16.getOperationLogger("unload").setInitiator(a).start();(c=this.$Player$p_64)==null?void 0:c.destroy();this.$Player$p_96();this.$Player$p_5.forEach(function(a){a.destroy()});this.$Player$p_33&&(this.$Player$p_33.destroy(),this.$Player$p_33=null);this.$Player$p_5=new Map();this.$Player$p_10.release();this.$Player$p_10.engage();this.$Player$p_14.destroy();this.$Player$p_19&&this.$Player$p_19.destroy();this.$Player$p_40&&(this.$Player$p_40.destroy(),this.$Player$p_40=null);this.$Player$p_20&&(this.$Player$p_20.destroy(),this.$Player$p_20=null);this.$Player$p_48&&this.$Player$p_48.destroy();this.$Player$p_61&&this.$Player$p_61.destroy();this.$Player$p_13&&this.$Player$p_13.destroy();this.$Player$p_52&&(this.$Player$p_52=null);this.$Player$p_7&&this.$Player$p_7.detach();c=(h||(h=b("Promise"))).resolve();this.$Player$p_3.pause();this.$Player$p_4.getBool("enable_revoke_object_url_on_destroy")&&URL.revokeObjectURL(this.$Player$p_3.src);this.$Player$p_3.removeAttribute("src");this.$Player$p_3.removeAttribute("srcObject");"function"===typeof this.$Player$p_3.setMediaKeys&&(c=this.$Player$p_3.setMediaKeys(null));this.$Player$p_21&&this.$Player$p_21.destroy();this.$Player$p_32&&this.$Player$p_32.destroy();this.$Player$p_22.destroy();(d=this.$Player$p_23)==null?void 0:d.destroy();this.$Player$p_50&&this.$Player$p_50.destroy();this.$Player$p_67&&this.$Player$p_67.destroy();a.log();this.emit("destroyed");d=[c];return h.all(d).then(function(){e.$Player$p_3.load()})};f.$Player$p_120=function(a){var b=this,d=a.find(function(a){return b.$Player$p_25.indexOf(a.getID())!==-1});d||(d=c("oz-player/utils/getRepresentationInCache")(a,this.$Player$p_24));return d||null};f.$Player$p_121=function(a){var b=this,e,f=a.find(function(a){return b.$Player$p_25.indexOf(a.getID())!==-1});f||(f=c("oz-player/utils/getRepresentationInCache")(a,this.$Player$p_24));!f&&!((e=this.$Player$p_9)==null?void 0:e.isStaticMpd())&&a.length>1&&(f=d("oz-player/utils/OzIbrUtils").getInitialAudioRepresentation(a,this.$Player$p_4,this.$Player$p_16));return f||null};f.$Player$p_122=function(a){return null};f.$Player$p_84=function(a){var b=new(c("oz-player/parsers/OzMpdParser"))({config:this.$Player$p_4,ozParserContext:{mpdUrl:this.$Player$p_18,createXmlParser:this.$Player$p_88,customParsers:this.$Player$p_28,customRepresentationParsers:this.$Player$p_29,customSegmentTimelineParser:this.$Player$p_30},networkManager:this.$Player$p_13,perfLoggerProvider:this.$Player$p_16,drmManager:this.$Player$p_48,initialRepresentationIDs:this.$Player$p_25,blockedRepresentationsManager:this.$Player$p_67,enableAlternativeAudioTracks:this.$Player$p_4.getBool("enable_alternative_audio_tracks")});a=b.parse(a);this.$Player$p_10.addSubscriptions(b.onError(this.$Player$p_11.emitError));b=d("oz-player/utils/OzPlaybackRestrictionsUtils").applyVideoPlaybackRestrictions(this.$Player$p_31,this.$Player$p_102(),a.getVideoRepresentations());if(b.length>1){var e=d("oz-player/utils/OzMimeUtil").getParsedCodecFamily(b[0].getMimeCodecs());this.$Player$p_76=!b.reduce(function(a,b){return a&&d("oz-player/utils/OzMimeUtil").getParsedCodecFamily(b.getMimeCodecs())===e},!0)}return a};f.$Player$p_78=function(){var a=[];this.$Player$p_17&&a.push(new(d("oz-player/loggings/OzDevConsolePerfLogger").OzDevConsolePerfLoggerProvider)());return a};f.$Player$p_123=function(a,b){b=this.$Player$p_5.get(b);return b?b.getRepresentationIDAtTime(a):null};f.getAudioRepresentationIDAtTime=function(a){return this.$Player$p_123(a,"audio")};f.getVideoRepresentationIDAtTime=function(a){return this.$Player$p_123(a,"video")};f.getCurrentVideoRepresentation=function(){return this.$Player$p_124("video")};f.getCurrentAudioRepresentation=function(){return this.$Player$p_124("audio")};f.getCurrentPlayingAudioTrackID=function(){var a=this.getCurrentAudioRepresentation();return a==null?void 0:a.getID()};f.$Player$p_124=function(a){var b=this.$Player$p_123(this.$Player$p_14.getCurrentTime(),a),c=this.$Player$p_9;if(!c)return null;c=[];a==="audio"?c=this.$Player$p_111():a==="video"&&(c=this.$Player$p_101());return(a=c.find(function(a){return a.getID()===b}))!=null?a:null};f.getSelectedVideoRepresentation=function(){var a=this.$Player$p_5.get("video");return a!=null?a.getCurrentRepresentation():null};f.getSelectedAudioRepresentation=function(){var a=this.$Player$p_5.get("audio");return a!=null?a.getCurrentRepresentation():null};f.getDebug=function(){var a=this,b=this.$Player$p_5.get("video"),c=this.$Player$p_5.get("audio"),d=this.$Player$p_5.get("caption"),e,f,g,h,j,k,l;if(b){var m;e=(m=b.getDebug())==null?void 0:m.MediaStreamAbrManager;f=(m=b.getDebug())==null?void 0:m.SourceBufferManager;if(f){g=(m=f.getDebug())==null?void 0:m.SourceBuffer}}if(c){h=(m=c.getDebug())==null?void 0:m.SourceBufferManager;if(h){j=(m=h.getDebug())==null?void 0:m.SourceBuffer}}if(d){k=(m=d.getDebug())==null?void 0:m.SourceBufferManager;if(k){l=(m=k.getDebug())==null?void 0:m.SourceBuffer}}return{getManifest:function(){return i(a.$Player$p_9)},DashManifestParsed:this.$Player$p_9,VideoSourceStream:b,VideoAbrManager:e,VideoBufferManager:f,VideoSourceBuffer:g,AudioSourceStream:c,AudioBufferManager:h,AudioSourceBuffer:j,CaptionSourceStream:d,CaptionBufferManager:k,CaptionSourceBuffer:l}};f.injectExternalDebugEvent=function(a,b){this.$Player$p_107(a,b)};f.$Player$p_107=function(a,b){this.emit("debug/dashPlayerEvent",{detail:{type:a,event:b}})};f.$Player$p_81=function(){var a=this,b=new(c("oz-player/strategies/OzBufferingDetector"))(this.$Player$p_3,this.$Player$p_4.getLegacyConfig(),function(){return a.$Player$p_51?a.$Player$p_3.duration:Infinity});b.attachPerfLoggerProvider(this.$Player$p_16);this.$Player$p_10.addSubscriptions(b.addListener("enterBuffering",function(b){a.emit("enterBuffering",b)}),b.addListener("leaveBuffering",function(b){a.emit("leaveBuffering",b)}));return b};f.$Player$p_102=function(){var a=this.$Player$p_52?this.$Player$p_52():{width:this.$Player$p_3.offsetWidth,height:this.$Player$p_3.offsetHeight};return a};f.getMpdUrl=function(){return this.$Player$p_18};f.$Player$p_97=function(a){var b=this;this.$Player$p_18=a;var c=this.$Player$p_9;if(!c){this.$Player$p_60=!0;return}else{c.updateLocation(a);this.$Player$p_43&&(this.$Player$p_10.releaseOne(this.$Player$p_43),this.$Player$p_43=null);a=function(){b.$Player$p_43&&(b.$Player$p_10.releaseOne(b.$Player$p_43),b.$Player$p_43=null),b.$Player$p_5.forEach(function(a,d){var e=a.getCurrentRepresentation(),f=e.getDisplayLabel();e=(d==="video"?b.$Player$p_101():c.getAudioRepresentations()).slice();if(d==="video"){d=b.$Player$p_6.get(d);d&&d.updateRepresentations(b.$Player$p_101())}d=e[0];e.forEach(function(a){var b=a.getDisplayLabel();b===f&&(d=a)});a.switchRepresentation(d);a.restartLoopBody()})};this.$Player$p_43=c.addListener("updated",a);this.$Player$p_10.addSubscriptions(this.$Player$p_43)}};f.getPerfLoggerProvider=function(){return this.$Player$p_16};f.getApproximateFBLSToPlayerDisplayLatency=function(){var a,b;a=Number((a=(a=this.$Player$p_9)==null?void 0:a.getCustomField("lastVideoFrameTs"))!=null?a:void 0);b=Number((b=(b=this.$Player$p_9)==null?void 0:b.getCustomField("currentServerTimeMs"))!=null?b:void 0);var c=this.$Player$p_125(a,b);a=this.$Player$p_126(a,b);return{latencyFromClockSync:a,latencyFromMpdUpdate:c}};f.$Player$p_125=function(a,b){if(!this.$Player$p_14.getCurrentTime()||isNaN(a)||isNaN(b))return null;b=0;this.$Player$p_58===a?b=(c("oz-player/shims/OzPerformance").now()-Number(this.$Player$p_59))/1e3:(this.$Player$p_59=c("oz-player/shims/OzPerformance").now(),this.$Player$p_58=a);a=a/1e3+b-this.$Player$p_14.getCurrentTime();return a};f.$Player$p_126=function(a,b){var d;if(!this.$Player$p_14.getCurrentTime()||isNaN(a)||isNaN(b)||c("oz-player/networks/OzClientClock").getClientClockOffsetMs()==null||!c("oz-player/networks/OzClientClock").getClientClockOffsetMs())return null;d=this.$Player$p_14.getCurrentTimeUpdateTime()+((d=c("oz-player/networks/OzClientClock").getClientClockOffsetMs())!=null?d:0);b=b;var e=this.$Player$p_14.getCurrentTime()*1e3;a=a;d=(d-b-(e-a))/1e3;return d};f.$Player$p_79=function(){this.$Player$p_5.forEach(function(a){a.restartLoopBody();var b=a.getCurrentRepresentation();a.switchRepresentation(b)})};return e}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player",["oz-player/Player"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/Player")}),98);
__d("useCometRelayExpiredVideoUrlRefreshHandlerQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="4651571778286726"}),null);
__d("useCometRelayExpiredVideoUrlRefreshHandlerQuery.graphql",["useCometRelayExpiredVideoUrlRefreshHandlerQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"expiredURL"},c={defaultValue:null,kind:"LocalArgument",name:"videoID"},d=[{kind:"Variable",name:"id",variableName:"videoID"}],e={alias:null,args:[{kind:"Variable",name:"expired_url",variableName:"expiredURL"}],concreteType:"RMDRefreshedUrl",kind:"LinkedField",name:"rmd_refreshed_url",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"new_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"reason",storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:[a,c],kind:"Fragment",metadata:null,name:"useCometRelayExpiredVideoUrlRefreshHandlerQuery",selections:[{alias:null,args:d,concreteType:"Video",kind:"LinkedField",name:"video",plural:!1,selections:[e],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[c,a],kind:"Operation",name:"useCometRelayExpiredVideoUrlRefreshHandlerQuery",selections:[{alias:null,args:d,concreteType:"Video",kind:"LinkedField",name:"video",plural:!1,selections:[e,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:b("useCometRelayExpiredVideoUrlRefreshHandlerQuery_facebookRelayOperation"),metadata:{},name:"useCometRelayExpiredVideoUrlRefreshHandlerQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("useCometRelayExpiredVideoUrlRefreshHandler",["CometRelay","handleCometRelayExpiredVideoUrlRefresh","react","react-compiler-runtime","useCometRelayExpiredVideoUrlRefreshHandlerQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i;(i||d("react")).useCallback;function a(a){var e=d("react-compiler-runtime").c(3),f=d("CometRelay").useRelayEnvironment(),g;e[0]!==f||e[1]!==a?(g=function(e){var g=h!==void 0?h:h=b("useCometRelayExpiredVideoUrlRefreshHandlerQuery.graphql");return d("CometRelay").fetchQuery(f,g,{expiredURL:btoa(e),videoID:a}).toPromise().then(function(b){var d;if(c("handleCometRelayExpiredVideoUrlRefresh"))return c("handleCometRelayExpiredVideoUrlRefresh")(a,b);d=(d=b==null?void 0:(d=b.video)==null?void 0:(d=d.rmd_refreshed_url)==null?void 0:d.new_url)!=null?d:null;b=(b=b==null?void 0:(b=b.video)==null?void 0:(b=b.rmd_refreshed_url)==null?void 0:b.reason)!=null?b:null;return{reason:b,refreshedUrl:d}})},e[0]=f,e[1]=a,e[2]=g):g=e[2];return g}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("LexicalContentEditable",["cr:2483"],(function(a,b,c,d,e,f){e.exports=b("cr:2483")}),null);
__d("mlcEditableSubscription",[],(function(a,b,c,d,e,f){"use strict";function a(a){return{initialValueFn:function(){return a.isEditable()},subscribe:function(b){return a.registerEditableListener(b)}}}f["default"]=a}),66);
__d("useCometLexicalSubscription",["react","useUnsafeRef_DEPRECATED"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=i||d("react");var j=b.useLayoutEffect,k=b.useState;function a(a){var b=(h||(h=c("useUnsafeRef_DEPRECATED")))(a.initialValueFn()),d=k(b.current),e=d[0],f=d[1];j(function(){var c=a.initialValueFn,d=a.subscribe;c=c();b.current!==c&&(b.current=c,f(c));return d(function(a){b.current=a,f(a)})},[a]);return e}g["default"]=a}),98);
__d("CometLexicalContentEditable.react",["CometLexicalContentEditableCommands","Lexical","LexicalComposerContext","LexicalContentEditable","mlcEditableSubscription","react","react-compiler-runtime","stylex","useCometLexicalSubscription"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));b=i;var k=b.useEffect,l=b.useLayoutEffect;b.useMemo;var m=b.useState,n={editor:{color:"xzsf02u",outline:"x1a2a7pz",position:"x1n2onr6",textAlign:"x14wi4xw",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(52),e,f,g,i,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C;b[0]!==a?(e=a.ariaAutoComplete,f=a.ariaDescribedBy,g=a.ariaExpanded,i=a.ariaLabel,o=a.ariaLabelledBy,p=a.ariaMultiline,q=a.ariaOwneeID,r=a.ariaRequired,s=a.autoCapitalize,t=a.autoComplete,u=a.autoCorrect,v=a.contentEditableRef,x=a.isInitiallyFocused,y=a.role,z=a.spellCheck,A=a.tabIndex,B=a.webDriverTestID,C=a.xstyle,w=babelHelpers.objectWithoutPropertiesLoose(a,["ariaAutoComplete","ariaDescribedBy","ariaExpanded","ariaLabel","ariaLabelledBy","ariaMultiline","ariaOwneeID","ariaRequired","autoCapitalize","autoComplete","autoCorrect","contentEditableRef","isInitiallyFocused","role","spellCheck","tabIndex","webDriverTestID","xstyle"]),b[0]=a,b[1]=e,b[2]=f,b[3]=g,b[4]=i,b[5]=o,b[6]=p,b[7]=q,b[8]=r,b[9]=s,b[10]=t,b[11]=u,b[12]=v,b[13]=w,b[14]=x,b[15]=y,b[16]=z,b[17]=A,b[18]=B,b[19]=C):(e=b[1],f=b[2],g=b[3],i=b[4],o=b[5],p=b[6],q=b[7],r=b[8],s=b[9],t=b[10],u=b[11],v=b[12],w=b[13],x=b[14],y=b[15],z=b[16],A=b[17],B=b[18],C=b[19]);var D=x===void 0?!1:x;a=y===void 0?"textbox":y;x=z===void 0?!1:z;y=d("LexicalComposerContext").useLexicalComposerContext();var E=y[0];z=m(void 0);y=z[0];var F=z[1];z=m(void 0);var G=z[0],H=z[1];b[20]!==E?(z=c("mlcEditableSubscription")(E),b[20]=E,b[21]=z):z=b[21];z=z;z=c("useCometLexicalSubscription")(z);var I,J;b[22]!==E?(I=function(){return E.registerCommand(d("CometLexicalContentEditableCommands").COMET_LEXICAL_ARIA_COMMAND,function(a){Object.prototype.hasOwnProperty.call(a,"activeDescendantID")&&F(a.activeDescendantID);Object.prototype.hasOwnProperty.call(a,"controlsID")&&H(a.controlsID);return!1},d("Lexical").COMMAND_PRIORITY_EDITOR)},J=[E],b[22]=E,b[23]=I,b[24]=J):(I=b[23],J=b[24]);l(I,J);b[25]!==E||b[26]!==D?(I=function(){D&&E.focus(function(){var a=document.activeElement,b=E.getRootElement();(!(b==null?void 0:b.contains(a))||b!=null||a==null)&&(b==null?void 0:b.focus({preventScroll:!0}))})},J=[E,D],b[25]=E,b[26]=D,b[27]=I,b[28]=J):(I=b[27],J=b[28]);k(I,J);J=(I=y)!=null?I:void 0;I=(y=G)!=null?y:void 0;if(b[29]!==i){G=(y=(G=i)==null?void 0:G.toString())!=null?y:void 0;b[29]=i;b[30]=G}else G=b[30];i=(y=r)!=null?y:void 0;r=(h||(h=c("stylex")))(n.editor,C)+" "+(z?"notranslate":"");b[31]!==e||b[32]!==f||b[33]!==g||b[34]!==o||b[35]!==p||b[36]!==q||b[37]!==s||b[38]!==t||b[39]!==u||b[40]!==v||b[41]!==w||b[42]!==a||b[43]!==x||b[44]!==J||b[45]!==I||b[46]!==G||b[47]!==i||b[48]!==r||b[49]!==A||b[50]!==B?(y=j.jsx(d("LexicalContentEditable").ContentEditable,babelHelpers["extends"]({ariaActiveDescendant:J,ariaAutoComplete:e,ariaControls:I,ariaDescribedBy:f,ariaExpanded:g,ariaLabel:G,ariaLabelledBy:o,ariaMultiline:p,ariaOwns:q,ariaRequired:i,autoCapitalize:s,autoComplete:t,autoCorrect:u,className:r,"data-testid":void 0,ref:v,role:a,spellCheck:x,suppressContentEditableWarning:!0,tabIndex:A},w)),b[31]=e,b[32]=f,b[33]=g,b[34]=o,b[35]=p,b[36]=q,b[37]=s,b[38]=t,b[39]=u,b[40]=v,b[41]=w,b[42]=a,b[43]=x,b[44]=J,b[45]=I,b[46]=G,b[47]=i,b[48]=r,b[49]=A,b[50]=B,b[51]=y):y=b[51];return y}g["default"]=a}),98);
__d("CometLexicalDelightNode",["CometLexicalEntityTextNode"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);a.getType=function(){return"delight"};a.clone=function(b){return new a(b.__text,b.__styles,b.__campaignID,b.__delightAsset,b.__key)};a.importJSON=function(a){return i(a.text,a.styles,a.campaignID,a.delightAsset)};var c=a.prototype;c.exportJSON=function(){return babelHelpers["extends"]({},b.prototype.exportJSON.call(this),{campaignID:this.__campaignID,delightAsset:this.__delightAsset,styles:this.__styles,type:"delight",version:1})};function a(a,c,d,e,f){a=b.call(this,a,f)||this;a.__entityType="TextDelightCampaign";a.__styles=c;a.__campaignID=d;a.__delightAsset=e;return a}c.createDOM=function(a){a=b.prototype.createDOM.call(this,a);var c=this.__delightAsset.id,d=this.__styles,e=d.color;d=d["font-weight"];c!=null&&a.setAttribute("data-delight-asset",c);a.setAttribute("data-delight","true");e!=null&&d!=null&&(a.style.color=e,a.style.fontWeight=d);return a};c.getEntity=function(){return{__UFI__:!0,id:this.__campaignID,isWeak:!1,type:this.__entityType}};c.canInsertTextBefore=function(){return!1};c.canInsertTextAfter=function(){return!1};return a}(d("CometLexicalEntityTextNode").CometLexicalEntityTextNode);function i(a,b,c,d){return new h(a,b,c,d)}function a(a){return a instanceof h}g.CometLexicalDelightNode=h;g.$createLexicalDelightNode=i;g.$isLexicalDelightNode=a}),98);
__d("CometStickerPickerCardQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="6475307285918002"}),null);
__d("CometStickerPickerCardQuery$Parameters",["CometStickerPickerCardQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("CometStickerPickerCardQuery_facebookRelayOperation"),metadata:{},name:"CometStickerPickerCardQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("CometStickerPickerStickerSearchCard.entrypoint",["CometStickerPickerFlyoutTagSelectorRoot.entrypoint","JSResourceForInteraction","NestedRelayEntryPointBuilderUtils"],(function(a,b,c,d,e,f,g){"use strict";a=c("JSResourceForInteraction")("CometStickerPickerStickerSearchCard.react").__setRef("CometStickerPickerStickerSearchCard.entrypoint");b={getPreloadProps:function(a){var b=a.flyoutTagsCount,e=a.flyoutTagsCursor;a=a.stickerInterface;b={count:b,cursor:e};return{entryPoints:{flyoutTagSelectorEntrypointReference:d("NestedRelayEntryPointBuilderUtils").NestedRelayEntryPoint({entryPoint:c("CometStickerPickerFlyoutTagSelectorRoot.entrypoint"),entryPointParams:b})},extraProps:{stickerInterface:a}}},root:a};g["default"]=b}),98);
__d("CometStickerPickerCard.entrypoint",["CometStickerPickerCardQuery$Parameters","CometStickerPickerStickerSearchCard.entrypoint","JSResourceForInteraction","NestedRelayEntryPointBuilderUtils","WebPixelRatio"],(function(a,b,c,d,e,f,g){"use strict";a=c("JSResourceForInteraction")("CometStickerPickerCard.react").__setRef("CometStickerPickerCard.entrypoint");b={getPreloadProps:function(a){var b=a.feedbackID,e=a.stickerInterface;a=babelHelpers.objectWithoutPropertiesLoose(a,["feedbackID","stickerInterface"]);a=babelHelpers["extends"]({},a,{stickerInterface:e});a;return{entryPoints:{stickerSearchEntrypointReference:d("NestedRelayEntryPointBuilderUtils").NestedRelayEntryPoint({entryPoint:c("CometStickerPickerStickerSearchCard.entrypoint"),entryPointParams:a})},extraProps:{feedbackTargetID:b,stickerInterface:e},queries:{stickerPickerQueryReference:{parameters:c("CometStickerPickerCardQuery$Parameters"),variables:{feedbackID:b,scale:d("WebPixelRatio").get(),stickerInterface:e}}}}},root:a};g["default"]=b}),98);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @fullSyntaxTransform
 * @generated SignedSource<<300617df2d010988ecee742037d433b0>>
 * @noflow
 * @nolint
 * @oncall lexical_web_text_editor
 * @preserve-invariant-messages
 * @preserve-whitespace
 * @preventMunge
 */__d("Lexical.prod",["Promise"],(function $module_Lexical_prod(global,require,requireDynamic,requireLazy,module,exports){

'use strict';var _require_closure_Promise;var aa={},da={},ea={},fa={},ha={},ia={},ja={},ka={},la={},oa={},pa={},qa={},sa={},ta={},ua={},va={},wa={},xa={},ya={},za={},Aa={},Ba={},Da={},Ea={},Fa={},Ga={},Ha={},Ka={},La={},Ma={},Na={},Oa={},Pa={},Qa={},Ra={},Sa={},Ta="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ua=Ta&&"documentMode"in document?document.documentMode:null,p=Ta&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),Va=Ta&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),
Wa=Ta&&"InputEvent"in window&&!Ua?"getTargetRanges"in new window.InputEvent("input"):!1,Xa=Ta&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),Ya=Ta&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Za=Ta&&/Android/.test(navigator.userAgent),$a=Ta&&/^(?=.*Chrome).*/i.test(navigator.userAgent),ab=Ta&&Za&&$a,cb=Ta&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!$a,db=Xa||Ya||cb?"\u00a0":"\u200b",eb=Va?"\u00a0":db,fb=/^[^A-Za-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02b8\u0300-\u0590\u0800-\u1fff\u200e\u2c00-\ufb1c\ufe00-\ufe6f\ufefd-\uffff]*[\u0591-\u07ff\ufb1d-\ufdfd\ufe70-\ufefc]/,
gb=/^[^\u0591-\u07ff\ufb1d-\ufdfd\ufe70-\ufefc]*[A-Za-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02b8\u0300-\u0590\u0800-\u1fff\u200e\u2c00-\ufb1c\ufe00-\ufe6f\ufefd-\uffff]/,hb={bold:1,code:16,highlight:128,italic:2,strikethrough:4,subscript:32,superscript:64,underline:8},ib={directionless:1,unmergeable:2},jb={center:2,end:6,justify:4,left:1,right:3,start:5},kb={2:"center",6:"end",4:"justify",1:"left",3:"right",5:"start"},lb={normal:0,segmented:2,token:1},mb={0:"normal",2:"segmented",1:"token"};
var r;function nb(a){var b=new URLSearchParams();b.append("code",a);for(var c=1;c<arguments.length;c++){b.append("v",arguments[c]);}throw Error("Minified Lexical error #"+a+"; visit https://lexical.dev/docs/error?"+b+" for the full message or "+"use the non-minified dev environment for full errors and additional helpful warnings.");}r=nb&&nb.__esModule&&Object.prototype.hasOwnProperty.call(nb,"default")?nb["default"]:nb;
function ob(){var b=[];for(var _len=arguments.length,a=new Array(_len),_key=0;_key<_len;_key++){a[_key]=arguments[_key];}for(var _i=0;_i<a.length;_i++){var c=a[_i];if(c&&"string"===typeof c){for(var _iterator=c.matchAll(/\S+/g),_isArray=Array.isArray(_iterator),_i2=0,_iterator=_isArray?_iterator:_iterator[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref2;if(_isArray){if(_i2>=_iterator.length)break;_ref2=_iterator[_i2++];}else{_i2=_iterator.next();if(_i2.done)break;_ref2=_i2.value;}var _ref3=_ref2;var d=_ref3[0];b.push(d);}}}return b;}var pb=!1,qb=0;function rb(a){qb=a.timeStamp;}function sb(a,b,c){var d="BR"===a.nodeName;return(b=b.__lexicalLineBreak)&&(a===b||d&&a.previousSibling===b)||d&&void 0!==wb(a,c);}function xb(a){return a.getEditorState().read(function(){var b=u();return null!==b?b.clone():null;});}
function yb(a,b,c){pb=!0;var d=100<performance.now()-qb;try{v(a,function(){var e=u()||xb(a);var f=new Map(),g=a.getRootElement(),h=a._editorState,k=a._blockCursorElement;var l=!1,n="";for(var q=0;q<b.length;q++){var m=b[q],t=m.type,x=m.target;a:{var A=x;var w=a;for(var y=h,F=g;A&&!zb(A);A=Ab(A)){var ba=wb(A,w);if(void 0!==ba){if(ba=z(ba,y)){w=B(ba)?void 0:[A,ba];break a;}}else if(A===F){w=[F,y._nodeMap.get("root")];break a;}}w=void 0;}if(!w)continue;var _w=w,bb=_w[0],ca=_w[1];if("characterData"===t){if(m=d&&C(ca))a:{m=e;
t=x;w=ca;if(D(m)&&(y=m.anchor.getNode(),y.is(w)&&m.format!==y.getFormat())){m=!1;break a;}m=3===t.nodeType&&w.isAttached();}m&&(w=x,x=ca,y=Bb(a._window),t=m=null,null!==y&&y.anchorNode===w&&(m=y.anchorOffset,t=y.focusOffset),w=w.nodeValue,null!==w&&Cb(x,w,m,t,!1));}else if("childList"===t){l=!0;t=m.addedNodes;for(w=0;w<t.length;w++){y=t[w],A=Db(y),F=y.parentNode,null==F||y===k||null!==A||sb(y,F,a)||(Va&&(A=y.innerText||y.nodeValue)&&(n+=A),F.removeChild(y));}m=m.removedNodes;t=m.length;if(0<t){w=0;for(y=
0;y<t;y++){if(F=m[y],sb(F,x,a)||k===F)x.appendChild(F),w++;}t!==w&&f.set(bb,ca);}}}if(0<f.size){for(var _iterator2=f,_isArray2=Array.isArray(_iterator2),_i3=0,_iterator2=_isArray2?_iterator2:_iterator2[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref5;if(_isArray2){if(_i3>=_iterator2.length)break;_ref5=_iterator2[_i3++];}else{_i3=_iterator2.next();if(_i3.done)break;_ref5=_i3.value;}var _ref6=_ref5;var bb=_ref6[0];var ca=_ref6[1];ca.reconcileObservedMutation(bb,a);}}f=c.takeRecords();if(0<f.length){for(g=0;g<f.length;g++){for(k=f[g],h=k.addedNodes,k=k.target,q=0;q<h.length;q++){x=h[q],m=x.parentNode,null==m||"BR"!==x.nodeName||sb(x,k,a)||m.removeChild(x);}}c.takeRecords();}null!==e&&(l&&(e.dirty=!0,Eb(e)),Va&&Fb(a)&&e.insertRawText(n));});}finally{pb=!1;}}
function Gb(a){var b=a._observer;if(null!==b){var c=b.takeRecords();yb(a,c,b);}}function Hb(a){0===qb&&Ib(a).addEventListener("textInput",rb,!0);a._observer=new MutationObserver(function(b,c){yb(a,b,c);});}function Jb(a,b){var c=a.__mode,d=a.__format;a=a.__style;var e=b.__mode,f=b.__format;b=b.__style;return(null===c||c===e)&&(null===d||d===f)&&(null===a||a===b);}function Kb(a,b){var c=a.mergeWithSibling(b),d=G()._normalizedNodes;d.add(a.__key);d.add(b.__key);return c;}
function Lb(a){if(""===a.__text&&a.isSimpleText()&&!a.isUnmergeable())a.remove();else{for(var b;null!==(b=a.getPreviousSibling())&&C(b)&&b.isSimpleText()&&!b.isUnmergeable();){if(""===b.__text)b.remove();else{Jb(b,a)&&(a=Kb(b,a));break;}}for(var c;null!==(c=a.getNextSibling())&&C(c)&&c.isSimpleText()&&!c.isUnmergeable();){if(""===c.__text)c.remove();else{Jb(a,c)&&Kb(a,c);break;}}}}function Mb(a){Nb(a.anchor);Nb(a.focus);return a;}
function Nb(a){for(;"element"===a.type;){var b=a.getNode(),c=a.offset;c===b.getChildrenSize()?(b=b.getChildAtIndex(c-1),c=!0):(b=b.getChildAtIndex(c),c=!1);if(C(b)){a.set(b.__key,c?b.getTextContentSize():0,"text");break;}else if(!H(b))break;a.set(b.__key,c?b.getChildrenSize():0,"element");}}var Ob=1,Pb="function"===typeof queueMicrotask?queueMicrotask:function(a){(_require_closure_Promise||(_require_closure_Promise=require("Promise"))).resolve().then(a);};
function Qb(a){var b=document.activeElement;if(null===b)return!1;var c=b.nodeName;return B(Rb(a))&&("INPUT"===c||"TEXTAREA"===c||"true"===b.contentEditable&&null==Sb(b));}function Tb(a,b,c){var d=a.getRootElement();try{return null!==d&&d.contains(b)&&d.contains(c)&&null!==b&&!Qb(b)&&Ub(b)===a;}catch(e){return!1;}}function Vb(a){return a instanceof Wb;}function Ub(a){for(;null!=a;){var b=Sb(a);if(Vb(b))return b;a=Ab(a);}return null;}function Sb(a){return a?a.__lexicalEditor:null;}
function Xb(a){return a.isToken()||a.isSegmented();}function Yb(a){return 3===a.nodeType;}function Zb(a){for(;null!=a;){if(Yb(a))return a;a=a.firstChild;}return null;}function $b(a,b,c){var d=hb[b];if(null!==c&&(a&d)===(c&d))return a;a^=d;"subscript"===b?a&=~hb.superscript:"superscript"===b&&(a&=~hb.subscript);return a;}
function ac(a,b){if(null!=b)a.__key=b;else{I();99<bc&&r(14);b=G();var c=ic(),d=""+Ob++;c._nodeMap.set(d,a);H(a)?b._dirtyElements.set(d,!0):b._dirtyLeaves.add(d);b._cloneNotNeeded.add(d);b._dirtyType=1;a.__key=d;}}
function jc(a){var b=a.getParent();if(null!==b){var e=a.getWritable();b=b.getWritable();var c=a.getPreviousSibling();a=a.getNextSibling();if(null===c){if(null!==a){var d=a.getWritable();b.__first=a.__key;d.__prev=null;}else b.__first=null;}else{d=c.getWritable();if(null!==a){var f=a.getWritable();f.__prev=d.__key;d.__next=f.__key;}else d.__next=null;e.__prev=null;}null===a?null!==c?(a=c.getWritable(),b.__last=c.__key,a.__next=null):b.__last=null:(a=a.getWritable(),null!==c?(c=c.getWritable(),c.__next=
a.__key,a.__prev=c.__key):a.__prev=null,e.__next=null);b.__size--;e.__parent=null;}}function kc(a){99<bc&&r(14);var b=a.getLatest(),c=b.__parent,d=ic();var e=G(),f=d._nodeMap;d=e._dirtyElements;if(null!==c)a:for(;null!==c;){if(d.has(c))break a;var g=f.get(c);if(void 0===g)break;d.set(c,!1);c=g.__parent;}b=b.__key;e._dirtyType=1;H(a)?d.set(b,!0):e._dirtyLeaves.add(b);}
function J(a){I();var b=G();var c=b._compositionKey;a!==c&&(b._compositionKey=a,null!==c&&(b=z(c),null!==b&&b.getWritable()),null!==a&&(a=z(a),null!==a&&a.getWritable()));}function lc(){return mc()?null:G()._compositionKey;}function z(a,b){a=(b||ic())._nodeMap.get(a);return void 0===a?null:a;}function Db(a,b){var c=G();a=wb(a,c);return void 0!==a?z(a,b):null;}function wb(a,b){return a["__lexicalKey_"+b._key];}function Rb(a,b){for(;null!=a;){var c=Db(a,b);if(null!==c)return c;a=Ab(a);}return null;}
function nc(a){var b=Object.assign({},a._decorators);return a._pendingDecorators=b;}function oc(a){return a.read(function(){return K().getTextContent();});}function pc(a,b){v(a,function(){var c=ic();if(!c.isEmpty())if("root"===b)K().markDirty();else{c=c._nodeMap;for(var _iterator3=c,_isArray3=Array.isArray(_iterator3),_i4=0,_iterator3=_isArray3?_iterator3:_iterator3[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref8;if(_isArray3){if(_i4>=_iterator3.length)break;_ref8=_iterator3[_i4++];}else{_i4=_iterator3.next();if(_i4.done)break;_ref8=_i4.value;}var _ref9=_ref8;var d=_ref9[1];d.markDirty();}}},null===a._pendingEditorState?{tag:"history-merge"}:void 0);}function K(){return ic()._nodeMap.get("root");}function Eb(a){I();var b=ic();null!==a&&(a.dirty=!0,a.setCachedNodes(null));b._selection=a;}
function qc(a){var b=G(),c;a:{for(c=a;null!=c;){var d=wb(c,b);if(void 0!==d){c=d;break a;}c=Ab(c);}c=null;}return null===c?(b=b.getRootElement(),a===b?z("root"):null):z(c);}function rc(a){return /[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(a);}function sc(a){var b=[];for(;null!==a;){b.push(a),a=a._parentEditor;}return b;}function tc(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5);}
function uc(a,b,c){b=Bb(b._window);if(null!==b){var d=b.anchorNode,_b=b,e=_b.anchorOffset,f=_b.focusOffset;if(null!==d&&(b=3===d.nodeType?d.nodeValue:null,d=Rb(d),null!==b&&C(d))){if(b===db&&c){var g=c.length;b=c;f=e=g;}null!==b&&Cb(d,b,e,f,a);}}}
function Cb(a,b,c,d,e){var f=a;if(f.isAttached()&&(e||!f.isDirty())){var l=f.isComposing(),n=b;(l||e)&&b[b.length-1]===db&&(n=b.slice(0,-1));b=f.getTextContent();if(e||n!==b)if(""===n){if(J(null),Xa||Ya||cb)f.remove();else{var q=G();setTimeout(function(){q.update(function(){f.isAttached()&&f.remove();});},20);}}else{e=f.getParent();b=vc();var g=f.getTextContentSize(),h=lc(),k=f.getKey();f.isToken()||null!==h&&k===h&&!l||D(b)&&(null!==e&&!e.canInsertTextBefore()&&0===b.anchor.offset||b.anchor.key===a.__key&&0===b.anchor.offset&&
!f.canInsertTextBefore()&&!l||b.focus.key===a.__key&&b.focus.offset===g&&!f.canInsertTextAfter()&&!l)?f.markDirty():(a=u(),D(a)&&null!==c&&null!==d&&(a.setTextNodeRange(f,c,f,d),f.isSegmented()&&(c=f.getTextContent(),c=L(c),f.replace(c),f=c)),f.setTextContent(n));}}}
function wc(a,b){if(b.isSegmented())return!0;if(!a.isCollapsed())return!1;a=a.anchor.offset;var c=b.getParentOrThrow(),d=b.isToken();return 0===a?((a=!b.canInsertTextBefore()||!c.canInsertTextBefore()&&!b.isComposing()||d)||(b=b.getPreviousSibling(),a=(C(b)||H(b)&&b.isInline())&&!b.canInsertTextAfter()),a):a===b.getTextContentSize()?!b.canInsertTextAfter()||!c.canInsertTextAfter()&&!b.isComposing()||d:!1;}function xc(a){return"Backspace"===a;}
function yc(a,b){void 0===a.__lexicalClassNameCache&&(a.__lexicalClassNameCache={});var c=a.__lexicalClassNameCache,d=c[b];if(void 0!==d)return d;a=a[b];return"string"===typeof a?(a=ob(a),c[b]=a):a;}function zc(a,b,c,d,e){0!==c.size&&(c=d.__type,d=d.__key,b=b.get(c),void 0===b&&r(33,c),c=b.klass,b=a.get(c),void 0===b&&(b=new Map(),a.set(c,b)),a=b.get(d),c="destroyed"===a&&"created"===e,(void 0===a||c)&&b.set(d,c?"updated":e));}
function Ac(a,b,c){var d=a.getParent(),e=c;null!==d&&(b&&0===c?(e=a.getIndexWithinParent(),a=d):b||c!==a.getChildrenSize()||(e=a.getIndexWithinParent()+1,a=d));return a.getChildAtIndex(b?e-1:e);}function Bc(a,b){var c=a.offset;if("element"===a.type)return a=a.getNode(),Ac(a,b,c);a=a.getNode();return b&&0===c||!b&&c===a.getTextContentSize()?(c=b?a.getPreviousSibling():a.getNextSibling(),null===c?Ac(a.getParentOrThrow(),b,a.getIndexWithinParent()+(b?0:1)):c):null;}
function Fb(a){a=(a=Ib(a).event)&&a.inputType;return"insertFromPaste"===a||"insertFromPasteAsQuotation"===a;}function Cc(a){return!M(a)&&!a.isLastChild()&&!a.isInline();}function Dc(a,b){a=a._keyToDOMMap.get(b);void 0===a&&r(75,b);return a;}function Ab(a){a=a.assignedSlot||a.parentElement;return null!==a&&11===a.nodeType?a.host:a;}function Ec(a,b){for(a=a.getParent();null!==a;){if(a.is(b))return!0;a=a.getParent();}return!1;}function Ib(a){a=a._window;null===a&&r(78);return a;}
function Fc(a){for(a=a.getParentOrThrow();null!==a&&!Gc(a);){a=a.getParentOrThrow();}return a;}function Gc(a){return M(a)||H(a)&&a.isShadowRoot();}function Hc(a){a=a.constructor.clone(a);ac(a,null);return a;}
function Ic(a){var b=G();var c=a.constructor.getType();b=b._nodes.get(c);void 0===b&&r(200,a.constructor.name,c);var _b2=b,d=_b2.replace,e=_b2.replaceWithKlass;if(null!==d){b=d(a);var f=b.constructor;null!==e?b instanceof e||r(201,e.name,e.getType(),f.name,f.getType(),a.constructor.name,c):b instanceof a.constructor&&f!==a.constructor||r(202,f.name,f.getType(),a.constructor.name,c);b.__key===a.__key&&r(203,a.constructor.name,c,f.name,f.getType());return b;}return a;}
function Jc(a,b){a=a.getParent();!M(a)||H(b)||B(b)||r(99);}function Kc(a){return(B(a)||H(a)&&!a.canBeEmpty())&&!a.isInline();}function Lc(a,b,c){c.style.removeProperty("caret-color");b._blockCursorElement=null;b=a.parentElement;null!==b&&b.removeChild(a);}function Bb(a){return Ta?(a||window).getSelection():null;}function Mc(a){return 1===a.nodeType;}
function Nc(a){return null!==a.nodeName.match(new RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var|#text)$/,"i"));}function Oc(a){return null!==a.nodeName.match(new RegExp(/^(address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hr|li|main|nav|noscript|ol|p|pre|section|table|td|tfoot|ul|video)$/,"i"));}
function Pc(a){if(B(a)&&!a.isInline())return!0;if(!H(a)||Gc(a))return!1;var b=a.getFirstChild();b=null===b||Qc(b)||C(b)||b.isInline();return!a.isInline()&&!1!==a.canBeEmpty()&&b;}function Rc(a,b){for(;null!==a&&null!==a.getParent()&&!b(a);){a=a.getParentOrThrow();}return b(a)?a:null;}var Sc=new WeakMap(),Tc=new Map();
function Uc(a){if(!a._readOnly&&a.isEmpty())return Tc;a._readOnly||r(192);var b=Sc.get(a);if(!b){b=new Map();Sc.set(a,b);for(var _iterator4=a._nodeMap,_isArray4=Array.isArray(_iterator4),_i5=0,_iterator4=_isArray4?_iterator4:_iterator4[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref11;if(_isArray4){if(_i5>=_iterator4.length)break;_ref11=_iterator4[_i5++];}else{_i5=_iterator4.next();if(_i5.done)break;_ref11=_i5.value;}var _ref12=_ref11;var c=_ref12[0];var d=_ref12[1];a=d.__type;var e=b.get(a);e||(e=new Map(),b.set(a,e));e.set(c,d);}}return b;}function Vc(a){var b=a.constructor.clone(a);b.afterCloneFrom(a);return b;}function Wc(a,b){a=parseInt(a.style.paddingInlineStart,10)||0;b.setIndent(a/40);}function zb(a){return!0===a.__lexicalUnmanaged;}
function Xc(a,b,c,d,e,f){for(a=a.getFirstChild();null!==a;){var g=a.__key;a.__parent===b&&(H(a)&&Xc(a,g,c,d,e,f),c.has(g)||f["delete"](g),e.push(g));a=a.getNextSibling();}}function Yc(a,b,c,d){a=a._nodeMap;b=b._nodeMap;var e=[];for(var _iterator5=d,_isArray5=Array.isArray(_iterator5),_i6=0,_iterator5=_isArray5?_iterator5:_iterator5[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref14;if(_isArray5){if(_i6>=_iterator5.length)break;_ref14=_iterator5[_i6++];}else{_i6=_iterator5.next();if(_i6.done)break;_ref14=_i6.value;}var _ref16=_ref14;var f=_ref16[0];var g=b.get(f);void 0===g||g.isAttached()||(H(g)&&Xc(g,f,a,b,e,d),a.has(f)||d["delete"](f),e.push(f));}for(var _i7=0;_i7<e.length;_i7++){var _f=e[_i7];b["delete"](_f);}for(var _iterator6=c,_isArray6=Array.isArray(_iterator6),_i8=0,_iterator6=_isArray6?_iterator6:_iterator6[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref15;if(_isArray6){if(_i8>=_iterator6.length)break;_ref15=_iterator6[_i8++];}else{_i8=_iterator6.next();if(_i8.done)break;_ref15=_i8.value;}var _f2=_ref15;d=b.get(_f2),void 0===d||d.isAttached()||(a.has(_f2)||c["delete"](_f2),b["delete"](_f2));}}
var N="",O="",Zc=null,$c="",ad="",bd,P,cd,dd=!1,ed=!1,od,pd=null,qd,rd,sd,td,ud,vd;function wd(a,b){var c=sd.get(a);if(null!==b){var d=xd(a);d.parentNode===b&&b.removeChild(d);}td.has(a)||P._keyToDOMMap["delete"](a);H(c)&&(a=yd(c,sd),zd(a,0,a.length-1,null));void 0!==c&&zc(vd,cd,od,c,"destroyed");}function zd(a,b,c,d){for(;b<=c;++b){var e=a[b];void 0!==e&&wd(e,d);}}function Ad(a,b){a.setProperty("text-align",b);}
function Bd(a,b){var c=bd.theme.indent;if("string"===typeof c){var d=a.classList.contains(c);0<b&&!d?a.classList.add(c):1>b&&d&&a.classList.remove(c);}c=getComputedStyle(a).getPropertyValue("--lexical-indent-base-value")||"40px";a.style.setProperty("padding-inline-start",0===b?"":"calc("+b+" * "+c+")");}function Cd(a,b){a=a.style;0===b?Ad(a,""):1===b?Ad(a,"left"):2===b?Ad(a,"center"):3===b?Ad(a,"right"):4===b?Ad(a,"justify"):5===b?Ad(a,"start"):6===b&&Ad(a,"end");}
function Dd(a,b){var c=td.get(a);void 0===c&&r(60);var d=c.createDOM(bd,P);var e=P._keyToDOMMap;d["__lexicalKey_"+P._key]=a;e.set(a,d);C(c)?d.setAttribute("data-lexical-text","true"):B(c)&&d.setAttribute("data-lexical-decorator","true");if(H(c)){a=c.__indent;e=c.__size;0!==a&&Bd(d,a);if(0!==e){--e;a=yd(c,td);var f=O;O="";Ed(a,c,0,e,c.getDOMSlot(d));Fd(c,d);O=f;}a=c.__format;0!==a&&Cd(d,a);c.isInline()||Gd(null,c,d);Cc(c)&&(N+="\n\n",ad+="\n\n");}else e=c.getTextContent(),B(c)?(f=c.decorate(P,bd),
null!==f&&Hd(a,f),d.contentEditable="false"):C(c)&&(c.isDirectionless()||(O+=e)),N+=e,ad+=e;null!==b&&b.insertChild(d);zc(vd,cd,od,c,"created");return d;}function Ed(a,b,c,d,e){var f=N;for(N="";c<=d;++c){Dd(a[c],e);var g=td.get(a[c]);null!==g&&C(g)&&(null===Zc&&(Zc=g.getFormat()),""===$c&&($c=g.getStyle()));}Cc(b)&&(N+="\n\n");e.element.__lexicalTextContent=N;N=f+N;}
function Id(a,b){if(a){if(a=a.__last)if(b=b.get(a))return Qc(b)?"line-break":B(b)&&b.isInline()?"decorator":null;return"empty";}return null;}function Gd(a,b,c){a=Id(a,sd);var d=Id(b,td);a!==d&&b.getDOMSlot(c).setManagedLineBreak(d);}
function Fd(a,b){var c=b.__lexicalDir||"";if((b.__lexicalDirTextContent||"")!==O||c!==pd){var f=""===O;if(f)var d=pd;else d=O,d=fb.test(d)?"rtl":gb.test(d)?"ltr":null;if(d!==c){var g=b.classList,h=bd.theme;var e=null!==c?h[c]:void 0;var k=null!==d?h[d]:void 0;void 0!==e&&("string"===typeof e&&(e=ob(e),e=h[c]=e),g.remove.apply(g,e));null===d||f&&"ltr"===d?b.removeAttribute("dir"):(void 0!==k&&("string"===typeof k&&(c=ob(k),k=h[d]=c),void 0!==k&&g.add.apply(g,k)),b.dir=d);ed||(a.getWritable().__dir=d);}pd=d;b.__lexicalDirTextContent=
O;b.__lexicalDir=d;}}function yd(a,b){var c=[];for(a=a.__first;null!==a;){var d=b.get(a);void 0===d&&r(101);c.push(a);a=d.__next;}return c;}
function Jd(a,b){var c=sd.get(a),d=td.get(a);void 0!==c&&void 0!==d||r(61);var e=dd||rd.has(a)||qd.has(a);var f=Dc(P,a);if(c===d&&!e)return H(c)?(d=f.__lexicalTextContent,void 0!==d&&(N+=d,ad+=d),d=f.__lexicalDirTextContent,void 0!==d&&(O+=d)):(d=c.getTextContent(),C(c)&&!c.isDirectionless()&&(O+=d),ad+=d,N+=d),f;c!==d&&e&&zc(vd,cd,od,d,"updated");if(d.updateDOM(c,f,bd))return d=Dd(a,null),null===b&&r(62),b.replaceChild(d,f),wd(a,null),d;if(H(c)&&H(d)){a=d.__indent;a!==c.__indent&&Bd(f,a);a=d.__format;
a!==c.__format&&Cd(f,a);if(e){a=O;O="";Zc=null;$c="";var g=d.getDOMSlot(f);e=N;var h=c.__size,k=d.__size;N="";b=g.element;if(1===h&&1===k){var l=c.__first,n=d.__first;if(l===n)Jd(l,b);else{g=xd(l);var q=Dd(n,null);try{b.replaceChild(q,g);}catch(w){if("object"===typeof w&&null!=w)throw Error(w.toString()+" Parent: "+b.tagName+", new child: {tag: "+q.tagName+" key: "+n+"}, old child: {tag: "+g.tagName+", key: "+l+"}.");throw w;}wd(l,null);}l=td.get(n);C(l)&&(null===Zc&&(Zc=l.getFormat()),""===$c&&($c=l.getStyle()));}else{q=
yd(c,sd);var m=yd(d,td);q.length!==h&&r(227);m.length!==k&&r(228);if(0===h)0!==k&&Ed(m,d,0,k-1,g);else if(0===k)0!==h&&(l=null==g.after&&null==g.before&&null==g.element.__lexicalLineBreak,zd(q,0,h-1,l?null:b),l&&(b.textContent=""));else{var t=q;q=m;m=h-1;h=k-1;var w=g.getFirstChild(),y=0;for(k=0;y<=m&&k<=h;){var x=t[y],A=q[k];if(x===A)w=Kd(Jd(A,g.element)),y++,k++;else{void 0===l&&(l=new Set(t));void 0===n&&(n=new Set(q));var F=n.has(x),ba=l.has(A);F?(ba?(x=Dc(P,A),x===w?w=Kd(Jd(A,g.element)):(g.withBefore(w).insertChild(x),
Jd(A,g.element)),y++):Dd(A,g.withBefore(w)),k++):(w=Kd(xd(x)),wd(x,g.element),y++);}A=td.get(A);null!==A&&C(A)&&(null===Zc&&(Zc=A.getFormat()),""===$c&&($c=A.getStyle()));}l=y>m;n=k>h;l&&!n?(l=q[h+1],l=void 0===l?null:P.getElementByKey(l),Ed(q,d,k,h,g.withBefore(l))):n&&!l&&zd(t,y,m,g.element);}}Cc(d)&&(N+="\n\n");b.__lexicalTextContent=N;N=e+N;Fd(d,f);Ld(d)&&null!=Zc&&Zc!==d.__textFormat&&!ed&&(d.setTextFormat(Zc),d.setTextStyle($c));Ld(d)&&""!==$c&&$c!==d.__textStyle&&!ed&&d.setTextStyle($c);O=a;M(d)||
d.isInline()||Gd(c,d,f);}Cc(d)&&(N+="\n\n",ad+="\n\n");}else c=d.getTextContent(),B(d)?(e=d.decorate(P,bd),null!==e&&Hd(a,e)):C(d)&&!d.isDirectionless()&&(O+=c),N+=c,ad+=c;!ed&&M(d)&&d.__cachedText!==ad&&(d.getWritable().__cachedText=ad);return f;}function Hd(a,b){var c=P._pendingDecorators,d=P._decorators;if(null===c){if(d[a]===b)return;c=nc(P);}c[a]=b;}function Kd(a){a=a.nextSibling;null!==a&&a===P._blockCursorElement&&(a=a.nextSibling);return a;}
function xd(a){var b=ud.get(a);void 0===b&&r(75,a);return b;}var Md=Object.freeze({}),Td=[["keydown",Nd],["pointerdown",Od],["compositionstart",Pd],["compositionend",Qd],["input",Rd],["click",Sd],["cut",Md],["copy",Md],["dragstart",Md],["dragover",Md],["dragend",Md],["paste",Md],["focus",Md],["blur",Md],["drop",Md]];Wa&&Td.push(["beforeinput",function(a,b){return Ud(a,b);}]);var Vd=0,Wd=null,Xd=0,Yd=null,Zd=new WeakMap(),$d=!1,ae=!1,be=!1,ce=!1,de=[0,"",0,"root",0];
function ee(a,b,c,d,e){var f=a.anchor,g=a.focus,h=f.getNode();var k=G();var l=Bb(k._window),n=null!==l?l.anchorNode:null,q=f.key;k=k.getElementByKey(q);var m=c.length;return q!==g.key||!C(h)||(!e&&(!Wa||Xd<d+50)||h.isDirty()&&2>m||rc(c))&&f.offset!==g.offset&&!h.isComposing()||Xb(h)||h.isDirty()&&1<m||(e||!Wa)&&null!==k&&!h.isComposing()&&n!==Zb(k)||null!==l&&null!==b&&(!b.collapsed||b.startContainer!==l.anchorNode||b.startOffset!==l.anchorOffset)||h.getFormat()!==a.format||h.getStyle()!==a.style||
wc(a,h);}function fe(a,b){return null!==a&&null!==a.nodeValue&&3===a.nodeType&&0!==b&&b!==a.nodeValue.length;}
function ge(a,b,c){var d=a.anchorNode,e=a.anchorOffset,f=a.focusNode,g=a.focusOffset;if($d&&($d=!1,fe(d,e)&&fe(f,g)))return;v(b,function(){if(!c)Eb(null);else if(Tb(b,d,f)){var h=u();if(D(h)){var k=h.anchor,l=k.getNode();if(h.isCollapsed()){"Range"===a.type&&a.anchorNode===a.focusNode&&(h.dirty=!0);var n=Ib(b).event;n=n?n.timeStamp:performance.now();var _de=de,A=_de[0],w=_de[1],y=_de[2],F=_de[3],ba=_de[4];var q=K();q=!1===b.isComposing()&&""===q.getTextContent();n<ba+200&&k.offset===y&&k.key===F?(h.format=A,h.style=w):"text"===k.type?(C(l)||r(141),
h.format=l.getFormat(),h.style=l.getStyle()):"element"!==k.type||q||(k=k.getNode(),h.style="",k instanceof he&&0===k.getChildrenSize()?(h.format=k.getTextFormat(),h.style=k.getTextStyle()):h.format=0);}else{var m=k.key,t=h.focus.key;k=h.getNodes();l=k.length;var x=h.isBackward();n=x?g:e;q=x?e:g;var _A=x?t:m;m=x?m:t;t=255;x=!1;for(var _w2=0;_w2<l;_w2++){var _y=k[_w2],_F=_y.getTextContentSize();if(C(_y)&&0!==_F&&!(0===_w2&&_y.__key===_A&&n===_F||_w2===l-1&&_y.__key===m&&0===q)&&(x=!0,t&=_y.getFormat(),0===t))break;}h.format=
x?t:0;}}S(b,aa,void 0);}});}
function Sd(a,b){v(b,function(){var c=u();var d=Bb(b._window);var e=vc();if(d)if(D(c)){var g=c.anchor;var f=g.getNode();"element"===g.type&&0===g.offset&&c.isCollapsed()&&!M(f)&&1===K().getChildrenSize()&&f.getTopLevelElementOrThrow().isEmpty()&&null!==e&&c.is(e)?(d.removeAllRanges(),c.dirty=!0):3!==a.detail||c.isCollapsed()||(d=c.focus.getNode(),f!==d&&(H(f)?f.select(0):f.getParentOrThrow().select(0)));}else"touch"===a.pointerType&&(f=d.anchorNode,null!==f&&(f=f.nodeType,1===f||3===f))&&(d=ie(e,d,b,a),
Eb(d));S(b,da,a);});}function Od(a,b){var c=a.target;a=a.pointerType;c instanceof Node&&"touch"!==a&&v(b,function(){B(Rb(c))||(ae=!0);});}function je(a){if(!a.getTargetRanges)return null;a=a.getTargetRanges();return 0===a.length?null:a[0];}function ke(a,b){return a!==b||H(a)||H(b)||!a.isToken()||!b.isToken();}
function Ud(a,b){var c=a.inputType,d=je(a);"deleteCompositionText"===c||Va&&Fb(b)||"insertCompositionText"!==c&&v(b,function(){var e=u();if("deleteContentBackward"===c){if(null===e){var f=vc();if(!D(f))return;Eb(f.clone());}if(D(e)){f=e.anchor.key===e.focus.key;if("MediaLast"===Wd&&a.timeStamp<Vd+30&&b.isComposing()&&f)J(null),Vd=0,setTimeout(function(){v(b,function(){J(null);});},30),D(e)&&(f=e.anchor.getNode(),f.markDirty(),e.format=f.getFormat(),C(f)||r(142),e.style=f.getStyle());else{J(null);a.preventDefault();var g=
e.anchor.getNode(),h=g.getTextContent();g=g.canInsertTextAfter();e=0===e.anchor.offset&&e.focus.offset===h.length;ab&&f&&!e&&g||S(b,ea,!0);}return;}}if(D(e))if(f=a.data,null!==Yd&&uc(!1,b,Yd),e.dirty&&null===Yd||!e.isCollapsed()||M(e.anchor.getNode())||null===d||e.applyDOMRange(d),Yd=null,g=e.focus,h=e.anchor.getNode(),g=g.getNode(),"insertText"===c||"insertTranspose"===c)"\n"===f?(a.preventDefault(),S(b,fa,!1)):"\n\n"===f?(a.preventDefault(),S(b,ha,void 0)):null==f&&a.dataTransfer?(f=a.dataTransfer.getData("text/plain"),
a.preventDefault(),e.insertRawText(f)):null!=f&&ee(e,d,f,a.timeStamp,!0)?(a.preventDefault(),S(b,ia,f)):Yd=f,Xd=a.timeStamp;else switch(a.preventDefault(),c){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":S(b,ia,a);break;case"insertFromComposition":J(null);S(b,ia,a);break;case"insertLineBreak":J(null);S(b,fa,!1);break;case"insertParagraph":J(null);be&&!Ya?(be=!1,S(b,fa,!1)):S(b,ha,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":S(b,ja,a);break;case"deleteByComposition":ke(h,
g)&&S(b,ka,a);break;case"deleteByDrag":case"deleteByCut":S(b,ka,a);break;case"deleteContent":S(b,ea,!1);break;case"deleteWordBackward":S(b,la,!0);break;case"deleteWordForward":S(b,la,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":S(b,oa,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":S(b,oa,!1);break;case"formatStrikeThrough":S(b,pa,"strikethrough");break;case"formatBold":S(b,pa,"bold");break;case"formatItalic":S(b,pa,
"italic");break;case"formatUnderline":S(b,pa,"underline");break;case"historyUndo":S(b,qa,void 0);break;case"historyRedo":S(b,sa,void 0);}});}
function Rd(a,b){a.stopPropagation();v(b,function(){var c=u(),d=a.data,e=je(a);if(null!=d&&D(c)&&ee(c,e,d,a.timeStamp,!1)){ce&&(le(b,d),ce=!1);var f=c.anchor.getNode();e=Bb(b._window);if(null===e)return;var g=c.isBackward();var h=g?c.anchor.offset:c.focus.offset,k=g?c.focus.offset:c.anchor.offset;if(g=Wa&&!c.isCollapsed()&&C(f)&&null!==e.anchorNode)f=f.getTextContent().slice(0,h)+d+f.getTextContent().slice(h+k),e=e.anchorNode,g=f===(3===e.nodeType?e.nodeValue:null);g||S(b,ia,d);d=d.length;Va&&1<d&&"insertCompositionText"===
a.inputType&&!b.isComposing()&&(c.anchor.offset-=d);Xa||Ya||cb||!b.isComposing()||(Vd=0,J(null));}else uc(!1,b,null!==d?d:void 0),ce&&(le(b,d||void 0),ce=!1);I();c=G();Gb(c);});Yd=null;}function Pd(a,b){v(b,function(){var c=u();if(D(c)&&!b.isComposing()){var d=c.anchor,e=c.anchor.getNode();J(d.key);(a.timeStamp<Vd+30||"element"===d.type||!c.isCollapsed()||e.getFormat()!==c.format||C(e)&&e.getStyle()!==c.style)&&S(b,ia,eb);}});}
function le(a,b){var c=a._compositionKey;J(null);if(null!==c&&null!=b){if(""===b){b=z(c);a=Zb(a.getElementByKey(c));null!==a&&null!==a.nodeValue&&C(b)&&Cb(b,a.nodeValue,null,null,!0);return;}if("\n"===b[b.length-1]&&(c=u(),D(c))){b=c.focus;c.anchor.set(b.key,b.offset,b.type);S(a,Aa,null);return;}}uc(!0,a,b);}function Qd(a,b){Va?ce=!0:v(b,function(){le(b,a.data);});}
function Nd(a,b){Vd=a.timeStamp;Wd=a.key;if(!b.isComposing()){var c=a.key,d=a.shiftKey,e=a.ctrlKey,f=a.metaKey,g=a.altKey;if(!S(b,ta,a)&&null!=c){if("ArrowRight"!==c||e||f||g){if("ArrowRight"!==c||g||d||!e&&!f){if("ArrowLeft"!==c||e||f||g){if("ArrowLeft"!==c||g||d||!e&&!f){if("ArrowUp"!==c||e||f){if("ArrowDown"!==c||e||f){if("Enter"===c&&d)be=!0,S(b,Aa,a);else if(" "===c)S(b,Ba,a);else if(p&&e&&"o"===c.toLowerCase())a.preventDefault(),be=!0,S(b,fa,!0);else if("Enter"!==c||d){var h=p?g||f?!1:xc(c)||"h"===c.toLowerCase()&&
e:e||g||f?!1:xc(c);if(h)xc(c)?S(b,Da,a):(a.preventDefault(),S(b,ea,!0));else if("Escape"===c)S(b,Ea,a);else if(h=p?d||g||f?!1:"Delete"===c||"d"===c.toLowerCase()&&e:e||g||f?!1:"Delete"===c,h)"Delete"===c?S(b,Fa,a):(a.preventDefault(),S(b,ea,!1));else if(xc(c)&&(p?g:e))a.preventDefault(),S(b,la,!0);else if("Delete"===c&&(p?g:e))a.preventDefault(),S(b,la,!1);else if(p&&f&&xc(c))a.preventDefault(),S(b,oa,!0);else if(p&&f&&"Delete"===c)a.preventDefault(),S(b,oa,!1);else if("b"===c.toLowerCase()&&!g&&(
p?f:e))a.preventDefault(),S(b,pa,"bold");else if("u"===c.toLowerCase()&&!g&&(p?f:e))a.preventDefault(),S(b,pa,"underline");else if("i"===c.toLowerCase()&&!g&&(p?f:e))a.preventDefault(),S(b,pa,"italic");else if("Tab"!==c||g||e||f){if("z"===c.toLowerCase()&&!d&&(p?f:e))a.preventDefault(),S(b,qa,void 0);else if(h=p?"z"===c.toLowerCase()&&f&&d:"y"===c.toLowerCase()&&e||"z"===c.toLowerCase()&&e&&d,h)a.preventDefault(),S(b,sa,void 0);else if(h=b._editorState._selection,null===h||D(h)){if(h=!Va)h="a"===
c.toLowerCase()&&(p?f:e);h&&(a.preventDefault(),S(b,Pa,a));}else h=d?!1:"c"===c.toLowerCase()?p?f:e:!1,h?(a.preventDefault(),S(b,Na,a)):(h=d?!1:"x"===c.toLowerCase()?p?f:e:!1,h?(a.preventDefault(),S(b,Oa,a)):"a"===c.toLowerCase()&&(p?f:e)&&(a.preventDefault(),S(b,Pa,a)));}else S(b,Ga,a);}else be=!1,S(b,Aa,a);}else S(b,za,a);}else S(b,ya,a);}else S(b,xa,a);}else S(b,wa,a);}else S(b,va,a);}else S(b,ua,a);(e||d||g||f)&&S(b,Sa,a);}}}
function me(a){var b=a.__lexicalEventHandles;void 0===b&&(b=[],a.__lexicalEventHandles=b);return b;}var ne=new Map();
function oe(a){var b=a.target;var c=Bb(null==b?null:9===b.nodeType?b.defaultView:b.ownerDocument.defaultView);if(null!==c){var d=Ub(c.anchorNode);if(null!==d){ae&&(ae=!1,v(d,function(){var h=vc(),k=c.anchorNode;null!==k&&(k=k.nodeType,1===k||3===k)&&(h=ie(h,c,d,a),Eb(h));}));b=sc(d);b=b[b.length-1];var e=b._key,f=ne.get(e),g=f||b;g!==d&&ge(c,g,!1);ge(c,d,!0);d!==b?ne.set(e,d):f&&ne["delete"](e);}}}
function pe(a,b){var c=a.ownerDocument,d=Zd.get(c);(void 0===d||1>d)&&c.addEventListener("selectionchange",oe);Zd.set(c,(d||0)+1);a.__lexicalEditor=b;c=me(a);var _loop=function _loop(){var _Td$d=Td[d],e=_Td$d[0],f=_Td$d[1],g="function"===typeof f?function(h){!0!==h._lexicalHandled&&(h._lexicalHandled=!0,(b.isEditable()||"click"===e)&&f(h,b));}:function(h){if(!0!==h._lexicalHandled){h._lexicalHandled=!0;var k=b.isEditable();switch(e){case"cut":return k&&S(b,Oa,h);case"copy":return S(b,Na,h);case"paste":return k&&S(b,ja,h);case"dragstart":return k&&
S(b,Ka,h);case"dragover":return k&&S(b,La,h);case"dragend":return k&&S(b,Ma,h);case"focus":return k&&S(b,Qa,h);case"blur":return k&&S(b,Ra,h);case"drop":return k&&S(b,Ha,h);}}};a.addEventListener(e,g);c.push(function(){a.removeEventListener(e,g);});};for(d=0;d<Td.length;d++){_loop();}}
function qe(a,b,c){I();var d=a.__key;var e=a.getParent();if(null!==e){var f=u();if(D(f)&&H(a)){var _f3=f,g=_f3.anchor,h=_f3.focus;var k=g.getNode();var l=h.getNode();Ec(k,a)&&g.set(a.__key,0,"element");Ec(l,a)&&h.set(a.__key,0,"element");}k=f;l=!1;if(D(k)&&b){f=k.anchor;var n=k.focus;f.key===d&&(re(f,a,e,a.getPreviousSibling(),a.getNextSibling()),l=!0);n.key===d&&(re(n,a,e,a.getPreviousSibling(),a.getNextSibling()),l=!0);}else se(k)&&b&&a.isSelected()&&a.selectPrevious();D(k)&&b&&!l?(d=a.getIndexWithinParent(),
jc(a),te(k,e,d,-1)):jc(a);c||Gc(e)||e.canBeEmpty()||!e.isEmpty()||qe(e,b);b&&M(e)&&e.isEmpty()&&e.selectEnd();}}var
ue=function(){ue.getType=function getType(){r(64,this.name);};ue.clone=function clone(){r(65,this.name);};var _proto=ue.prototype;_proto.afterCloneFrom=function afterCloneFrom(a){this.__parent=a.__parent;this.__next=a.__next;this.__prev=a.__prev;};function ue(a){this.__type=this.constructor.getType();this.__next=this.__prev=this.__parent=null;ac(this,a);}_proto.getType=function getType(){return this.__type;};_proto.isInline=function isInline(){r(137,this.constructor.name);};_proto.isAttached=function isAttached(){for(var a=this.__key;null!==a;){if("root"===a)return!0;a=z(a);if(null===a)break;a=a.__parent;}return!1;};_proto.isSelected=function isSelected(a){var _this6=this;var b=a||u();if(null==b)return!1;a=b.getNodes().some(function(c){return(
c.__key===_this6.__key);});if(C(this))return a;if(D(b)&&"element"===b.anchor.type&&"element"===b.focus.type){if(b.isCollapsed())return!1;var c=this.getParent();if(B(this)&&this.isInline()&&c){b=b.isBackward()?b.focus:b.anchor;var d=b.getNode();if(b.offset===d.getChildrenSize()&&d.is(c)&&d.getLastChildOrThrow().is(this))return!1;}}return a;};_proto.getKey=function getKey(){return this.__key;};_proto.getIndexWithinParent=function getIndexWithinParent(){var a=this.getParent();if(null===a)return-1;a=a.getFirstChild();var b=0;for(;null!==a;){if(this.is(a))return b;b++;a=
a.getNextSibling();}return-1;};_proto.getParent=function getParent(){var a=this.getLatest().__parent;return null===a?null:z(a);};_proto.getParentOrThrow=function getParentOrThrow(){var a=this.getParent();null===a&&r(66,this.__key);return a;};_proto.getTopLevelElement=function getTopLevelElement(){var a=this;for(;null!==a;){var b=a.getParent();if(Gc(b))return H(a)||a===this&&B(a)||r(194),a;a=b;}return null;};_proto.getTopLevelElementOrThrow=function getTopLevelElementOrThrow(){var a=this.getTopLevelElement();null===a&&r(67,this.__key);return a;};_proto.getParents=function getParents(){var a=[],b=this.getParent();for(;null!==b;){a.push(b),b=b.getParent();}return a;};_proto.getParentKeys=function getParentKeys(){var a=
[],b=this.getParent();for(;null!==b;){a.push(b.__key),b=b.getParent();}return a;};_proto.getPreviousSibling=function getPreviousSibling(){var a=this.getLatest().__prev;return null===a?null:z(a);};_proto.getPreviousSiblings=function getPreviousSiblings(){var a=[];var b=this.getParent();if(null===b)return a;for(b=b.getFirstChild();null!==b&&!b.is(this);){a.push(b),b=b.getNextSibling();}return a;};_proto.getNextSibling=function getNextSibling(){var a=this.getLatest().__next;return null===a?null:z(a);};_proto.getNextSiblings=function getNextSiblings(){var a=[],b=this.getNextSibling();for(;null!==b;){a.push(b),b=b.getNextSibling();}return a;};_proto.getCommonAncestor=function getCommonAncestor(a){var b=
this.getParents();var c=a.getParents();H(this)&&b.unshift(this);H(a)&&c.unshift(a);a=b.length;var d=c.length;if(0===a||0===d||b[a-1]!==c[d-1])return null;c=new Set(c);for(d=0;d<a;d++){var e=b[d];if(c.has(e))return e;}return null;};_proto.is=function is(a){return null==a?!1:this.__key===a.__key;};_proto.isBefore=function isBefore(a){if(this===a)return!1;if(a.isParentOf(this))return!0;if(this.isParentOf(a))return!1;var b=this.getCommonAncestor(a);var c=this;for(;;){var d=c.getParentOrThrow();if(d===b){d=c.getIndexWithinParent();break;}c=d;}for(c=a;;){a=
c.getParentOrThrow();if(a===b){b=c.getIndexWithinParent();break;}c=a;}return d<b;};_proto.isParentOf=function isParentOf(a){var b=this.__key;if(b===a.__key)return!1;for(;null!==a;){if(a.__key===b)return!0;a=a.getParent();}return!1;};_proto.getNodesBetween=function getNodesBetween(a){var b=this.isBefore(a),c=[],d=new Set();for(var e=this;null!==e;){var f=e.__key;d.has(f)||(d.add(f),c.push(e));if(e===a)break;f=H(e)?b?e.getFirstChild():e.getLastChild():null;if(null!==f)e=f;else if(f=b?e.getNextSibling():e.getPreviousSibling(),null!==f)e=f;else{e=e.getParentOrThrow();
d.has(e.__key)||c.push(e);if(e===a)break;f=e;do{if(null===f&&r(68),e=b?f.getNextSibling():f.getPreviousSibling(),f=f.getParent(),null!==f)null!==e||d.has(f.__key)||c.push(f);else break;}while(null===e);}}b||c.reverse();return c;};_proto.isDirty=function isDirty(){var a=G()._dirtyLeaves;return null!==a&&a.has(this.__key);};_proto.getLatest=function getLatest(){var a=z(this.__key);null===a&&r(113);return a;};_proto.getWritable=function getWritable(){I();var a=ic(),b=G();a=a._nodeMap;var c=this.__key;var d=this.getLatest();b=b._cloneNotNeeded;var e=u();null!==e&&e.setCachedNodes(null);
if(b.has(c))return kc(d),d;d=Vc(d);b.add(c);kc(d);a.set(c,d);return d;};_proto.getTextContent=function getTextContent(){return"";};_proto.getTextContentSize=function getTextContentSize(){return this.getTextContent().length;};_proto.createDOM=function createDOM(){r(70);};_proto.updateDOM=function updateDOM(){r(71);};_proto.exportDOM=function exportDOM(a){return{element:this.createDOM(a._config,a)};};_proto.exportJSON=function exportJSON(){r(72);};ue.importJSON=function importJSON(){r(18,this.name);};ue.transform=function transform(){return null;};_proto.remove=function remove(a){qe(this,!0,a);};_proto.replace=function replace(a,b){I();var c=u();null!==c&&(c=c.clone());Jc(this,a);var d=this.getLatest(),e=this.__key,f=a.__key,g=a.getWritable();a=this.getParentOrThrow().getWritable();
var h=a.__size;jc(g);var k=d.getPreviousSibling(),l=d.getNextSibling(),n=d.__prev,q=d.__next,m=d.__parent;qe(d,!1,!0);null===k?a.__first=f:k.getWritable().__next=f;g.__prev=n;null===l?a.__last=f:l.getWritable().__prev=f;g.__next=q;g.__parent=m;a.__size=h;b&&(H(this)&&H(g)||r(139),this.getChildren().forEach(function(t){g.append(t);}));D(c)&&(Eb(c),b=c.anchor,c=c.focus,b.key===e&&ve(b,g),c.key===e&&ve(c,g));lc()===e&&J(f);return g;};_proto.insertAfter=function insertAfter(a,b){if(b===void 0){b=!0;}I();Jc(this,a);var c=this.getWritable();var d=a.getWritable();
var e=d.getParent();var f=u();var g=!1,h=!1;if(null!==e){var k=a.getIndexWithinParent();jc(d);D(f)&&(h=e.__key,g=f.anchor,e=f.focus,g="element"===g.type&&g.key===h&&g.offset===k+1,h="element"===e.type&&e.key===h&&e.offset===k+1);}e=this.getNextSibling();k=this.getParentOrThrow().getWritable();var l=d.__key,n=c.__next;null===e?k.__last=l:e.getWritable().__prev=l;k.__size++;c.__next=l;d.__next=n;d.__prev=c.__key;d.__parent=c.__parent;b&&D(f)&&(b=this.getIndexWithinParent(),te(f,k,b+1),c=k.__key,g&&f.anchor.set(c,
b+2,"element"),h&&f.focus.set(c,b+2,"element"));return a;};_proto.insertBefore=function insertBefore(a,b){if(b===void 0){b=!0;}I();Jc(this,a);var c=this.getWritable();var d=a.getWritable(),e=d.__key;jc(d);var f=this.getPreviousSibling(),g=this.getParentOrThrow().getWritable(),h=c.__prev,k=this.getIndexWithinParent();null===f?g.__first=e:f.getWritable().__next=e;g.__size++;c.__prev=e;d.__prev=h;d.__next=c.__key;d.__parent=c.__parent;c=u();b&&D(c)&&(b=this.getParentOrThrow(),te(c,b,k));return a;};_proto.isParentRequired=function isParentRequired(){return!1;};_proto.createParentElementNode=function createParentElementNode(){return we();};_proto.selectStart=function selectStart(){return this.selectPrevious();};_proto.selectEnd=function selectEnd(){return this.selectNext(0,
0);};_proto.selectPrevious=function selectPrevious(a,b){I();var c=this.getPreviousSibling(),d=this.getParentOrThrow();return null===c?d.select(0,0):H(c)?c.select():C(c)?c.select(a,b):(a=c.getIndexWithinParent()+1,d.select(a,a));};_proto.selectNext=function selectNext(a,b){I();var c=this.getNextSibling(),d=this.getParentOrThrow();return null===c?d.select():H(c)?c.select(0,0):C(c)?c.select(a,b):(a=c.getIndexWithinParent(),d.select(a,a));};_proto.markDirty=function markDirty(){this.getWritable();};_proto.reconcileObservedMutation=function reconcileObservedMutation(){this.markDirty();};return ue;}();
function xe(a,b){var c=b.getParentOrThrow().getLastChild(),d=b;for(b=[b];d!==c;){d.getNextSibling()||r(140),d=d.getNextSibling(),b.push(d);}for(var _iterator7=b,_isArray7=Array.isArray(_iterator7),_i9=0,_iterator7=_isArray7?_iterator7:_iterator7[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref17;if(_isArray7){if(_i9>=_iterator7.length)break;_ref17=_iterator7[_i9++];}else{_i9=_iterator7.next();if(_i9.done)break;_ref17=_i9.value;}var e=_ref17;a=a.insertAfter(e);}}var
ye=function(_ue){babelHelpers.inheritsLoose(ye,_ue);ye.getType=function getType(){return"linebreak";};ye.clone=function clone(a){return new ye(a.__key);};function ye(a){return _ue.call(this,a)||this;}var _proto2=ye.prototype;_proto2.getTextContent=function getTextContent(){return"\n";};_proto2.createDOM=function createDOM(){return document.createElement("br");};_proto2.updateDOM=function updateDOM(){return!1;};ye.importDOM=function importDOM(){return{br:function br(a){a:{var b=a.parentElement;if(null!==b&&Oc(b)){var c=b.firstChild;if(c===a||c.nextSibling===a&&ze(c))if(b=b.lastChild,b===a||b.previousSibling===a&&ze(b)){b=!0;break a;}}b=!1;}if(!b)a:{b=a.parentElement;if(null!==b&&Oc(b)){c=b.firstChild;if(c===a||c.nextSibling===
a&&ze(c)){b=!1;break a;}b=b.lastChild;if(b===a||b.previousSibling===a&&ze(b)){b=!0;break a;}}b=!1;}return b?null:{conversion:Ae,priority:0};}};};ye.importJSON=function importJSON(){return Be();};_proto2.exportJSON=function exportJSON(){return{type:"linebreak",version:1};};return ye;}(ue);function Ae(){return{node:Be()};}function Be(){return Ic(new ye());}function Qc(a){return a instanceof ye;}function ze(a){return 3===a.nodeType&&/^( |\t|\r?\n)+$/.test(a.textContent||"");}function Ce(a,b){return b&16?"code":b&128?"mark":b&32?"sub":b&64?"sup":null;}
function De(a,b){return b&1?"strong":b&2?"em":"span";}function Ee(a,b,c,d,e){var _a,_a2,_a3;a=d.classList;d=yc(e,"base");void 0!==d&&(_a=a).add.apply(_a,d);d=yc(e,"underlineStrikethrough");var f=!1,g=b&8&&b&4;var h=c&8&&c&4;void 0!==d&&(h?(f=!0,g||(_a2=a).add.apply(_a2,d)):g&&(_a3=a).remove.apply(_a3,d));for(var k in hb){var _a4,_a5,_a6;h=hb[k],d=yc(e,k),void 0!==d&&(c&h?!f||"underline"!==k&&"strikethrough"!==k?(0===(b&h)||g&&"underline"===k||"strikethrough"===k)&&(_a4=a).add.apply(_a4,d):b&h&&(_a5=a).remove.apply(_a5,d):b&h&&(_a6=a).remove.apply(_a6,d));}}
function Fe(a,b,c){var d=b.firstChild;c=c.isComposing();a+=c?db:"";if(null==d)b.textContent=a;else if(b=d.nodeValue,b!==a)if(c||Va){c=b.length;var e=a.length,f=0,g=0;for(;f<c&&f<e&&b[f]===a[f];){f++;}for(;g+f<c&&g+f<e&&b[c-g-1]===a[e-g-1];){g++;}a=[f,c-f-g,a.slice(f,e-g)];var _a7=a,h=_a7[0],k=_a7[1],l=_a7[2];0!==k&&d.deleteData(h,k);d.insertData(h,l);}else d.nodeValue=a;}function Ge(a,b){b=document.createElement(b);b.appendChild(a);return b;}var
He=function(_ue2){babelHelpers.inheritsLoose(He,_ue2);He.getType=function getType(){return"text";};He.clone=function clone(a){return new He(a.__text,a.__key);};var _proto3=He.prototype;_proto3.afterCloneFrom=function afterCloneFrom(a){_ue2.prototype.afterCloneFrom.call(this,a);this.__format=a.__format;this.__style=a.__style;this.__mode=a.__mode;this.__detail=a.__detail;};function He(a,b){var _this;_this=_ue2.call(this,b)||this;_this.__text=a;_this.__format=0;_this.__style="";_this.__detail=_this.__mode=0;return _this;}_proto3.getFormat=function getFormat(){return this.getLatest().__format;};_proto3.getDetail=function getDetail(){return this.getLatest().__detail;};_proto3.getMode=function getMode(){var a=this.getLatest();return mb[a.__mode];};_proto3.getStyle=function getStyle(){return this.getLatest().__style;};_proto3.isToken=function isToken(){return 1===
this.getLatest().__mode;};_proto3.isComposing=function isComposing(){return this.__key===lc();};_proto3.isSegmented=function isSegmented(){return 2===this.getLatest().__mode;};_proto3.isDirectionless=function isDirectionless(){return 0!==(this.getLatest().__detail&1);};_proto3.isUnmergeable=function isUnmergeable(){return 0!==(this.getLatest().__detail&2);};_proto3.hasFormat=function hasFormat(a){a=hb[a];return 0!==(this.getFormat()&a);};_proto3.isSimpleText=function isSimpleText(){return"text"===this.__type&&0===this.__mode;};_proto3.getTextContent=function getTextContent(){return this.getLatest().__text;};_proto3.getFormatFlags=function getFormatFlags(a,b){var c=this.getLatest().__format;return $b(c,a,b);};_proto3.canHaveFormat=function canHaveFormat(){return!0;};_proto3.createDOM=function createDOM(a){var b=
this.__format,c=Ce(this,b);var d=De(this,b),e=document.createElement(null===c?d:c),f=e;this.hasFormat("code")&&e.setAttribute("spellcheck","false");null!==c&&(f=document.createElement(d),e.appendChild(f));c=f;Fe(this.__text,c,this);a=a.theme.text;void 0!==a&&Ee(d,0,b,c,a);b=this.__style;""!==b&&(e.style.cssText=b);return e;};_proto3.updateDOM=function updateDOM(a,b,c){var d=this.__text;var e=a.__format,f=this.__format,g=Ce(this,e);var h=Ce(this,f);var k=De(this,e);var l=De(this,f);if((null===g?k:g)!==(null===h?l:h))return!0;
if(g===h&&k!==l)return e=b.firstChild,null==e&&r(48),a=g=document.createElement(l),Fe(d,a,this),c=c.theme.text,void 0!==c&&Ee(l,0,f,a,c),b.replaceChild(g,e),!1;k=b;null!==h&&null!==g&&(k=b.firstChild,null==k&&r(49));Fe(d,k,this);c=c.theme.text;void 0!==c&&e!==f&&Ee(l,e,f,k,c);f=this.__style;a.__style!==f&&(b.style.cssText=f);return!1;};He.importDOM=function importDOM(){return{"#text":function text(){return{conversion:Ie,priority:0};},b:function b(){return{conversion:Je,priority:0};},code:function code(){return{conversion:Ke,priority:0};},em:function em(){return{conversion:Ke,priority:0};},
i:function i(){return{conversion:Ke,priority:0};},s:function s(){return{conversion:Ke,priority:0};},span:function span(){return{conversion:Le,priority:0};},strong:function strong(){return{conversion:Ke,priority:0};},sub:function sub(){return{conversion:Ke,priority:0};},sup:function sup(){return{conversion:Ke,priority:0};},u:function u(){return{conversion:Ke,priority:0};}};};He.importJSON=function importJSON(a){var b=L(a.text);b.setFormat(a.format);b.setDetail(a.detail);b.setMode(a.mode);b.setStyle(a.style);return b;};_proto3.exportDOM=function exportDOM(a){var _ue2$prototype$export=_ue2.prototype.exportDOM.call(this,a);a=_ue2$prototype$export.element;null!==a&&Mc(a)||r(132);a.style.whiteSpace="pre-wrap";this.hasFormat("bold")&&(
a=Ge(a,"b"));this.hasFormat("italic")&&(a=Ge(a,"i"));this.hasFormat("strikethrough")&&(a=Ge(a,"s"));this.hasFormat("underline")&&(a=Ge(a,"u"));return{element:a};};_proto3.exportJSON=function exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),type:"text",version:1};};_proto3.selectionTransform=function selectionTransform(){};_proto3.setFormat=function setFormat(a){var b=this.getWritable();b.__format="string"===typeof a?hb[a]:a;return b;};_proto3.setDetail=function setDetail(a){var b=this.getWritable();b.__detail="string"===typeof a?ib[a]:
a;return b;};_proto3.setStyle=function setStyle(a){var b=this.getWritable();b.__style=a;return b;};_proto3.toggleFormat=function toggleFormat(a){var b=this.getFormat();a=$b(b,a,null);return this.setFormat(a);};_proto3.toggleDirectionless=function toggleDirectionless(){var a=this.getWritable();a.__detail^=1;return a;};_proto3.toggleUnmergeable=function toggleUnmergeable(){var a=this.getWritable();a.__detail^=2;return a;};_proto3.setMode=function setMode(a){a=lb[a];if(this.__mode===a)return this;var b=this.getWritable();b.__mode=a;return b;};_proto3.setTextContent=function setTextContent(a){if(this.__text===a)return this;var b=this.getWritable();b.__text=a;return b;};_proto3.select=function select(a,b){I();var c=u();
var d=this.getTextContent();var e=this.__key;"string"===typeof d?(d=d.length,void 0===a&&(a=d),void 0===b&&(b=d)):b=a=0;if(D(c))d=lc(),d!==c.anchor.key&&d!==c.focus.key||J(e),c.setTextNodeRange(this,a,this,b);else return Me(e,a,e,b,"text","text");return c;};_proto3.selectStart=function selectStart(){return this.select(0,0);};_proto3.selectEnd=function selectEnd(){var a=this.getTextContentSize();return this.select(a,a);};_proto3.spliceText=function spliceText(a,b,c,d){var e=this.getWritable(),f=e.__text,g=c.length,h=a;0>h&&(h=g+h,0>h&&(h=0));var k=u();d&&D(k)&&(a+=g,k.setTextNodeRange(e,
a,e,a));b=f.slice(0,h)+c+f.slice(h+b);e.__text=b;return e;};_proto3.canInsertTextBefore=function canInsertTextBefore(){return!0;};_proto3.canInsertTextAfter=function canInsertTextAfter(){return!0;};_proto3.splitText=function splitText(){for(var _len2=arguments.length,a=new Array(_len2),_key2=0;_key2<_len2;_key2++){a[_key2]=arguments[_key2];}I();var b=this.getLatest(),c=b.getTextContent(),d=b.__key,e=lc(),f=new Set(a);a=[];var g=c.length,h="";for(var k=0;k<g;k++){""!==h&&f.has(k)&&(a.push(h),h=""),h+=c[k];}""!==h&&a.push(h);f=a.length;if(0===f)return[];if(a[0]===c)return[b];var l=a[0];c=b.getParent();k=b.getFormat();var n=b.getStyle(),q=b.__detail;g=!1;b.isSegmented()?(h=L(l),h.__format=k,h.__style=n,h.__detail=
q,g=!0):(h=b.getWritable(),h.__text=l);b=u();h=[h];l=l.length;for(var x=1;x<f;x++){var m=a[x],t=m.length;m=L(m).getWritable();m.__format=k;m.__style=n;m.__detail=q;var A=m.__key;t=l+t;if(D(b)){var w=b.anchor,y=b.focus;w.key===d&&"text"===w.type&&w.offset>l&&w.offset<=t&&(w.key=A,w.offset-=l,b.dirty=!0);y.key===d&&"text"===y.type&&y.offset>l&&y.offset<=t&&(y.key=A,y.offset-=l,b.dirty=!0);}e===d&&J(A);l=t;h.push(m);}null!==c&&(d=this.getPreviousSibling(),e=this.getNextSibling(),null!==d&&kc(d),null!==
e&&kc(e),d=c.getWritable(),e=this.getIndexWithinParent(),g?(d.splice(e,0,h),this.remove()):d.splice(e,1,h),D(b)&&te(b,c,e,f-1));return h;};_proto3.mergeWithSibling=function mergeWithSibling(a){var b=a===this.getPreviousSibling();b||a===this.getNextSibling()||r(50);var c=this.__key;var d=a.__key,e=this.__text,f=e.length;lc()===d&&J(c);var g=u();if(D(g)){var h=g.anchor,k=g.focus;null!==h&&h.key===d&&(Ne(h,b,c,a,f),g.dirty=!0);null!==k&&k.key===d&&(Ne(k,b,c,a,f),g.dirty=!0);}c=a.__text;this.setTextContent(b?c+e:e+c);b=this.getWritable();
a.remove();return b;};_proto3.isTextEntity=function isTextEntity(){return!1;};return He;}(ue);function Le(a){return{forChild:Oe(a.style),node:null};}function Je(a){return{forChild:Oe(a.style,"normal"===a.style.fontWeight?void 0:"bold"),node:null};}var Pe=new WeakMap();
function Ie(a){null===a.parentElement&&r(129);for(var b=a.textContent||"",c,d=a.parentNode,e=[a];null!==d&&void 0===(c=Pe.get(d))&&!("PRE"===d.nodeName||1===d.nodeType&&void 0!==d.style&&void 0!==d.style.whiteSpace&&d.style.whiteSpace.startsWith("pre"));){e.push(d),d=d.parentNode;}c=void 0===c?d:c;for(d=0;d<e.length;d++){Pe.set(e[d],c);}if(null!==c){b=b.split(/(\r?\n|\t)/);a=[];e=b.length;for(c=0;c<e;c++){d=b[c],"\n"===d||"\r\n"===d?a.push(Be()):"\t"===d?a.push(Qe()):""!==d&&a.push(L(d));}return{node:a};}b=
b.replace(/\r/g,"").replace(/[ \t\n]+/g," ");if(""===b)return{node:null};if(" "===b[0]){e=a;for(c=!0;null!==e&&null!==(e=Re(e,!1));){if(d=e.textContent||"",0<d.length){/[ \t\n]$/.test(d)&&(b=b.slice(1));c=!1;break;}}c&&(b=b.slice(1));}if(" "===b[b.length-1]){for(e=!0;null!==a&&null!==(a=Re(a,!0));){if(0<(a.textContent||"").replace(/^( |\t|\r?\n)+/,"").length){e=!1;break;}}e&&(b=b.slice(0,b.length-1));}return""===b?{node:null}:{node:L(b)};}
function Re(a,b){for(;;){for(var c=void 0;null===(c=b?a.nextSibling:a.previousSibling);){if(a=a.parentElement,null===a)return null;}a=c;if(1===a.nodeType&&(c=a.style.display,""===c&&!Nc(a)||""!==c&&!c.startsWith("inline")))return null;for(;null!==(c=b?a.firstChild:a.lastChild);){a=c;}if(3===a.nodeType)return a;if("BR"===a.nodeName)return null;}}var Se={code:"code",em:"italic",i:"italic",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};
function Ke(a){var b=Se[a.nodeName.toLowerCase()];return void 0===b?{node:null}:{forChild:Oe(a.style,b),node:null};}function L(a){if(a===void 0){a="";}return Ic(new He(a));}function C(a){return a instanceof He;}
function Oe(a,b){var c=a.fontWeight,d=a.textDecoration.split(" "),e="700"===c||"bold"===c,f=d.includes("line-through"),g="italic"===a.fontStyle,h=d.includes("underline"),k=a.verticalAlign;return function(l){if(!C(l))return l;e&&!l.hasFormat("bold")&&l.toggleFormat("bold");f&&!l.hasFormat("strikethrough")&&l.toggleFormat("strikethrough");g&&!l.hasFormat("italic")&&l.toggleFormat("italic");h&&!l.hasFormat("underline")&&l.toggleFormat("underline");"sub"!==k||l.hasFormat("subscript")||l.toggleFormat("subscript");
"super"!==k||l.hasFormat("superscript")||l.toggleFormat("superscript");b&&!l.hasFormat(b)&&l.toggleFormat(b);return l;};}var
bf=function(_He){babelHelpers.inheritsLoose(bf,_He);bf.getType=function getType(){return"tab";};bf.clone=function clone(a){return new bf(a.__key);};var _proto4=bf.prototype;_proto4.afterCloneFrom=function afterCloneFrom(a){_He.prototype.afterCloneFrom.call(this,a);this.__text=a.__text;};function bf(a){var _this2;_this2=_He.call(this,"\t",a)||this;_this2.__detail=2;return _this2;}bf.importDOM=function importDOM(){return null;};_proto4.createDOM=function createDOM(a){var _b$classList;var b=_He.prototype.createDOM.call(this,a);a=yc(a.theme,"tab");void 0!==a&&(_b$classList=b.classList).add.apply(_b$classList,a);return b;};bf.importJSON=function importJSON(a){var b=Qe();b.setFormat(a.format);b.setStyle(a.style);return b;};_proto4.exportJSON=function exportJSON(){return babelHelpers["extends"]({},_He.prototype.exportJSON.call(this),{type:"tab",version:1});};_proto4.setTextContent=function setTextContent(){r(126);};_proto4.setDetail=function setDetail(){r(127);};_proto4.setMode=function setMode(){r(128);};_proto4.canInsertTextBefore=function canInsertTextBefore(){return!1;};_proto4.canInsertTextAfter=function canInsertTextAfter(){return!1;};return bf;}(He);
function Qe(){return Ic(new bf());}function cf(a){return a instanceof bf;}var
df=function(){function df(a,b,c){this._selection=null;this.key=a;this.offset=b;this.type=c;}var _proto5=df.prototype;_proto5.is=function is(a){return this.key===a.key&&this.offset===a.offset&&this.type===a.type;};_proto5.isBefore=function isBefore(a){var b=this.getNode(),c=a.getNode(),d=this.offset;a=a.offset;if(H(b)){var e=b.getDescendantByIndex(d);b=null!=e?e:b;}H(c)&&(e=c.getDescendantByIndex(a),c=null!=e?e:c);return b===c?d<a:b.isBefore(c);};_proto5.getNode=function getNode(){var a=z(this.key);null===a&&r(20);return a;};_proto5.set=function set(a,b,c){var d=this._selection,e=this.key;this.key=a;this.offset=b;this.type=c;
mc()||(lc()===e&&J(a),null!==d&&(d.setCachedNodes(null),d.dirty=!0));};return df;}();function ef(a,b,c){return new df(a,b,c);}function ff(a,b){var c=b.__key,d=a.offset,e="element";if(C(b))e="text",b=b.getTextContentSize(),d>b&&(d=b);else if(!H(b)){var f=b.getNextSibling();if(C(f))c=f.__key,d=0,e="text";else if(f=b.getParent())c=f.__key,d=b.getIndexWithinParent()+1;}a.set(c,d,e);}function ve(a,b){if(H(b)){var c=b.getLastDescendant();H(c)||C(c)?ff(a,c):ff(a,b);}else ff(a,b);}
function gf(a,b,c,d){a.key=b;a.offset=c;a.type=d;}var
hf=function(){function hf(a){this._cachedNodes=null;this._nodes=a;this.dirty=!1;}var _proto6=hf.prototype;_proto6.getCachedNodes=function getCachedNodes(){return this._cachedNodes;};_proto6.setCachedNodes=function setCachedNodes(a){this._cachedNodes=a;};_proto6.is=function is(a){if(!se(a))return!1;var b=this._nodes,c=a._nodes;return b.size===c.size&&Array.from(b).every(function(d){return c.has(d);});};_proto6.isCollapsed=function isCollapsed(){return!1;};_proto6.isBackward=function isBackward(){return!1;};_proto6.getStartEndPoints=function getStartEndPoints(){return null;};_proto6.add=function add(a){this.dirty=!0;this._nodes.add(a);this._cachedNodes=null;};_proto6["delete"]=function _delete(a){this.dirty=!0;this._nodes["delete"](a);this._cachedNodes=null;};_proto6.clear=function clear(){this.dirty=!0;this._nodes.clear();
this._cachedNodes=null;};_proto6.has=function has(a){return this._nodes.has(a);};_proto6.clone=function clone(){return new hf(new Set(this._nodes));};_proto6.extract=function extract(){return this.getNodes();};_proto6.insertRawText=function insertRawText(){};_proto6.insertText=function insertText(){};_proto6.insertNodes=function insertNodes(a){var b=this.getNodes(),c=b.length;var d=b[c-1];if(C(d))d=d.select();else{var e=d.getIndexWithinParent()+1;d=d.getParentOrThrow().select(e,e);}d.insertNodes(a);for(a=0;a<c;a++){b[a].remove();}};_proto6.getNodes=function getNodes(){var a=this._cachedNodes;if(null!==a)return a;var b=this._nodes;a=[];for(var _iterator8=b,_isArray8=Array.isArray(_iterator8),_i10=0,_iterator8=_isArray8?_iterator8:_iterator8[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref18;if(_isArray8){if(_i10>=_iterator8.length)break;_ref18=_iterator8[_i10++];}else{_i10=_iterator8.next();if(_i10.done)break;_ref18=_i10.value;}var c=_ref18;b=z(c),null!==b&&a.push(b);}mc()||(this._cachedNodes=
a);return a;};_proto6.getTextContent=function getTextContent(){var a=this.getNodes(),b="";for(var c=0;c<a.length;c++){b+=a[c].getTextContent();}return b;};return hf;}();function D(a){return a instanceof jf;}var
jf=function(){function jf(a,b,c,d){this.anchor=a;this.focus=b;a._selection=this;b._selection=this;this._cachedNodes=null;this.format=c;this.style=d;this.dirty=!1;}var _proto7=jf.prototype;_proto7.getCachedNodes=function getCachedNodes(){return this._cachedNodes;};_proto7.setCachedNodes=function setCachedNodes(a){this._cachedNodes=a;};_proto7.is=function is(a){return D(a)?this.anchor.is(a.anchor)&&this.focus.is(a.focus)&&this.format===a.format&&this.style===a.style:!1;};_proto7.isCollapsed=function isCollapsed(){return this.anchor.is(this.focus);};_proto7.getNodes=function getNodes(){var a=this._cachedNodes;if(null!==a)return a;a=this.anchor;var b=this.focus,c=a.isBefore(b),
d=c?a:b;c=c?b:a;a=d.getNode();b=c.getNode();var e=d.offset;d=c.offset;H(a)&&(c=a.getDescendantByIndex(e),a=null!=c?c:a);H(b)&&(c=b.getDescendantByIndex(d),null!==c&&c!==a&&b.getChildAtIndex(d)===c&&(c=c.getPreviousSibling()),b=null!=c?c:b);a=a.is(b)?H(a)&&0<a.getChildrenSize()?[]:[a]:a.getNodesBetween(b);mc()||(this._cachedNodes=a);return a;};_proto7.setTextNodeRange=function setTextNodeRange(a,b,c,d){gf(this.anchor,a.__key,b,"text");gf(this.focus,c.__key,d,"text");this._cachedNodes=null;this.dirty=!0;};_proto7.getTextContent=function getTextContent(){var a=this.getNodes();
if(0===a.length)return"";var b=a[0],c=a[a.length-1],d=this.anchor,e=this.focus,f=d.isBefore(e),_kf=kf(this),g=_kf[0],h=_kf[1],k="",l=!0;for(var n=0;n<a.length;n++){var q=a[n];if(H(q)&&!q.isInline())l||(k+="\n"),l=q.isEmpty()?!1:!0;else if(l=!1,C(q)){var m=q.getTextContent();if(q===b){if(q===c){if("element"!==d.type||"element"!==e.type||e.offset===d.offset)m=g<h?m.slice(g,h):m.slice(h,g);}else m=f?m.slice(g):m.slice(h);}else q===c&&(m=f?m.slice(0,h):m.slice(0,g));k+=m;}else!B(q)&&!Qc(q)||q===c&&this.isCollapsed()||(k+=
q.getTextContent());}return k;};_proto7.applyDOMRange=function applyDOMRange(a){var b=G(),c=b.getEditorState()._selection;a=lf(a.startContainer,a.startOffset,a.endContainer,a.endOffset,b,c);if(null!==a){var _a8=a,d=_a8[0],e=_a8[1];gf(this.anchor,d.key,d.offset,d.type);gf(this.focus,e.key,e.offset,e.type);this._cachedNodes=null;}};_proto7.clone=function clone(){var a=this.anchor,b=this.focus;return new jf(ef(a.key,a.offset,a.type),ef(b.key,b.offset,b.type),this.format,this.style);};_proto7.toggleFormat=function toggleFormat(a){this.format=$b(this.format,a,null);this.dirty=!0;};_proto7.setStyle=function setStyle(a){this.style=a;this.dirty=
!0;};_proto7.hasFormat=function hasFormat(a){return 0!==(this.format&hb[a]);};_proto7.insertRawText=function insertRawText(a){a=a.split(/(\r?\n|\t)/);var b=[],c=a.length;for(var d=0;d<c;d++){var e=a[d];"\n"===e||"\r\n"===e?b.push(Be()):"\t"===e?b.push(Qe()):b.push(L(e));}this.insertNodes(b);};_proto7.insertText=function insertText(a){var b=this.anchor,c=this.focus,d=this.format,e=this.style,f=b,g=c;!this.isCollapsed()&&c.isBefore(b)&&(f=c,g=b);if("element"===f.type){b=f;c=g;var h=b.getNode(),k=h.getChildAtIndex(b.offset),l=L(),n=M(h)?we().append(l):l;l.setFormat(d);l.setStyle(e);null===k?
h.append(n):k.insertBefore(n);b.is(c)&&c.set(l.__key,0,"text");b.set(l.__key,0,"text");}c=f.offset;n=g.offset;h=this.getNodes();k=h.length;b=h[0];C(b)||r(26);l=b.getTextContent().length;var q=b.getParentOrThrow(),m=h[k-1];1===k&&"element"===g.type&&(n=l,g.set(f.key,n,"text"));if(this.isCollapsed()&&c===l&&(b.isSegmented()||b.isToken()||!b.canInsertTextAfter()||!q.canInsertTextAfter()&&null===b.getNextSibling())){if(f=b.getNextSibling(),C(f)&&f.canInsertTextBefore()&&!Xb(f)||(f=L(),f.setFormat(d),f.setStyle(e),
q.canInsertTextAfter()?b.insertAfter(f):q.insertAfter(f)),f.select(0,0),b=f,""!==a){this.insertText(a);return;}}else if(this.isCollapsed()&&0===c&&(b.isSegmented()||b.isToken()||!b.canInsertTextBefore()||!q.canInsertTextBefore()&&null===b.getPreviousSibling())){f=b.getPreviousSibling();if(!C(f)||Xb(f))f=L(),f.setFormat(d),q.canInsertTextBefore()?b.insertBefore(f):q.insertBefore(f);f.select();b=f;if(""!==a){this.insertText(a);return;}}else if(b.isSegmented()&&c!==l)f=L(b.getTextContent()),f.setFormat(d),
b.replace(f),b=f;else if(!(this.isCollapsed()||""===a||(f=m.getParent(),q.canInsertTextBefore()&&q.canInsertTextAfter()&&(!H(f)||f.canInsertTextBefore()&&f.canInsertTextAfter())))){this.insertText("");mf(this.anchor,this.focus,null);this.insertText(a);return;}if(1===k){if(b.isToken())a=L(a),a.select(),b.replace(a);else{h=b.getFormat();k=b.getStyle();if(c===n&&(h!==d||k!==e)){if(""===b.getTextContent())b.setFormat(d),b.setStyle(e);else{var _b$splitText;h=L(a);h.setFormat(d);h.setStyle(e);h.select();0===c?b.insertBefore(h,
!1):((_b$splitText=b.splitText(c),b=_b$splitText[0],_b$splitText),b.insertAfter(h,!1));h.isComposing()&&"text"===this.anchor.type&&(this.anchor.offset-=a.length);return;}}else if(cf(b)){a=L(a);a.setFormat(d);a.setStyle(e);a.select();b.replace(a);return;}b=b.spliceText(c,n-c,a,!0);""===b.getTextContent()?b.remove():"text"===this.anchor.type&&(b.isComposing()?this.anchor.offset-=a.length:(this.format=h,this.style=k));}}else{d=new Set([].concat(b.getParentKeys(),m.getParentKeys()));q=H(b)?b:b.getParentOrThrow();e=H(m)?m:m.getParentOrThrow();f=m;if(!q.is(e)&&
e.isInline()){do{f=e,e=e.getParentOrThrow();}while(e.isInline());}if("text"===g.type&&(0!==n||""===m.getTextContent())||"element"===g.type&&m.getIndexWithinParent()<n){if(C(m)&&!m.isToken()&&n!==m.getTextContentSize()){if(m.isSegmented()){var t=L(m.getTextContent());m.replace(t);m=t;}M(g.getNode())||"text"!==g.type||(m=m.spliceText(0,n,""));d.add(m.__key);}else g=m.getParentOrThrow(),g.canBeEmpty()||1!==g.getChildrenSize()?m.remove():g.remove();}else d.add(m.__key);g=e.getChildren();n=new Set(h);m=q.is(e);
q=q.isInline()&&null===b.getNextSibling()?q:b;for(t=g.length-1;0<=t;t--){var x=g[t];if(x.is(b)||H(x)&&x.isParentOf(b))break;x.isAttached()&&(!n.has(x)||x.is(f)?m||q.insertAfter(x,!1):x.remove());}if(!m)for(g=e,e=null;null!==g;){n=g.getChildren();m=n.length;if(0===m||n[m-1].is(e))d["delete"](g.__key),e=g;g=g.getParent();}b.isToken()?c===l?b.select():(a=L(a),a.select(),b.replace(a)):(b=b.spliceText(c,l-c,a,!0),""===b.getTextContent()?b.remove():b.isComposing()&&"text"===this.anchor.type&&(this.anchor.offset-=
a.length));for(a=1;a<k;a++){b=h[a],d.has(b.__key)||b.remove();}}};_proto7.removeText=function removeText(){if(!this.isCollapsed()){var a=this.anchor,b=this.focus,c=this.getNodes(),d=this.isBackward()?b:a,e=this.isBackward()?a:b,f=d.getNode(),g=e.getNode(),h=Rc(f,Pc),k=Rc(g,Pc);C(f)&&f.isToken()&&d.offset<f.getTextContentSize()&&(d.offset=0);0<e.offset&&C(g)&&g.isToken()&&(e.offset=g.getTextContentSize());c.forEach(function(l){Ec(f,l)||Ec(g,l)||l.getKey()===f.getKey()||l.getKey()===g.getKey()||l.remove();});c=function c(l,n){if(""===l.getTextContent())l.remove();else
if(0!==n&&Xb(l))return n=L(l.getTextContent()),n.setFormat(l.getFormat()),n.setStyle(l.getStyle()),l.replace(n);};if(f===g&&C(f))e=Math.abs(b.offset-a.offset),f.spliceText(d.offset,e,"",!0),c(f,e);else{if(C(f)){var l=f.getTextContentSize()-d.offset;f.spliceText(d.offset,l,"");f=c(f,l)||f;}C(g)&&(g.spliceText(0,e.offset,""),g=c(g,e.offset)||g);f.isAttached()&&C(f)?f.selectEnd():g.isAttached()&&C(g)&&g.selectStart();H(h)&&H(k)&&h!==k&&(h.append.apply(h,k.getChildren()),k.remove(),e.set(d.key,d.offset,
d.type));}}};_proto7.formatText=function formatText(a,b){if(b===void 0){b=null;}if(this.isCollapsed())this.toggleFormat(a),J(null);else{var c=this.getNodes(),d=[];for(var _iterator9=c,_isArray9=Array.isArray(_iterator9),_i11=0,_iterator9=_isArray9?_iterator9:_iterator9[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref19;if(_isArray9){if(_i11>=_iterator9.length)break;_ref19=_iterator9[_i11++];}else{_i11=_iterator9.next();if(_i11.done)break;_ref19=_i11.value;}var e=_ref19;C(e)&&d.push(e);}var f=function f(t){c.forEach(function(x){if(Ld(x)){var A=x.getFormatFlags(a,t);x.setTextFormat(A);}});},g=d.length;if(0===g)this.toggleFormat(a),J(null),f(b);else{var h=this.anchor,k=this.focus,l=this.isBackward();e=l?k:h;h=l?h:k;var n=0;l=d[0];k="element"===e.type?0:e.offset;"text"===e.type&&k===l.getTextContentSize()&&(n=1,l=d[1],k=0);if(null!=l){b=l.getFormatFlags(a,
b);f(b);--g;var q=d[g];f="text"===h.type?h.offset:q.getTextContentSize();if(l.is(q))k!==f&&(Xb(l)||0===k&&f===l.getTextContentSize()?l.setFormat(b):(d=l.splitText(k,f),d=0===k?d[0]:d[1],d.setFormat(b),"text"===e.type&&e.set(d.__key,0,"text"),"text"===h.type&&h.set(d.__key,f-k,"text")),this.format=b);else{var _l$splitText,_q$splitText;0===k||Xb(l)||((_l$splitText=l.splitText(k),l=_l$splitText[1],_l$splitText),k=0);l.setFormat(b);var m=q.getFormatFlags(a,b);0<f&&(f===q.getTextContentSize()||Xb(q)||(_q$splitText=q.splitText(f),q=_q$splitText[0],_q$splitText),q.setFormat(m));for(n+=1;n<g;n++){var t=d[n],x=t.getFormatFlags(a,
m);t.setFormat(x);}"text"===e.type&&e.set(l.__key,k,"text");"text"===h.type&&h.set(q.__key,f,"text");this.format=b|m;}}}}};_proto7.insertNodes=function insertNodes(a){if(0!==a.length){if("root"===this.anchor.key){this.insertParagraph();var b=u();D(b)||r(134);return b.insertNodes(a);}b=(this.isBackward()?this.focus:this.anchor).getNode();var c=Rc(b,Pc),d=a[a.length-1];if(H(c)&&"__language"in c)"__language"in a[0]?this.insertText(a[0].getTextContent()):(b=nf(this),c.splice(b,0,a),d.selectEnd());else if(a.some(function(h){return(H(h)||B(h))&&!h.isInline();})){var _b3;d=
of(a);a=d.getLastDescendant();var e=d.getChildren();d=H(c)&&c.isEmpty()?null:this.insertParagraph();var f=e[e.length-1],g=e[0];(function(h){return H(h)&&Pc(h)&&!h.isEmpty()&&H(c)&&(!c.isEmpty()||c.canMergeWhenEmpty());})(g)&&(H(c)||r(211,b.constructor.name,b.getType()),c.append.apply(c,g.getChildren()),g=e[1]);g&&(null===c&&r(212,b.constructor.name,b.getType()),xe(c,g));b=Rc(a,Pc);d&&H(b)&&(d.canMergeWhenEmpty()||Pc(f))&&((_b3=b).append.apply(_b3,d.getChildren()),d.remove());H(c)&&c.isEmpty()&&c.remove();a.selectEnd();a=H(c)?c.getLastChild():
null;Qc(a)&&b!==c&&a.remove();}else H(c)||r(211,b.constructor.name,b.getType()),b=nf(this),c.splice(b,0,a),d.selectEnd();}};_proto7.insertParagraph=function insertParagraph(){var _a9;if("root"===this.anchor.key){var a=we();K().splice(this.anchor.offset,0,[a]);a.select();return a;}var b=nf(this);a=Rc(this.anchor.getNode(),Pc);H(a)||r(213);b=(b=a.getChildAtIndex(b))?[b].concat(b.getNextSiblings()):[];return(a=a.insertNewAfter(this,!1))?((_a9=a).append.apply(_a9,b),a.selectStart(),a):null;};_proto7.insertLineBreak=function insertLineBreak(a){var b=Be();this.insertNodes([b]);a&&(a=b.getParentOrThrow(),
b=b.getIndexWithinParent(),a.select(b,b));};_proto7.extract=function extract(){var _f$splitText,_g$splitText;var a=this.getNodes(),b=a.length,c=b-1,d=this.anchor;var e=this.focus;var f=a[0];var g=a[c],_kf2=kf(this),h=_kf2[0],k=_kf2[1];if(0===b)return[];if(1===b)return C(f)&&!this.isCollapsed()?(a=h>k?k:h,c=f.splitText(a,h>k?h:k),a=0===a?c[0]:c[1],null!=a?[a]:[]):[f];b=d.isBefore(e);C(f)&&(d=b?h:k,d===f.getTextContentSize()?a.shift():0!==d&&((_f$splitText=f.splitText(d),f=_f$splitText[1],_f$splitText),a[0]=f));C(g)&&(f=g.getTextContent().length,b=b?k:h,0===b?a.pop():b!==f&&((_g$splitText=g.splitText(b),g=_g$splitText[0],_g$splitText),a[c]=g));return a;};_proto7.modify=function modify(a,
b,c){var d=this.focus,e=this.anchor,f="move"===a,g=Bc(d,b);if(B(g)&&!g.isIsolated())f&&g.isKeyboardSelectable()?(b=pf(),b.add(g.__key),Eb(b)):(a=b?g.getPreviousSibling():g.getNextSibling(),C(a)?(g=a.__key,b=b?a.getTextContent().length:0,d.set(g,b,"text"),f&&e.set(g,b,"text")):(c=g.getParentOrThrow(),H(a)?(c=a.__key,g=b?a.getChildrenSize():0):(g=g.getIndexWithinParent(),c=c.__key,b||g++),d.set(c,g,"element"),f&&e.set(c,g,"element")));else if(e=G(),d=Bb(e._window)){var h=e._blockCursorElement,k=e._rootElement;
null===k||null===h||!H(g)||g.isInline()||g.canBeEmpty()||Lc(h,e,k);d.modify(a,b?"backward":"forward",c);if(0<d.rangeCount&&(g=d.getRangeAt(0),e=this.anchor.getNode(),e=M(e)?e:Fc(e),this.applyDOMRange(g),this.dirty=!0,!f)){f=this.getNodes();a=[];c=!1;for(h=0;h<f.length;h++){k=f[h],Ec(k,e)?a.push(k):c=!0;}c&&0<a.length&&(b?(b=a[0],H(b)?b.selectStart():b.getParentOrThrow().selectStart()):(b=a[a.length-1],H(b)?b.selectEnd():b.getParentOrThrow().selectEnd()));if(d.anchorNode!==g.startContainer||d.anchorOffset!==
g.startOffset)b=this.focus,f=this.anchor,d=f.key,g=f.offset,e=f.type,gf(f,b.key,b.offset,b.type),gf(b,d,g,e),this._cachedNodes=null;}}};_proto7.forwardDeletion=function forwardDeletion(a,b,c){return!c&&("element"===a.type&&H(b)&&a.offset===b.getChildrenSize()||"text"===a.type&&a.offset===b.getTextContentSize())&&(a=b.getParent(),b=b.getNextSibling()||(null===a?null:a.getNextSibling()),H(b)&&b.isShadowRoot())?!0:!1;};_proto7.deleteCharacter=function deleteCharacter(a){var b=this.isCollapsed();if(this.isCollapsed()){var c=this.anchor,d=c.getNode();if(this.forwardDeletion(c,
d,a))return;var e=this.focus,f=Bc(e,a);if(B(f)&&!f.isIsolated()){f.isKeyboardSelectable()&&H(d)&&0===d.getChildrenSize()?(d.remove(),a=pf(),a.add(f.__key),Eb(a)):(f.remove(),G().dispatchCommand(aa,void 0));return;}if(!a&&H(f)&&H(d)&&d.isEmpty()){d.remove();f.selectStart();return;}this.modify("extend",a,"character");if(!this.isCollapsed()){f="text"===e.type?e.getNode():null;d="text"===c.type?c.getNode():null;if(null!==f&&f.isSegmented()){if(c=e.offset,e=f.getTextContentSize(),f.is(d)||a&&c!==e||!a&&
0!==c){qf(f,a,c);return;}}else if(null!==d&&d.isSegmented()&&(c=c.offset,e=d.getTextContentSize(),d.is(f)||a&&0!==c||!a&&c!==e)){qf(d,a,c);return;}d=this.anchor;f=this.focus;c=d.getNode();e=f.getNode();if(c===e&&"text"===d.type&&"text"===f.type){var g=d.offset,h=f.offset;var k=g<h;e=k?g:h;h=k?h:g;g=h-1;e!==g&&(c=c.getTextContent().slice(e,h),rc(c)||(a?f.offset=g:d.offset=g));}}else if(a&&0===c.offset&&("element"===c.type?c.getNode():c.getNode().getParentOrThrow()).collapseAtStart(this))return;}this.removeText();
a&&!b&&this.isCollapsed()&&"element"===this.anchor.type&&0===this.anchor.offset&&(a=this.anchor.getNode(),a.isEmpty()&&M(a.getParent())&&0===a.getIndexWithinParent()&&a.collapseAtStart(this));};_proto7.deleteLine=function deleteLine(a){if(this.isCollapsed()){var b="element"===this.anchor.type;b&&this.insertText(" ");this.modify("extend",a,"lineboundary");this.isCollapsed()&&0===this.anchor.offset&&this.modify("extend",a,"character");b&&(a=a?this.anchor:this.focus,a.set(a.key,a.offset+1,a.type));}this.removeText();};_proto7.deleteWord=function deleteWord(a){if(this.isCollapsed()){var b=
this.anchor,c=b.getNode();if(this.forwardDeletion(b,c,a))return;this.modify("extend",a,"word");}this.removeText();};_proto7.isBackward=function isBackward(){return this.focus.isBefore(this.anchor);};_proto7.getStartEndPoints=function getStartEndPoints(){return[this.anchor,this.focus];};return jf;}();function se(a){return a instanceof hf;}function rf(a){var b=a.offset;if("text"===a.type)return b;a=a.getNode();return b===a.getChildrenSize()?a.getTextContent().length:0;}
function kf(a){a=a.getStartEndPoints();if(null===a)return[0,0];var _a10=a,b=_a10[0],c=_a10[1];return"element"===b.type&&"element"===c.type&&b.key===c.key&&b.offset===c.offset?[0,0]:[rf(b),rf(c)];}function qf(a,b,c){var d=a.getTextContent().split(/(?=\s)/g),e=d.length,f=0,g=0;for(var h=0;h<e;h++){var k=d[h],l=h===e-1;g=f;f+=k.length;if(b&&f===c||f>c||l){d.splice(h,1);l&&(g=void 0);break;}}b=d.join("").trim();""===b?a.remove():(a.setTextContent(b),a.select(g,g));}
function sf(a,b,c,d){var e=b;if(1===a.nodeType){var f=!1,g=a.childNodes,h=g.length;var k=d._blockCursorElement;e===h&&(f=!0,e=h-1);var l=g[e];h=!1;l===k?(l=g[e+1],h=!0):null!==k&&(e=k.parentNode,a===e&&Array.prototype.indexOf.call(e.children,k));k=qc(l);if(C(k))e=f?k.getTextContentSize():0;else{g=qc(a);if(null===g)return null;if(H(g)){e=d.getElementByKey(g.getKey());null===e&&r(214);d=g.getDOMSlot(e);var _d$resolveChildIndex=d.resolveChildIndex(g,e,a,b);g=_d$resolveChildIndex[0];e=_d$resolveChildIndex[1];H(g)||r(215);f&&e>=g.getChildrenSize()&&(e=Math.max(0,g.getChildrenSize()-
1));a=g.getChildAtIndex(e);if(b=H(a))b=a.getParent(),b=null===c||null===b||!b.canBeEmpty()||b!==c.getNode();b&&(c=f?a.getLastDescendant():a.getFirstDescendant(),null===c?g=a:(a=c,g=H(a)?a:a.getParentOrThrow()),e=0);C(a)?(k=a,g=null,e=f?a.getTextContentSize():0):a!==g&&f&&!h&&(H(g)||r(216),e=Math.min(g.getChildrenSize(),e+1));}else f=g.getIndexWithinParent(),e=0===b&&B(g)&&qc(a)===g?f:f+1,g=g.getParentOrThrow();if(H(g))return ef(g.__key,e,"element");}}else k=qc(a);return C(k)?ef(k.__key,e,"text"):null;}
function tf(a,b,c){var d=a.offset,e=a.getNode();0===d?(d=e.getPreviousSibling(),e=e.getParent(),b)?(c||!b)&&null===d&&H(e)&&e.isInline()&&(b=e.getPreviousSibling(),C(b)&&(a.key=b.__key,a.offset=b.getTextContent().length)):H(d)&&!c&&d.isInline()?(a.key=d.__key,a.offset=d.getChildrenSize(),a.type="element"):C(d)&&(a.key=d.__key,a.offset=d.getTextContent().length):d===e.getTextContent().length&&(d=e.getNextSibling(),e=e.getParent(),b&&H(d)&&d.isInline()?(a.key=d.__key,a.offset=0,a.type="element"):(c||
b)&&null===d&&H(e)&&e.isInline()&&!e.canInsertTextAfter()&&(b=e.getNextSibling(),C(b)&&(a.key=b.__key,a.offset=0)));}function mf(a,b,c){if("text"===a.type&&"text"===b.type){var d=a.isBefore(b);var e=a.is(b);tf(a,d,e);tf(b,!d,e);e&&(b.key=a.key,b.offset=a.offset,b.type=a.type);d=G();d.isComposing()&&d._compositionKey!==a.key&&D(c)&&(d=c.anchor,c=c.focus,gf(a,d.key,d.offset,d.type),gf(b,c.key,c.offset,c.type));}}
function lf(a,b,c,d,e,f){if(null===a||null===c||!Tb(e,a,c))return null;b=sf(a,b,D(f)?f.anchor:null,e);if(null===b)return null;d=sf(c,d,D(f)?f.focus:null,e);if(null===d||"element"===b.type&&"element"===d.type&&(a=qc(a),c=qc(c),B(a)&&B(c)))return null;mf(b,d,f);return[b,d];}function Me(a,b,c,d,e,f){var g=ic();a=new jf(ef(a,b,e),ef(c,d,f),0,"");a.dirty=!0;return g._selection=a;}function pf(){return new hf(new Set());}
function uf(a){var b=a.getEditorState()._selection,c=Bb(a._window);return D(b)||null==b?ie(b,c,a,null):b.clone();}
function ie(a,b,c,d){var e=c._window;if(null===e)return null;var f=(e=d||e.event)?e.type:void 0;d="selectionchange"===f;e=!pb&&(d||"beforeinput"===f||"compositionstart"===f||"compositionend"===f||"click"===f&&e&&3===e.detail||"drop"===f||void 0===f);var g;if(!D(a)||e){if(null===b)return null;e=b.anchorNode;f=b.focusNode;g=b.anchorOffset;b=b.focusOffset;if(d&&D(a)&&!Tb(c,e,f))return a.clone();}else return a.clone();c=lf(e,g,f,b,c,a);if(null===c)return null;var _c=c,h=_c[0],k=_c[1];return new jf(h,k,D(a)?a.format:
0,D(a)?a.style:"");}function u(){return ic()._selection;}function vc(){return G()._editorState._selection;}
function te(a,b,c,d){if(d===void 0){d=1;}var e=a.anchor,f=a.focus,g=e.getNode(),h=f.getNode();if(b.is(g)||b.is(h)){g=b.__key;if(a.isCollapsed()){if(b=e.offset,c<=b&&0<d||c<b&&0>d)c=Math.max(0,b+d),e.set(g,c,"element"),f.set(g,c,"element"),vf(a);}else{var l=a.isBackward();h=l?f:e;var k=h.getNode();e=l?e:f;f=e.getNode();b.is(k)&&(k=h.offset,(c<=k&&0<d||c<k&&0>d)&&h.set(g,Math.max(0,k+d),"element"));b.is(f)&&(b=e.offset,(c<=b&&0<d||c<b&&0>d)&&e.set(g,Math.max(0,b+d),"element"));}vf(a);}}
function vf(a){var b=a.anchor,c=b.offset;var d=a.focus;var e=d.offset,f=b.getNode(),g=d.getNode();if(a.isCollapsed())H(f)&&(g=f.getChildrenSize(),g=(e=c>=g)?f.getChildAtIndex(g-1):f.getChildAtIndex(c),C(g)&&(c=0,e&&(c=g.getTextContentSize()),b.set(g.__key,c,"text"),d.set(g.__key,c,"text")));else{if(H(f)){var h=f.getChildrenSize();c=(a=c>=h)?f.getChildAtIndex(h-1):f.getChildAtIndex(c);C(c)&&(f=0,a&&(f=c.getTextContentSize()),b.set(c.__key,f,"text"));}H(g)&&(c=g.getChildrenSize(),e=(b=e>=c)?g.getChildAtIndex(c-
1):g.getChildAtIndex(e),C(e)&&(g=0,b&&(g=e.getTextContentSize()),d.set(e.__key,g,"text")));}}function wf(a,b){b=b.getEditorState()._selection;a=a._selection;if(D(a)){var c=a.anchor;var d=a.focus,e;"text"===c.type&&(e=c.getNode(),e.selectionTransform(b,a));"text"===d.type&&(c=d.getNode(),e!==c&&c.selectionTransform(b,a));}}
function re(a,b,c,d,e){var f=null,g=0,h=null;null!==d?(f=d.__key,C(d)?(g=d.getTextContentSize(),h="text"):H(d)&&(g=d.getChildrenSize(),h="element")):null!==e&&(f=e.__key,C(e)?h="text":H(e)&&(h="element"));null!==f&&null!==h?a.set(f,g,h):(g=b.getIndexWithinParent(),-1===g&&(g=c.getChildrenSize()),a.set(c.__key,g,"element"));}function Ne(a,b,c,d,e){"text"===a.type?(a.key=c,b||(a.offset+=e)):a.offset>d.getIndexWithinParent()&&--a.offset;}
function nf(a){var b=a;a.isCollapsed()||b.removeText();a=u();D(a)&&(b=a);D(b)||r(161);a=b.anchor;b=a.getNode();for(a=a.offset;!Pc(b);){var _xf=xf(b,a);b=_xf[0];a=_xf[1];}return a;}
function xf(a,b){var _b4;var c=a.getParent();if(!c)return c=we(),K().append(c),c.select(),[K(),0];if(C(a)){var d=a.splitText(b);if(0===d.length)return[c,a.getIndexWithinParent()];a=0===b?0:1;a=d[0].getIndexWithinParent()+a;return[c,a];}if(!H(a)||0===b)return[c,a.getIndexWithinParent()];if(d=a.getChildAtIndex(b))b=new jf(ef(a.__key,b,"element"),ef(a.__key,b,"element"),0,""),(b=a.insertNewAfter(b))&&(_b4=b).append.apply(_b4,[d].concat(d.getNextSiblings()));return[c,a.getIndexWithinParent()+1];}
function of(a){var b=we(),c=null;for(var d=0;d<a.length;d++){var e=a[d],f=Qc(e);if(f||B(e)&&e.isInline()||H(e)&&e.isInline()||C(e)||e.isParentRequired()){if(null===c&&(c=e.createParentElementNode(),b.append(c),f))continue;null!==c&&c.append(e);}else b.append(e),c=null;}return b;}var T=null,U=null,V=!1,yf=!1,bc=0,zf={characterData:!0,childList:!0,subtree:!0};function mc(){return V||null!==T&&T._readOnly;}function I(){V&&r(13);}function ic(){null===T&&r(195,Af());return T;}
function G(){null===U&&r(196,Af());return U;}function Af(){var a=0;var b=new Set(),c=Wb.version;if("undefined"!==typeof window){for(var _iterator10=document.querySelectorAll("[contenteditable]"),_isArray10=Array.isArray(_iterator10),_i12=0,_iterator10=_isArray10?_iterator10:_iterator10[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref20;if(_isArray10){if(_i12>=_iterator10.length)break;_ref20=_iterator10[_i12++];}else{_i12=_iterator10.next();if(_i12.done)break;_ref20=_i12.value;}var e=_ref20;var d=Sb(e);Vb(d)?a++:d&&(d=String(d.constructor.version||"<0.17.1"),d===c&&(d+=" (separately built, likely a bundler configuration issue)"),b.add(d));}}a=" Detected on the page: "+a+" compatible editor(s) with version "+c;b.size&&(a+=" and incompatible editors with versions "+Array.from(b).join(", "));return a;}
function Bf(a,b,c){var d=b.__type;var e=a._nodes.get(d);void 0===e&&r(30,d);a=c.get(d);void 0===a&&(a=Array.from(e.transforms),c.set(d,a));c=a.length;for(d=0;d<c&&(a[d](b),b.isAttached());d++){;}}function Cf(a,b){b=b._dirtyLeaves;a=a._nodeMap;for(var _iterator11=b,_isArray11=Array.isArray(_iterator11),_i13=0,_iterator11=_isArray11?_iterator11:_iterator11[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref21;if(_isArray11){if(_i13>=_iterator11.length)break;_ref21=_iterator11[_i13++];}else{_i13=_iterator11.next();if(_i13.done)break;_ref21=_i13.value;}var c=_ref21;b=a.get(c),C(b)&&b.isAttached()&&b.isSimpleText()&&!b.isUnmergeable()&&Lb(b);}}function Df(a,b){if(b){a=a._updateTags;var c=b;Array.isArray(b)||(c=[b]);for(var _iterator12=c,_isArray12=Array.isArray(_iterator12),_i14=0,_iterator12=_isArray12?_iterator12:_iterator12[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref22;if(_isArray12){if(_i14>=_iterator12.length)break;_ref22=_iterator12[_i14++];}else{_i14=_iterator12.next();if(_i14.done)break;_ref22=_i14.value;}var d=_ref22;a.add(d);}}}
function Ef(a,b){var c=b._dirtyLeaves,d=b._dirtyElements;a=a._nodeMap;var e=lc(),f=new Map();var g=c;var h=g.size;for(var k=d,l=k.size;0<h||0<l;){if(0<h){b._dirtyLeaves=new Set();for(var _iterator13=g,_isArray13=Array.isArray(_iterator13),_i15=0,_iterator13=_isArray13?_iterator13:_iterator13[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref23;if(_isArray13){if(_i15>=_iterator13.length)break;_ref23=_iterator13[_i15++];}else{_i15=_iterator13.next();if(_i15.done)break;_ref23=_i15.value;}var n=_ref23;g=a.get(n),C(g)&&g.isAttached()&&g.isSimpleText()&&!g.isUnmergeable()&&Lb(g),void 0!==g&&void 0!==g&&g.__key!==e&&g.isAttached()&&Bf(b,g,f),c.add(n);}g=b._dirtyLeaves;h=g.size;if(0<h){bc++;continue;}}b._dirtyLeaves=new Set();b._dirtyElements=new Map();for(var _iterator14=k,_isArray14=Array.isArray(_iterator14),_i16=0,_iterator14=_isArray14?_iterator14:_iterator14[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref24;if(_isArray14){if(_i16>=_iterator14.length)break;_ref24=_iterator14[_i16++];}else{_i16=_iterator14.next();if(_i16.done)break;_ref24=_i16.value;}var _n=_ref24;if(k=_n[0],l=_n[1],"root"===k||l)g=a.get(k),void 0!==
g&&void 0!==g&&g.__key!==e&&g.isAttached()&&Bf(b,g,f),d.set(k,l);}g=b._dirtyLeaves;h=g.size;k=b._dirtyElements;l=k.size;bc++;}b._dirtyLeaves=c;b._dirtyElements=d;}function Ff(a,b){var c=a.type,d=b.get(c);void 0===d&&r(17,c);c=d.klass;a.type!==c.getType()&&r(18,c.name);c=c.importJSON(a);a=a.children;if(H(c)&&Array.isArray(a))for(d=0;d<a.length;d++){var e=Ff(a[d],b);c.append(e);}return c;}function Gf(a,b,c){var d=T,e=V,f=U;T=b;V=!0;U=a;try{return c();}finally{T=d,V=e,U=f;}}
function Hf(a,b){var c=a._pendingEditorState,d=a._rootElement,e=a._headless||null===d;if(null!==c){var f=a._editorState,g=f._selection,h=c._selection,k=0!==a._dirtyType,l=T,n=V,q=U,m=a._updating,t=a._observer,x=null;a._pendingEditorState=null;a._editorState=c;if(!e&&k&&null!==t){U=a;T=c;V=!1;a._updating=!0;try{var E=a._dirtyType,Q=a._dirtyElements,R=a._dirtyLeaves;t.disconnect();var A=E,w=Q,y=R;O=ad=N="";dd=2===A;pd=null;P=a;bd=a._config;cd=a._nodes;od=P._listeners.mutation;qd=w;rd=y;sd=f._nodeMap;
td=c._nodeMap;ed=c._readOnly;ud=new Map(a._keyToDOMMap);var ma=new Map();vd=ma;Jd("root",null);vd=ud=bd=td=sd=rd=qd=cd=P=void 0;x=ma;}catch(E){E instanceof Error&&a._onError(E);if(yf)throw E;If(a,null,d,c);Hb(a);a._dirtyType=2;yf=!0;Hf(a,f);yf=!1;return;}finally{t.observe(d,zf),a._updating=m,T=l,V=n,U=q;}}c._readOnly||(c._readOnly=!0);var F=a._dirtyLeaves,ba=a._dirtyElements,bb=a._normalizedNodes,ca=a._updateTags,fd=a._deferred;k&&(a._dirtyType=0,a._cloneNotNeeded.clear(),a._dirtyLeaves=new Set(),a._dirtyElements=
new Map(),a._normalizedNodes=new Set(),a._updateTags=new Set());var Te=a._decorators,cc=a._pendingDecorators||Te,Wf=c._nodeMap,gd;for(gd in cc){Wf.has(gd)||(cc===Te&&(cc=nc(a)),delete cc[gd]);}var na=e?null:Bb(a._window);if(a._editable&&null!==na&&(k||null===h||h.dirty)){U=a;T=c;try{null!==t&&t.disconnect();if(k||null===h||h.dirty){var _E=a._blockCursorElement;null!==_E&&Lc(_E,a,d);a:{var _Q=na.anchorNode,_R=na.focusNode,_ma=na.anchorOffset,tb=na.focusOffset,Y=document.activeElement;if(!(ca.has("collaboration")&&
Y!==d||null!==Y&&Qb(Y)))if(D(h)){var ub=h.anchor,hd=h.focus,Ue=ub.key,Xf=hd.key,Ve=Dc(a,Ue),We=Dc(a,Xf),dc=ub.offset,Xe=hd.offset,id=h.format,jd=h.style,Ye=h.isCollapsed(),vb=Ve,ec=We,kd=!1;if("text"===ub.type){vb=Zb(Ve);var Z=ub.getNode();kd=Z.getFormat()!==id||Z.getStyle()!==jd;}else D(g)&&"text"===g.anchor.type&&(kd=!0);"text"===hd.type&&(ec=Zb(We));if(null!==vb&&null!==ec){if(Ye&&(null===g||kd||D(g)&&(g.format!==id||g.style!==jd))){var Yf=performance.now();de=[id,jd,dc,Ue,Yf];}if(_ma===dc&&tb===
Xe&&_Q===vb&&_R===ec&&("Range"!==na.type||!Ye)&&(null!==Y&&d.contains(Y)||d.focus({preventScroll:!0}),"element"!==ub.type))break a;try{na.setBaseAndExtent(vb,dc,ec,Xe);}catch(Z){}if(!ca.has("skip-scroll-into-view")&&h.isCollapsed()&&null!==d&&d===document.activeElement){var _Z=h instanceof jf&&"element"===h.anchor.type?vb.childNodes[dc]||null:0<na.rangeCount?na.getRangeAt(0):null;if(null!==_Z){var W;if(_Z instanceof Text){var X=document.createRange();X.selectNode(_Z);W=X.getBoundingClientRect();}else W=_Z.getBoundingClientRect();
var Ca=d.ownerDocument,Ia=Ca.defaultView;if(null!==Ia)for(var _W=W,ld=_W.top,md=_W.bottom,fc,gc,ra=d;null!==ra;){var _X=ra===Ca.body;if(_X)fc=0,gc=Ib(a).innerHeight;else{var hc=ra.getBoundingClientRect();fc=hc.top;gc=hc.bottom;}var Ja=0;ld<fc?Ja=-(fc-ld):md>gc&&(Ja=md-gc);if(0!==Ja)if(_X)Ia.scrollBy(0,Ja);else{var _hc=ra.scrollTop;ra.scrollTop+=Ja;var Ze=ra.scrollTop-_hc;ld-=Ze;md-=Ze;}if(_X)break;ra=Ab(ra);}}}$d=!0;}}else null!==g&&Tb(a,_Q,_R)&&na.removeAllRanges();}}a:{var _E2=a._blockCursorElement;if(D(h)&&h.isCollapsed()&&
"element"===h.anchor.type&&d.contains(document.activeElement)){var _Q2=h.anchor,_R2=_Q2.getNode(),_ma2=_Q2.offset,_tb=_R2.getChildrenSize(),_Y=!1,_Z2=null;if(_ma2===_tb){var _W2=_R2.getChildAtIndex(_ma2-1);Kc(_W2)&&(_Y=!0);}else{var _W3=_R2.getChildAtIndex(_ma2);if(null!==_W3&&Kc(_W3)){var _Ca=_W3.getPreviousSibling();if(null===_Ca||Kc(_Ca))_Y=!0,_Z2=a.getElementByKey(_W3.__key);}}if(_Y){var _W4=a.getElementByKey(_R2.__key);if(null===_E2){var _Ca2=a._config.theme,_Ia=document.createElement("div");_Ia.contentEditable="false";_Ia.setAttribute("data-lexical-cursor",
"true");var _X2=_Ca2.blockCursor;if(void 0!==_X2){var _Ia$classList;if("string"===typeof _X2){var _Ja=ob(_X2);_X2=_Ca2.blockCursor=_Ja;}void 0!==_X2&&(_Ia$classList=_Ia.classList).add.apply(_Ia$classList,_X2);}a._blockCursorElement=_E2=_Ia;}d.style.caretColor="transparent";null===_Z2?_W4.appendChild(_E2):_W4.insertBefore(_E2,_Z2);break a;}}null!==_E2&&Lc(_E2,a,d);}null!==t&&t.observe(d,zf);}finally{U=q,T=l;}}if(null!==x){var Zf=x;var _E3=Array.from(a._listeners.mutation),_Q3=_E3.length;for(var _R3=0;_R3<_Q3;_R3++){var _E3$_R=_E3[_R3],_ma3=_E3$_R[0],_tb2=_E3$_R[1],_Y2=Zf.get(_tb2);void 0!==_Y2&&_ma3(_Y2,{dirtyLeaves:F,prevEditorState:f,updateTags:ca});}}D(h)||
null===h||null!==g&&g.is(h)||a.dispatchCommand(aa,void 0);var nd=a._pendingDecorators;null!==nd&&(a._decorators=nd,a._pendingDecorators=null,Jf("decorator",a,!0,nd));var $f=oc(b||f),$e=oc(c);$f!==$e&&Jf("textcontent",a,!0,$e);Jf("update",a,!0,{dirtyElements:ba,dirtyLeaves:F,editorState:c,normalizedNodes:bb,prevEditorState:b||f,tags:ca});a._deferred=[];if(0!==fd.length){var _E4=a._updating;a._updating=!0;try{for(var _Q4=0;_Q4<fd.length;_Q4++){fd[_Q4]();}}finally{a._updating=_E4;}}var af=a._updates;if(0!==af.length){var _E5=
af.shift();if(_E5){var _Q5=_E5[0],_R4=_E5[1];Kf(a,_Q5,_R4);}}}}function Jf(a,b,c){var e=b._updating;b._updating=c;try{var f=Array.from(b._listeners[a]);for(var _len3=arguments.length,d=new Array(_len3>3?_len3-3:0),_key3=3;_key3<_len3;_key3++){d[_key3-3]=arguments[_key3];}for(a=0;a<f.length;a++){f[a].apply(null,d);}}finally{b._updating=e;}}
function S(a,b,c){if(!1===a._updating||U!==a){var f=!1;a.update(function(){f=S(a,b,c);});return f;}var d=sc(a);for(var _f4=4;0<=_f4;_f4--){for(var g=0;g<d.length;g++){var e=d[g]._commands.get(b);if(void 0!==e&&(e=e[_f4],void 0!==e)){e=Array.from(e);var h=e.length;for(var k=0;k<h;k++){if(!0===e[k](c,a))return!0;}}}}return!1;}
function Lf(a,b){var c=a._updates;for(b=b||!1;0!==c.length;){var d=c.shift();if(d){var _d=d,e=_d[0],f=_d[1];if(void 0!==f){d=f.onUpdate;f.skipTransforms&&(b=!0);if(f.discrete){var g=a._pendingEditorState;null===g&&r(191);g._flushSync=!0;}d&&a._deferred.push(d);Df(a,f.tag);}e();}}return b;}
function Kf(a,b,c){var d=a._updateTags;var e=!1;var f=!1;if(void 0!==c){var g=c.onUpdate;Df(a,c.tag);e=c.skipTransforms||!1;f=c.discrete||!1;}g&&a._deferred.push(g);c=a._editorState;g=a._pendingEditorState;var h=!1;if(null===g||g._readOnly)g=a._pendingEditorState=new Mf(new Map((g||c)._nodeMap)),h=!0;g._flushSync=f;f=T;var k=V,l=U,n=a._updating;T=g;V=!1;a._updating=!0;U=a;try{h&&(a._headless?null!==c._selection&&(g._selection=c._selection.clone()):g._selection=uf(a));var q=a._compositionKey;b();e=
Lf(a,e);wf(g,a);0!==a._dirtyType&&(e?Cf(g,a):Ef(g,a),Lf(a),Yc(c,g,a._dirtyLeaves,a._dirtyElements));q!==a._compositionKey&&(g._flushSync=!0);var m=g._selection;if(D(m)){var t=g._nodeMap,x=m.focus.key;void 0!==t.get(m.anchor.key)&&void 0!==t.get(x)||r(19);}else se(m)&&0===m._nodes.size&&(g._selection=null);}catch(q){q instanceof Error&&a._onError(q);a._pendingEditorState=c;a._dirtyType=2;a._cloneNotNeeded.clear();a._dirtyLeaves=new Set();a._dirtyElements.clear();Hf(a);return;}finally{T=f,V=k,U=l,a._updating=
n,bc=0;}0!==a._dirtyType||Nf(g,a)?g._flushSync?(g._flushSync=!1,Hf(a)):h&&Pb(function(){Hf(a);}):(g._flushSync=!1,h&&(d.clear(),a._deferred=[],a._pendingEditorState=null));}function v(a,b,c){a._updating?a._updates.push([b,c]):Kf(a,b,c);}var
Of=function(){function Of(a,b,c){this.element=a;this.before=b||null;this.after=c||null;}var _proto8=Of.prototype;_proto8.withBefore=function withBefore(a){return new Of(this.element,a,this.after);};_proto8.withAfter=function withAfter(a){return new Of(this.element,this.before,a);};_proto8.withElement=function withElement(a){return new Of(a,this.before,this.after);};_proto8.insertChild=function insertChild(a){var b=this.before||this.getManagedLineBreak();null!==b&&b.parentElement!==this.element&&r(222);this.element.insertBefore(a,b);return this;};_proto8.removeChild=function removeChild(a){a.parentElement!==this.element&&r(223);this.element.removeChild(a);return this;};_proto8.replaceChild=function replaceChild(a,
b){b.parentElement!==this.element&&r(224);this.element.replaceChild(a,b);return this;};_proto8.getFirstChild=function getFirstChild(){var a=this.after?this.after.nextSibling:this.element.firstChild;return a===this.before||a===this.getManagedLineBreak()?null:a;};_proto8.getManagedLineBreak=function getManagedLineBreak(){return this.element.__lexicalLineBreak||null;};_proto8.setManagedLineBreak=function setManagedLineBreak(a){null===a?this.removeManagedLineBreak():this.insertManagedLineBreak("decorator"===a&&(Ya||Xa));};_proto8.removeManagedLineBreak=function removeManagedLineBreak(){var a=this.getManagedLineBreak();if(a){var b=this.element,c="IMG"===
a.nodeName?a.nextSibling:null;c&&b.removeChild(c);b.removeChild(a);b.__lexicalLineBreak=void 0;}};_proto8.insertManagedLineBreak=function insertManagedLineBreak(a){var b=this.getManagedLineBreak();if(b){if(a===("IMG"===b.nodeName))return;this.removeManagedLineBreak();}b=this.element;var c=this.before,d=document.createElement("br");b.insertBefore(d,c);a?(a=document.createElement("img"),a.setAttribute("data-lexical-linebreak","true"),a.style.cssText="display: inline !important; border: 0px !important; margin: 0px !important;",a.alt="",b.insertBefore(a,
d),b.__lexicalLineBreak=a):b.__lexicalLineBreak=d;};_proto8.getFirstChildOffset=function getFirstChildOffset(){var a=0;for(var b=this.after;null!==b;b=b.previousSibling){a++;}return a;};_proto8.resolveChildIndex=function resolveChildIndex(a,b,c,d){if(c===this.element)return c=this.getFirstChildOffset(),[a,Math.min(c+a.getChildrenSize(),Math.max(c,d))];c=Pf(b,c);c.push(d);d=Pf(b,this.element);b=a.getIndexWithinParent();for(var e=0;e<d.length;e++){var f=c[e],g=d[e];if(void 0===f||f<g)break;else if(f>g){b+=1;break;}}return[a.getParentOrThrow(),b];};return Of;}();
function Pf(a,b){var c=[],d=b;for(;d!==a&&null!==d;d=b.parentNode){var e=0;for(var f=d.previousSibling;null!==f;f=d.previousSibling){e++;}c.push(e);}d!==a&&r(225);return c.reverse();}var
Qf=function(_ue3){babelHelpers.inheritsLoose(Qf,_ue3);function Qf(a){var _this3;_this3=_ue3.call(this,a)||this;_this3.__last=_this3.__first=null;_this3.__format=_this3.__size=0;_this3.__style="";_this3.__indent=0;_this3.__dir=null;return _this3;}var _proto9=Qf.prototype;_proto9.afterCloneFrom=function afterCloneFrom(a){_ue3.prototype.afterCloneFrom.call(this,a);this.__first=a.__first;this.__last=a.__last;this.__size=a.__size;this.__indent=a.__indent;this.__format=a.__format;this.__style=a.__style;this.__dir=a.__dir;};_proto9.getFormat=function getFormat(){return this.getLatest().__format;};_proto9.getFormatType=function getFormatType(){var a=this.getFormat();return kb[a]||"";};_proto9.getStyle=function getStyle(){return this.getLatest().__style;};_proto9.getIndent=function getIndent(){return this.getLatest().__indent;};_proto9.getChildren=function getChildren(){var a=
[],b=this.getFirstChild();for(;null!==b;){a.push(b),b=b.getNextSibling();}return a;};_proto9.getChildrenKeys=function getChildrenKeys(){var a=[],b=this.getFirstChild();for(;null!==b;){a.push(b.__key),b=b.getNextSibling();}return a;};_proto9.getChildrenSize=function getChildrenSize(){return this.getLatest().__size;};_proto9.isEmpty=function isEmpty(){return 0===this.getChildrenSize();};_proto9.isDirty=function isDirty(){var a=G()._dirtyElements;return null!==a&&a.has(this.__key);};_proto9.isLastChild=function isLastChild(){var a=this.getLatest(),b=this.getParentOrThrow().getLastChild();return null!==b&&b.is(a);};_proto9.getAllTextNodes=function getAllTextNodes(){var a=[],b=this.getFirstChild();
for(;null!==b;){C(b)&&a.push(b);if(H(b)){var c=b.getAllTextNodes();a.push.apply(a,c);}b=b.getNextSibling();}return a;};_proto9.getFirstDescendant=function getFirstDescendant(){var a=this.getFirstChild();for(;H(a);){var b=a.getFirstChild();if(null===b)break;a=b;}return a;};_proto9.getLastDescendant=function getLastDescendant(){var a=this.getLastChild();for(;H(a);){var b=a.getLastChild();if(null===b)break;a=b;}return a;};_proto9.getDescendantByIndex=function getDescendantByIndex(a){var b=this.getChildren(),c=b.length;if(a>=c)return a=b[c-1],H(a)&&a.getLastDescendant()||a||null;a=b[a];return H(a)&&a.getFirstDescendant()||
a||null;};_proto9.getFirstChild=function getFirstChild(){var a=this.getLatest().__first;return null===a?null:z(a);};_proto9.getFirstChildOrThrow=function getFirstChildOrThrow(){var a=this.getFirstChild();null===a&&r(45,this.__key);return a;};_proto9.getLastChild=function getLastChild(){var a=this.getLatest().__last;return null===a?null:z(a);};_proto9.getLastChildOrThrow=function getLastChildOrThrow(){var a=this.getLastChild();null===a&&r(96,this.__key);return a;};_proto9.getChildAtIndex=function getChildAtIndex(a){var b=this.getChildrenSize();var c;if(a<b/2){c=this.getFirstChild();for(b=0;null!==c&&b<=a;){if(b===a)return c;c=c.getNextSibling();b++;}return null;}c=this.getLastChild();
for(--b;null!==c&&b>=a;){if(b===a)return c;c=c.getPreviousSibling();b--;}return null;};_proto9.getTextContent=function getTextContent(){var a="",b=this.getChildren(),c=b.length;for(var d=0;d<c;d++){var e=b[d];a+=e.getTextContent();H(e)&&d!==c-1&&!e.isInline()&&(a+="\n\n");}return a;};_proto9.getTextContentSize=function getTextContentSize(){var a=0,b=this.getChildren(),c=b.length;for(var d=0;d<c;d++){var e=b[d];a+=e.getTextContentSize();H(e)&&d!==c-1&&!e.isInline()&&(a+=2);}return a;};_proto9.getDirection=function getDirection(){return this.getLatest().__dir;};_proto9.hasFormat=function hasFormat(a){return""!==a?(a=jb[a],0!==(this.getFormat()&
a)):!1;};_proto9.select=function select(a,b){I();var c=u(),d=a,e=b;var f=this.getChildrenSize();if(!this.canBeEmpty())if(0===a&&0===b){if(a=this.getFirstChild(),C(a)||H(a))return a.select(0,0);}else if(!(void 0!==a&&a!==f||void 0!==b&&b!==f)&&(a=this.getLastChild(),C(a)||H(a)))return a.select();void 0===d&&(d=f);void 0===e&&(e=f);f=this.__key;if(D(c))c.anchor.set(f,d,"element"),c.focus.set(f,e,"element"),c.dirty=!0;else return Me(f,d,f,e,"element","element");return c;};_proto9.selectStart=function selectStart(){var a=this.getFirstDescendant();return a?a.selectStart():
this.select();};_proto9.selectEnd=function selectEnd(){var a=this.getLastDescendant();return a?a.selectEnd():this.select();};_proto9.clear=function clear(){var a=this.getWritable();this.getChildren().forEach(function(b){return b.remove();});return a;};_proto9.append=function append(){for(var _len4=arguments.length,a=new Array(_len4),_key4=0;_key4<_len4;_key4++){a[_key4]=arguments[_key4];}return this.splice(this.getChildrenSize(),0,a);};_proto9.setDirection=function setDirection(a){var b=this.getWritable();b.__dir=a;return b;};_proto9.setFormat=function setFormat(a){this.getWritable().__format=""!==a?jb[a]:0;return this;};_proto9.setStyle=function setStyle(a){this.getWritable().__style=a||"";return this;};_proto9.setIndent=function setIndent(a){this.getWritable().__indent=a;return this;};_proto9.splice=function splice(a,b,c){var d=c.length,
e=this.getChildrenSize(),f=this.getWritable();a+b<=e||r(226,String(a),String(b),String(e));var g=f.__key;var h=[],k=[];var l=this.getChildAtIndex(a+b),n=null,q=e-b+d;if(0!==a)if(a===e)n=this.getLastChild();else{var m=this.getChildAtIndex(a);null!==m&&(n=m.getPreviousSibling());}if(0<b){var t=null===n?this.getFirstChild():n.getNextSibling();for(m=0;m<b;m++){null===t&&r(100);var x=t.getNextSibling(),A=t.__key;t=t.getWritable();jc(t);k.push(A);t=x;}}m=n;for(x=0;x<d;x++){A=c[x];null!==m&&A.is(m)&&(n=m=
m.getPreviousSibling());t=A.getWritable();t.__parent===g&&q--;jc(t);var w=A.__key;null===m?(f.__first=w,t.__prev=null):(m=m.getWritable(),m.__next=w,t.__prev=m.__key);A.__key===g&&r(76);t.__parent=g;h.push(w);m=A;}a+b===e?null!==m&&(m.getWritable().__next=null,f.__last=m.__key):null!==l&&(a=l.getWritable(),null!==m?(b=m.getWritable(),a.__prev=m.__key,b.__next=l.__key):a.__prev=null);f.__size=q;if(k.length&&(a=u(),D(a))){k=new Set(k);h=new Set(h);var _a11=a,_w3=_a11.anchor,y=_a11.focus;Rf(_w3,k,h)&&re(_w3,_w3.getNode(),
this,n,l);Rf(y,k,h)&&re(y,y.getNode(),this,n,l);0!==q||this.canBeEmpty()||Gc(this)||this.remove();}return f;};_proto9.getDOMSlot=function getDOMSlot(a){return new Of(a);};_proto9.exportDOM=function exportDOM(a){var _ue3$prototype$export=_ue3.prototype.exportDOM.call(this,a);a=_ue3$prototype$export.element;if(a&&Mc(a)){var b=this.getIndent();0<b&&(a.style.paddingInlineStart=40*b+"px");}return{element:a};};_proto9.exportJSON=function exportJSON(){return{children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),type:"element",version:1};};_proto9.insertNewAfter=function insertNewAfter(){return null;};_proto9.canIndent=function canIndent(){return!0;};_proto9.collapseAtStart=function collapseAtStart(){return!1;};_proto9.excludeFromCopy=function excludeFromCopy(){return!1;};_proto9.canReplaceWith=function canReplaceWith(){return!0;};_proto9.canInsertAfter=function canInsertAfter(){return!0;};_proto9.canBeEmpty=function canBeEmpty(){return!0;};_proto9.canInsertTextBefore=function canInsertTextBefore(){return!0;};_proto9.canInsertTextAfter=function canInsertTextAfter(){return!0;};_proto9.isInline=function isInline(){return!1;};_proto9.isShadowRoot=function isShadowRoot(){return!1;};_proto9.canMergeWith=function canMergeWith(){return!1;};_proto9.extractWithChild=function extractWithChild(){return!1;};_proto9.canMergeWhenEmpty=function canMergeWhenEmpty(){return!1;};_proto9.reconcileObservedMutation=function reconcileObservedMutation(a,
b){a=this.getDOMSlot(a);var c=a.getFirstChild();for(var d=this.getFirstChild();d;d=d.getNextSibling()){var e=b.getElementByKey(d.getKey());null!==e&&(null==c?(a.insertChild(e),c=e):c!==e&&a.replaceChild(e,c),c=c.nextSibling);}};return Qf;}(ue);function H(a){return a instanceof Qf;}function Rf(a,b,c){for(a=a.getNode();a;){var d=a.__key;if(b.has(d)&&!c.has(d))return!0;a=a.getParent();}return!1;}var
Sf=function(_ue4){babelHelpers.inheritsLoose(Sf,_ue4);function Sf(a){return _ue4.call(this,a)||this;}var _proto10=Sf.prototype;_proto10.decorate=function decorate(){r(47);};_proto10.isIsolated=function isIsolated(){return!1;};_proto10.isInline=function isInline(){return!0;};_proto10.isKeyboardSelectable=function isKeyboardSelectable(){return!0;};return Sf;}(ue);function B(a){return a instanceof Sf;}var
Tf=function(_Qf){babelHelpers.inheritsLoose(Tf,_Qf);Tf.getType=function getType(){return"root";};Tf.clone=function clone(){return new Tf();};function Tf(){var _this4;_this4=_Qf.call(this,"root")||this;_this4.__cachedText=null;return _this4;}var _proto11=Tf.prototype;_proto11.getTopLevelElementOrThrow=function getTopLevelElementOrThrow(){r(51);};_proto11.getTextContent=function getTextContent(){var a=this.__cachedText;return!mc()&&0!==G()._dirtyType||null===a?_Qf.prototype.getTextContent.call(this):a;};_proto11.remove=function remove(){r(52);};_proto11.replace=function replace(){r(53);};_proto11.insertBefore=function insertBefore(){r(54);};_proto11.insertAfter=function insertAfter(){r(55);};_proto11.updateDOM=function updateDOM(){return!1;};_proto11.append=function append(){var _Qf$prototype$append;for(var _len5=arguments.length,a=new Array(_len5),_key5=0;_key5<_len5;_key5++){a[_key5]=arguments[_key5];}for(var b=0;b<a.length;b++){var c=a[b];H(c)||B(c)||r(56);}return(_Qf$prototype$append=_Qf.prototype.append).call.apply(_Qf$prototype$append,[this].concat(a));};Tf.importJSON=function importJSON(a){var b=K();b.setFormat(a.format);
b.setIndent(a.indent);b.setDirection(a.direction);return b;};_proto11.exportJSON=function exportJSON(){return{children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),type:"root",version:1};};_proto11.collapseAtStart=function collapseAtStart(){return!0;};return Tf;}(Qf);function M(a){return a instanceof Tf;}function Nf(a,b){b=b.getEditorState()._selection;a=a._selection;if(null!==a){if(a.dirty||!a.is(b))return!0;}else if(null!==b)return!0;return!1;}function Uf(){return new Mf(new Map([["root",new Tf()]]));}
function Vf(a){var b=a.exportJSON();var c=a.constructor;b.type!==c.getType()&&r(130,c.name);if(H(a)){var d=b.children;Array.isArray(d)||r(59,c.name);a=a.getChildren();for(c=0;c<a.length;c++){var e=Vf(a[c]);d.push(e);}}return b;}var
Mf=function(){function Mf(a,b){this._nodeMap=a;this._selection=b||null;this._readOnly=this._flushSync=!1;}var _proto12=Mf.prototype;_proto12.isEmpty=function isEmpty(){return 1===this._nodeMap.size&&null===this._selection;};_proto12.read=function read(a,b){return Gf(b&&b.editor||null,this,a);};_proto12.clone=function clone(a){a=new Mf(this._nodeMap,void 0===a?this._selection:a);a._readOnly=!0;return a;};_proto12.toJSON=function toJSON(){return Gf(null,this,function(){return{root:Vf(K())};});};return Mf;}();var ag=function(_Qf2){babelHelpers.inheritsLoose(ag,_Qf2);function ag(){return _Qf2.apply(this,arguments)||this;}ag.getType=function getType(){return"artificial";};var _proto13=ag.prototype;_proto13.createDOM=function createDOM(){return document.createElement("div");};return ag;}(Qf);var
he=function(_Qf3){babelHelpers.inheritsLoose(he,_Qf3);function he(a){var _this5;_this5=_Qf3.call(this,a)||this;_this5.__textFormat=0;_this5.__textStyle="";return _this5;}he.getType=function getType(){return"paragraph";};var _proto14=he.prototype;_proto14.getTextFormat=function getTextFormat(){return this.getLatest().__textFormat;};_proto14.setTextFormat=function setTextFormat(a){var b=this.getWritable();b.__textFormat=a;return b;};_proto14.hasTextFormat=function hasTextFormat(a){a=hb[a];return 0!==(this.getTextFormat()&a);};_proto14.getFormatFlags=function getFormatFlags(a,b){var c=this.getLatest().__textFormat;return $b(c,a,b);};_proto14.getTextStyle=function getTextStyle(){return this.getLatest().__textStyle;};_proto14.setTextStyle=function setTextStyle(a){var b=this.getWritable();b.__textStyle=a;return b;};he.clone=function clone(a){return new he(a.__key);};_proto14.afterCloneFrom=function afterCloneFrom(a){_Qf3.prototype.afterCloneFrom.call(this,a);
this.__textFormat=a.__textFormat;this.__textStyle=a.__textStyle;};_proto14.createDOM=function createDOM(a){var _b$classList2;var b=document.createElement("p");a=yc(a.theme,"paragraph");void 0!==a&&(_b$classList2=b.classList).add.apply(_b$classList2,a);return b;};_proto14.updateDOM=function updateDOM(){return!1;};he.importDOM=function importDOM(){return{p:function p(){return{conversion:bg,priority:0};}};};_proto14.exportDOM=function exportDOM(a){var _Qf3$prototype$export=_Qf3.prototype.exportDOM.call(this,a);a=_Qf3$prototype$export.element;if(a&&Mc(a)){this.isEmpty()&&a.append(document.createElement("br"));var b=this.getFormatType();a.style.textAlign=b;if(b=this.getDirection())a.dir=b;}return{element:a};};he.importJSON=function importJSON(a){var b=
we();b.setFormat(a.format);b.setIndent(a.indent);b.setDirection(a.direction);b.setTextFormat(a.textFormat);return b;};_proto14.exportJSON=function exportJSON(){return babelHelpers["extends"]({},_Qf3.prototype.exportJSON.call(this),{textFormat:this.getTextFormat(),textStyle:this.getTextStyle(),type:"paragraph",version:1});};_proto14.insertNewAfter=function insertNewAfter(a,b){var c=we();c.setTextFormat(a.format);c.setTextStyle(a.style);a=this.getDirection();c.setDirection(a);c.setFormat(this.getFormatType());c.setStyle(this.getTextStyle());this.insertAfter(c,b);return c;};_proto14.collapseAtStart=function collapseAtStart(){var a=this.getChildren();
if(0===a.length||C(a[0])&&""===a[0].getTextContent().trim()){if(null!==this.getNextSibling())return this.selectNext(),this.remove(),!0;if(null!==this.getPreviousSibling())return this.selectPrevious(),this.remove(),!0;}return!1;};return he;}(Qf);function bg(a){var b=we();a.style&&(b.setFormat(a.style.textAlign),Wc(a,b));return{node:b};}function we(){return Ic(new he());}function Ld(a){return a instanceof he;}
function If(a,b,c,d){var e=a._keyToDOMMap;e.clear();a._editorState=Uf();a._pendingEditorState=d;a._compositionKey=null;a._dirtyType=0;a._cloneNotNeeded.clear();a._dirtyLeaves=new Set();a._dirtyElements.clear();a._normalizedNodes=new Set();a._updateTags=new Set();a._updates=[];a._blockCursorElement=null;d=a._observer;null!==d&&(d.disconnect(),a._observer=null);null!==b&&(b.textContent="");null!==c&&(c.textContent="",e.set("root",c));}
function cg(a,b){var c=new Map(),d=new Set(),e=function e(f){Object.keys(f).forEach(function(g){var h=c.get(g);void 0===h&&(h=[],c.set(g,h));h.push(f[g]);});};a.forEach(function(f){var g=f.klass.importDOM;null==g||d.has(g)||(d.add(g),f=g.call(f.klass),null!==f&&e(f));});b&&e(b);return c;}var
Wb=function(){function Wb(a,b,c,d,e,f,g){this._parentEditor=b;this._rootElement=null;this._editorState=a;this._compositionKey=this._pendingEditorState=null;this._deferred=[];this._keyToDOMMap=new Map();this._updates=[];this._updating=!1;this._listeners={decorator:new Set(),editable:new Set(),mutation:new Map(),root:new Set(),textcontent:new Set(),update:new Set()};this._commands=new Map();this._config=d;this._nodes=c;this._decorators={};this._pendingDecorators=null;this._dirtyType=0;this._cloneNotNeeded=new Set();this._dirtyLeaves=
new Set();this._dirtyElements=new Map();this._normalizedNodes=new Set();this._updateTags=new Set();this._observer=null;this._key=tc();this._onError=e;this._htmlConversions=f;this._editable=g;this._headless=null!==b&&b._headless;this._blockCursorElement=this._window=null;}var _proto15=Wb.prototype;_proto15.isComposing=function isComposing(){return null!=this._compositionKey;};_proto15.registerUpdateListener=function registerUpdateListener(a){var b=this._listeners.update;b.add(a);return function(){b["delete"](a);};};_proto15.registerEditableListener=function registerEditableListener(a){var b=this._listeners.editable;b.add(a);return function(){b["delete"](a);};};_proto15.registerDecoratorListener=function registerDecoratorListener(a){var b=
this._listeners.decorator;b.add(a);return function(){b["delete"](a);};};_proto15.registerTextContentListener=function registerTextContentListener(a){var b=this._listeners.textcontent;b.add(a);return function(){b["delete"](a);};};_proto15.registerRootListener=function registerRootListener(a){var _this7=this;var b=this._listeners.root;a(this._rootElement,null);b.add(a);return function(){a(null,_this7._rootElement);b["delete"](a);};};_proto15.registerCommand=function registerCommand(a,b,c){void 0===c&&r(35);var d=this._commands;d.has(a)||d.set(a,[new Set(),new Set(),new Set(),new Set(),new Set()]);var e=d.get(a);void 0===e&&r(36,String(a));var f=e[c];f.add(b);return function(){f["delete"](b);
e.every(function(g){return 0===g.size;})&&d["delete"](a);};};_proto15.registerMutationListener=function registerMutationListener(a,b,c){a=this.resolveRegisteredNodeAfterReplacements(this.getRegisteredNode(a)).klass;var d=this._listeners.mutation;d.set(b,a);c=c&&c.skipInitialization;(void 0===c?0:c)||this.initializeMutationListener(b,a);return function(){d["delete"](b);};};_proto15.getRegisteredNode=function getRegisteredNode(a){var b=this._nodes.get(a.getType());void 0===b&&r(37,a.name);return b;};_proto15.resolveRegisteredNodeAfterReplacements=function resolveRegisteredNodeAfterReplacements(a){for(;a.replaceWithKlass;){a=this.getRegisteredNode(a.replaceWithKlass);}return a;};_proto15.initializeMutationListener=function initializeMutationListener(a,
b){var c=this._editorState;if(b=Uc(c).get(b.getType())){var d=new Map();for(var _iterator15=b.keys(),_isArray15=Array.isArray(_iterator15),_i17=0,_iterator15=_isArray15?_iterator15:_iterator15[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref25;if(_isArray15){if(_i17>=_iterator15.length)break;_ref25=_iterator15[_i17++];}else{_i17=_iterator15.next();if(_i17.done)break;_ref25=_i17.value;}var e=_ref25;d.set(e,"created");}0<d.size&&a(d,{dirtyLeaves:new Set(),prevEditorState:c,updateTags:new Set(["registerMutationListener"])});}};_proto15.registerNodeTransformToKlass=function registerNodeTransformToKlass(a,b){a=this.getRegisteredNode(a);a.transforms.add(b);return a;};_proto15.registerNodeTransform=function registerNodeTransform(a,b){var c=this.registerNodeTransformToKlass(a,b);var d=[c];c=c.replaceWithKlass;null!=c&&(c=this.registerNodeTransformToKlass(c,b),d.push(c));pc(this,a.getType());return function()
{d.forEach(function(e){return e.transforms["delete"](b);});};};_proto15.hasNode=function hasNode(a){return this._nodes.has(a.getType());};_proto15.hasNodes=function hasNodes(a){return a.every(this.hasNode.bind(this));};_proto15.dispatchCommand=function dispatchCommand(a,b){return S(this,a,b);};_proto15.getDecorators=function getDecorators(){return this._decorators;};_proto15.getRootElement=function getRootElement(){return this._rootElement;};_proto15.getKey=function getKey(){return this._key;};_proto15.setRootElement=function setRootElement(a){var b=this._rootElement;if(a!==b){var _a$classList;var f=yc(this._config.theme,"root");var c=this._pendingEditorState||this._editorState;this._rootElement=a;If(this,b,a,c);if(null!==b){var _b$classList3;if(!this._config.disableEvents){var d=
b.ownerDocument,e=Zd.get(d);void 0===e&&r(162);--e;0<=e||r(164);Zd.set(d,e);0===e&&d.removeEventListener("selectionchange",oe);d=Sb(b);Vb(d)?(null!==d._parentEditor?(e=sc(d),e=e[e.length-1]._key,ne.get(e)===d&&ne["delete"](e)):ne["delete"](d._key),b.__lexicalEditor=null):d&&r(198);d=me(b);for(e=0;e<d.length;e++){d[e]();}b.__lexicalEventHandles=[];}null!=f&&(_b$classList3=b.classList).remove.apply(_b$classList3,f);}null!==a?(c=(c=a.ownerDocument)&&c.defaultView||null,d=a.style,d.userSelect="text",d.whiteSpace="pre-wrap",d.wordBreak="break-word",
a.setAttribute("data-lexical-editor","true"),this._window=c,this._dirtyType=2,Hb(this),this._updateTags.add("history-merge"),Hf(this),this._config.disableEvents||pe(a,this),null!=f&&(_a$classList=a.classList).add.apply(_a$classList,f)):(this._editorState=c,this._window=this._pendingEditorState=null);Jf("root",this,!1,a,b);}};_proto15.getElementByKey=function getElementByKey(a){return this._keyToDOMMap.get(a)||null;};_proto15.getEditorState=function getEditorState(){return this._editorState;};_proto15.setEditorState=function setEditorState(a,b){a.isEmpty()&&r(38);var c=a;c._readOnly&&(c=new Mf(new Map(a._nodeMap)),c._selection=a._selection?
a._selection.clone():null);Gb(this);a=this._pendingEditorState;var d=this._updateTags;b=void 0!==b?b.tag:null;null===a||a.isEmpty()||(null!=b&&d.add(b),Hf(this));this._pendingEditorState=c;this._dirtyType=2;this._dirtyElements.set("root",!1);this._compositionKey=null;null!=b&&d.add(b);this._updating||Hf(this);};_proto15.parseEditorState=function parseEditorState(a,b){a="string"===typeof a?JSON.parse(a):a;var c=Uf(),d=T,e=V,f=U,g=this._dirtyElements,h=this._dirtyLeaves,k=this._cloneNotNeeded,l=this._dirtyType;this._dirtyElements=new Map();
this._dirtyLeaves=new Set();this._cloneNotNeeded=new Set();this._dirtyType=0;T=c;V=!1;U=this;try{Ff(a.root,this._nodes),b&&b(),c._readOnly=!0;}catch(n){n instanceof Error&&this._onError(n);}finally{this._dirtyElements=g,this._dirtyLeaves=h,this._cloneNotNeeded=k,this._dirtyType=l,T=d,V=e,U=f;}return c;};_proto15.read=function read(a){Hf(this);return this.getEditorState().read(a,{editor:this});};_proto15.update=function update(a,b){v(this,a,b);};_proto15.focus=function focus(a,b){if(b===void 0){b={};}var c=this._rootElement;null!==c&&(c.setAttribute("autocapitalize","off"),v(this,function(){var d=u(),e=K();
null!==d?d.dirty=!0:0!==e.getChildrenSize()&&("rootStart"===b.defaultSelection?e.selectStart():e.selectEnd());},{onUpdate:function onUpdate(){c.removeAttribute("autocapitalize");a&&a();},tag:"focus"}),null===this._pendingEditorState&&c.removeAttribute("autocapitalize"));};_proto15.blur=function blur(){var a=this._rootElement;null!==a&&a.blur();a=Bb(this._window);null!==a&&a.removeAllRanges();};_proto15.isEditable=function isEditable(){return this._editable;};_proto15.setEditable=function setEditable(a){this._editable!==a&&(this._editable=a,Jf("editable",this,!0,a));};_proto15.toJSON=function toJSON(){return{editorState:this._editorState.toJSON()};};return Wb;}();
Wb.version="0.21.0+prod.cjs";exports.$addUpdateTag=function(a){I();G()._updateTags.add(a);};exports.$applyNodeReplacement=Ic;exports.$cloneWithProperties=Vc;exports.$copyNode=Hc;exports.$createLineBreakNode=Be;exports.$createNodeSelection=pf;exports.$createParagraphNode=we;exports.$createPoint=ef;exports.$createRangeSelection=function(){var a=ef("root",0,"element"),b=ef("root",0,"element");return new jf(a,b,0,"");};exports.$createRangeSelectionFromDom=function(a,b){return ie(null,a,b,null);};
exports.$createTabNode=Qe;exports.$createTextNode=L;exports.$getAdjacentNode=Bc;exports.$getCharacterOffsets=kf;exports.$getEditor=function(){return G();};exports.$getNearestNodeFromDOMNode=Rb;exports.$getNearestRootOrShadowRoot=Fc;exports.$getNodeByKey=z;exports.$getNodeByKeyOrThrow=function(a){var b=z(a);null===b&&r(63,a);return b;};exports.$getPreviousSelection=vc;exports.$getRoot=K;exports.$getSelection=u;exports.$getTextContent=function(){var a=u();return null===a?"":a.getTextContent();};
exports.$hasAncestor=Ec;exports.$hasUpdateTag=function(a){return G()._updateTags.has(a);};exports.$insertNodes=function(a){var b=u()||vc();null===b&&(b=K().selectEnd());b.insertNodes(a);};exports.$isBlockElementNode=function(a){return H(a)&&!a.isInline();};exports.$isDecoratorNode=B;exports.$isElementNode=H;exports.$isInlineElementOrDecoratorNode=function(a){return H(a)&&a.isInline()||B(a)&&a.isInline();};exports.$isLeafNode=function(a){return C(a)||Qc(a)||B(a);};exports.$isLineBreakNode=Qc;
exports.$isNodeSelection=se;exports.$isParagraphNode=Ld;exports.$isRangeSelection=D;exports.$isRootNode=M;exports.$isRootOrShadowRoot=Gc;exports.$isTabNode=cf;exports.$isTextNode=C;exports.$isTokenOrSegmented=Xb;exports.$nodesOfType=function(a){var b=a.getType();var c=ic();if(c._readOnly)return(a=Uc(c).get(b))?Array.from(a.values()):[];c=c._nodeMap;var d=[];for(var _iterator16=c,_isArray16=Array.isArray(_iterator16),_i18=0,_iterator16=_isArray16?_iterator16:_iterator16[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref27;if(_isArray16){if(_i18>=_iterator16.length)break;_ref27=_iterator16[_i18++];}else{_i18=_iterator16.next();if(_i18.done)break;_ref27=_i18.value;}var _ref28=_ref27;var e=_ref28[1];e instanceof a&&e.__type===b&&e.isAttached()&&d.push(e);}return d;};exports.$normalizeSelection__EXPERIMENTAL=Mb;
exports.$onUpdate=function(a){I();G()._deferred.push(a);};exports.$parseSerializedNode=function(a){return Ff(a,G()._nodes);};exports.$selectAll=function(a){var b=K();if(D(a)){b=a.anchor;var c=a.focus,d=b.getNode().getTopLevelElementOrThrow().getParentOrThrow();b.set(d.getKey(),0,"element");c.set(d.getKey(),d.getChildrenSize(),"element");Mb(a);return a;}a=b.select(0,b.getChildrenSize());Eb(Mb(a));return a;};exports.$setCompositionKey=J;exports.$setSelection=Eb;
exports.$splitNode=function(a,b){var c=a.getChildAtIndex(b);null==c&&(c=a);Gc(a)&&r(102);var d=function d(g){var h=g.getParentOrThrow(),k=Gc(h),l=g!==c||k?Hc(g):g;if(k)return H(g)&&H(l)||r(133),g.insertAfter(l),[g,l,l];var _d3=d(h),n=_d3[0],q=_d3[1],m=_d3[2];g=g.getNextSiblings();m.append.apply(m,[l].concat(g));return[n,q,l];},_d2=d(c),e=_d2[0],f=_d2[1];return[e,f];};exports.ArtificialNode__DO_NOT_USE=ag;exports.BLUR_COMMAND=Ra;exports.CAN_REDO_COMMAND={};exports.CAN_UNDO_COMMAND={};exports.CLEAR_EDITOR_COMMAND={};exports.CLEAR_HISTORY_COMMAND={};
exports.CLICK_COMMAND=da;exports.COMMAND_PRIORITY_CRITICAL=4;exports.COMMAND_PRIORITY_EDITOR=0;exports.COMMAND_PRIORITY_HIGH=3;exports.COMMAND_PRIORITY_LOW=1;exports.COMMAND_PRIORITY_NORMAL=2;exports.CONTROLLED_TEXT_INSERTION_COMMAND=ia;exports.COPY_COMMAND=Na;exports.CUT_COMMAND=Oa;exports.DELETE_CHARACTER_COMMAND=ea;exports.DELETE_LINE_COMMAND=oa;exports.DELETE_WORD_COMMAND=la;exports.DRAGEND_COMMAND=Ma;exports.DRAGOVER_COMMAND=La;exports.DRAGSTART_COMMAND=Ka;exports.DROP_COMMAND=Ha;
exports.DecoratorNode=Sf;exports.ElementNode=Qf;exports.FOCUS_COMMAND=Qa;exports.FORMAT_ELEMENT_COMMAND={};exports.FORMAT_TEXT_COMMAND=pa;exports.INDENT_CONTENT_COMMAND={};exports.INSERT_LINE_BREAK_COMMAND=fa;exports.INSERT_PARAGRAPH_COMMAND=ha;exports.INSERT_TAB_COMMAND={};exports.IS_ALL_FORMATTING=255;exports.IS_BOLD=1;exports.IS_CODE=16;exports.IS_HIGHLIGHT=128;exports.IS_ITALIC=2;exports.IS_STRIKETHROUGH=4;exports.IS_SUBSCRIPT=32;exports.IS_SUPERSCRIPT=64;exports.IS_UNDERLINE=8;
exports.KEY_ARROW_DOWN_COMMAND=za;exports.KEY_ARROW_LEFT_COMMAND=wa;exports.KEY_ARROW_RIGHT_COMMAND=ua;exports.KEY_ARROW_UP_COMMAND=ya;exports.KEY_BACKSPACE_COMMAND=Da;exports.KEY_DELETE_COMMAND=Fa;exports.KEY_DOWN_COMMAND=ta;exports.KEY_ENTER_COMMAND=Aa;exports.KEY_ESCAPE_COMMAND=Ea;exports.KEY_MODIFIER_COMMAND=Sa;exports.KEY_SPACE_COMMAND=Ba;exports.KEY_TAB_COMMAND=Ga;exports.LineBreakNode=ye;exports.MOVE_TO_END=va;exports.MOVE_TO_START=xa;exports.OUTDENT_CONTENT_COMMAND={};
exports.PASTE_COMMAND=ja;exports.ParagraphNode=he;exports.REDO_COMMAND=sa;exports.REMOVE_TEXT_COMMAND=ka;exports.RootNode=Tf;exports.SELECTION_CHANGE_COMMAND=aa;exports.SELECTION_INSERT_CLIPBOARD_NODES_COMMAND={};exports.SELECT_ALL_COMMAND=Pa;exports.TEXT_TYPE_TO_FORMAT=hb;exports.TabNode=bf;exports.TextNode=He;exports.UNDO_COMMAND=qa;exports.createCommand=function(){return{};};
exports.createEditor=function(a){var b=a||{},c=U,d=b.theme||{};var e=void 0===a?c:b.parentEditor||null,f=b.disableEvents||!1,g=Uf(),h=b.namespace||(null!==e?e._config.namespace:tc()),k=b.editorState,l=[Tf,He,ye,bf,he,ag].concat(b.nodes||[]),_b5=b,n=_b5.onError,q=_b5.html;b=void 0!==b.editable?b.editable:!0;if(void 0===a&&null!==c)a=c._nodes;else for(a=new Map(),c=0;c<l.length;c++){var t=l[c],x=null;var m=null;"function"!==typeof t&&(m=t,t=m.replace,x=m["with"],m=m.withKlass||null);var A=t.getType(),w=t.transform(),
y=new Set();null!==w&&y.add(w);a.set(A,{exportDOM:q&&q["export"]?q["export"].get(t):void 0,klass:t,replace:x,replaceWithKlass:m,transforms:y});}d=new Wb(g,e,a,{disableEvents:f,namespace:h,theme:d},n?n:console.error,cg(a,q?q["import"]:void 0),b);void 0!==k&&(d._pendingEditorState=k,d._dirtyType=2);return d;};exports.getDOMSelection=Bb;exports.getDOMTextNode=Zb;exports.getEditorPropertyFromDOMNode=Sb;exports.getNearestEditorFromDOMNode=Ub;exports.isBlockDomNode=Oc;exports.isCurrentlyReadOnlyMode=mc;
exports.isDOMTextNode=Yb;exports.isDOMUnmanaged=zb;exports.isDocumentFragment=function(a){return 11===a.nodeType;};exports.isHTMLAnchorElement=function(a){return Mc(a)&&"A"===a.tagName;};exports.isHTMLElement=Mc;exports.isInlineDomNode=Nc;exports.isLexicalEditor=Vb;exports.isSelectionCapturedInDecoratorInput=Qb;exports.isSelectionWithinEditor=Tb;exports.resetRandomKey=function(){Ob=1;};exports.setDOMUnmanaged=function(a){a.__lexicalUnmanaged=!0;};exports.setNodeIndentFromDOM=Wc;}),null);
__d("LexicalClipboard",["cr:862"],(function(a,b,c,d,e,f){e.exports=b("cr:862")}),null);
__d("LexicalHtml",["cr:1497"],(function(a,b,c,d,e,f){e.exports=b("cr:1497")}),null);
__d("LexicalSelection",["cr:2180"],(function(a,b,c,d,e,f){e.exports=b("cr:2180")}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @fullSyntaxTransform
 * @generated SignedSource<<7096c9316dd955d4b6bd12d0e904fe03>>
 * @noflow
 * @nolint
 * @oncall lexical_web_text_editor
 * @preserve-invariant-messages
 * @preserve-whitespace
 * @preventMunge
 */__d("LexicalClipboard.prod",["Lexical","LexicalHtml","LexicalSelection","LexicalUtils","Promise","regeneratorRuntime"],(function $module_LexicalClipboard_prod(global,require,requireDynamic,requireLazy,module,exports){

'use strict';var _require_closure_Promise;var t;function u(a){var b=new URLSearchParams();b.append("code",a);for(var c=1;c<arguments.length;c++){b.append("v",arguments[c]);}throw Error("Minified Lexical error #"+a+"; visit https://lexical.dev/docs/error?"+b+" for the full message or "+"use the non-minified dev environment for full errors and additional helpful warnings.");}
t=u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u["default"]:u;function v(a,b){if(b===void 0){b=require("Lexical").$getSelection();}null==b&&t(166);return require("Lexical").$isRangeSelection(b)&&b.isCollapsed()||0===b.getNodes().length?"":require("LexicalHtml").$generateHtmlFromNodes(a,b);}function w(a,b){if(b===void 0){b=require("Lexical").$getSelection();}null==b&&t(166);return require("Lexical").$isRangeSelection(b)&&b.isCollapsed()||0===b.getNodes().length?null:JSON.stringify(x(a,b));}
function y(a){return window.trustedTypes&&window.trustedTypes.createPolicy?window.trustedTypes.createPolicy("Lexical",{createHTML:function createHTML(b){return b;}}).createHTML(a):a;}function z(a,b,c){a.dispatchCommand(require("Lexical").SELECTION_INSERT_CLIPBOARD_NODES_COMMAND,{nodes:b,selection:c})||c.insertNodes(b);}
function A(a,b,c,d){if(d===void 0){d=[];}var f=null!==b?c.isSelected(b):!0,k=require("Lexical").$isElementNode(c)&&c.excludeFromCopy("html");var g=c;if(null!==b){var h=require("Lexical").$cloneWithProperties(c);g=h=require("Lexical").$isTextNode(h)&&null!==b?require("LexicalSelection").$sliceSelectedTextNodeContent(b,h):h;}var q=require("Lexical").$isElementNode(g)?g.getChildren():[];var l=g;h=l.exportJSON();var r=l.constructor;h.type!==r.getType()&&t(58,r.name);require("Lexical").$isElementNode(l)&&(Array.isArray(h.children)||t(59,r.name));require("Lexical").$isTextNode(g)&&(g=g.__text,0<g.length?h.text=g:f=!1);for(g=0;g<q.length;g++){l=q[g],
r=A(a,b,l,h.children),!f&&require("Lexical").$isElementNode(c)&&r&&c.extractWithChild(l,b,"clone")&&(f=!0);}if(f&&!k)d.push(h);else if(Array.isArray(h.children))for(a=0;a<h.children.length;a++){d.push(h.children[a]);}return f;}function x(a,b){var c=[],d=require("Lexical").$getRoot().getChildren();for(var f=0;f<d.length;f++){A(a,b,d[f],c);}return{namespace:a._config.namespace,nodes:c};}function B(a){var b=[];for(var c=0;c<a.length;c++){var d=require("Lexical").$parseSerializedNode(a[c]);require("Lexical").$isTextNode(d)&&require("LexicalSelection").$addNodeStyle(d);b.push(d);}return b;}var C=null;
function D(a,b,c){if(void 0===c){var d=require("Lexical").getDOMSelection(a._window);if(!d)return!1;c=d.anchorNode;d=d.focusNode;if(null!==c&&null!==d&&!require("Lexical").isSelectionWithinEditor(a,c,d))return!1;a=require("Lexical").$getSelection();if(null===a)return!1;c=E(a);}b.preventDefault();b=b.clipboardData;if(null===b)return!1;F(b,c);return!0;}var G=[["text/html",v],["application/x-lexical-editor",w]];
function E(a){if(a===void 0){a=require("Lexical").$getSelection();}var b={"text/plain":a?a.getTextContent():""};if(a){var c=require("Lexical").$getEditor();for(var _i=0;_i<G.length;_i++){var _ref2=G[_i];var d=_ref2[0];var f=_ref2[1];var k=f(c,a);null!==k&&(b[d]=k);}}return b;}function F(a,b){for(var c in b){var d=b[c];void 0!==d&&a.setData(c,d);}}exports.$generateJSONFromSelectedNodes=x;exports.$generateNodesFromSerializedNodes=B;exports.$getClipboardDataFromSelection=E;exports.$getHtmlContent=v;exports.$getLexicalContent=w;
exports.$insertDataTransferForPlainText=function(a,b){a=a.getData("text/plain")||a.getData("text/uri-list");null!=a&&b.insertRawText(a);};
exports.$insertDataTransferForRichText=function(a,b,c){var d=a.getData("application/x-lexical-editor");if(d)try{var k=JSON.parse(d);if(k.namespace===c._config.namespace&&Array.isArray(k.nodes)){var g=B(k.nodes);return z(c,g,b);}}catch(k){}if(d=a.getData("text/html"))try{var f=new DOMParser().parseFromString(y(d),"text/html");var _k=require("LexicalHtml").$generateNodesFromDOM(c,f);return z(c,_k,b);}catch(k){}a=a.getData("text/plain")||a.getData("text/uri-list");if(null!=a)if(require("Lexical").$isRangeSelection(b))for(b=a.split(/(\r?\n|\t)/),
""===b[b.length-1]&&b.pop(),a=0;a<b.length;a++){c=require("Lexical").$getSelection(),require("Lexical").$isRangeSelection(c)&&(f=b[a],"\n"===f||"\r\n"===f?c.insertParagraph():"\t"===f?c.insertNodes([require("Lexical").$createTabNode()]):c.insertText(f));}else b.insertRawText(a);};exports.$insertGeneratedNodes=z;
exports.copyToClipboard=function _callee(a,b,c){var d,f,k,g;return require("regeneratorRuntime").async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(null!==C)){_context.next=2;break;}return _context.abrupt("return",!1);case 2:if(!(null!==b)){_context.next=4;break;}return _context.abrupt("return",new(_require_closure_Promise||(_require_closure_Promise=require("Promise")))(function(h){a.update(function(){h(D(a,b,c));});}));case 4:d=a.getRootElement();f=null==a._window?window.document:a._window.document,k=require("Lexical").getDOMSelection(a._window);if(!(null===d||null===k)){_context.next=8;break;}return _context.abrupt("return",!1);case 8:g=f.createElement("span");g.style.cssText="position: fixed; top: -1000px;";g.append(f.createTextNode("#"));d.append(g);d=new Range();d.setStart(g,0);d.setEnd(g,1);k.removeAllRanges();k.addRange(d);return _context.abrupt("return",new(_require_closure_Promise||(_require_closure_Promise=require("Promise")))(function(h){var q=
a.registerCommand(require("Lexical").COPY_COMMAND,function(l){require("LexicalUtils").objectKlassEquals(l,ClipboardEvent)&&(q(),null!==C&&(window.clearTimeout(C),C=null),h(D(a,l,c)));return!0;},require("Lexical").COMMAND_PRIORITY_CRITICAL);C=window.setTimeout(function(){q();C=null;h(!1);},50);f.execCommand("copy");g.remove();}));case 18:case"end":return _context.stop();}}},null,this);};exports.setLexicalClipboardDataTransfer=F;}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @fullSyntaxTransform
 * @generated SignedSource<<c598509e750c08567b3198f1e2c0b8ab>>
 * @noflow
 * @nolint
 * @oncall lexical_web_text_editor
 * @preserve-invariant-messages
 * @preserve-whitespace
 * @preventMunge
 */__d("LexicalContentEditable.prod",["LexicalComposerContext","LexicalText","LexicalUtils","react"],(function $module_LexicalContentEditable_prod(global,require,requireDynamic,requireLazy,module,exports){

'use strict';var _require_closure_react;var g=_require_closure_react||(_require_closure_react=require("react")),m=_require_closure_react;var w="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?g.useLayoutEffect:g.useEffect;function x(){for(var _len=arguments.length,a=new Array(_len),_key=0;_key<_len;_key++){a[_key]=arguments[_key];}return function(c){a.forEach(function(b){"function"===typeof b?b(c):null!=b&&(b.current=c);});};}
var y=g.forwardRef(function(_ref,q){var a=_ref.editor,c=_ref.ariaActiveDescendant,b=_ref.ariaAutoComplete,e=_ref.ariaControls,h=_ref.ariaDescribedBy,l=_ref.ariaErrorMessage,z=_ref.ariaExpanded,n=_ref.ariaInvalid,A=_ref.ariaLabel,B=_ref.ariaLabelledBy,C=_ref.ariaMultiline,D=_ref.ariaOwns,E=_ref.ariaRequired,F=_ref.autoCapitalize,G=_ref.className,H=_ref.id,_ref$role=_ref.role,p=_ref$role===void 0?"textbox":_ref$role,_ref$spellCheck=_ref.spellCheck,I=_ref$spellCheck===void 0?!0:_ref$spellCheck,J=_ref.style,K=_ref.tabIndex,L=_ref["data-testid"],M=babelHelpers.objectWithoutPropertiesLoose(_ref,["editor","ariaActiveDescendant","ariaAutoComplete","ariaControls","ariaDescribedBy","ariaErrorMessage","ariaExpanded","ariaInvalid","ariaLabel","ariaLabelledBy","ariaMultiline","ariaOwns","ariaRequired","autoCapitalize","className","id","role","spellCheck","style","tabIndex","data-testid"]);var _g$useState=g.useState(a.isEditable()),f=_g$useState[0],r=_g$useState[1],t=g.useCallback(function(k){k&&k.ownerDocument&&k.ownerDocument.defaultView?a.setRootElement(k):a.setRootElement(null);},[a]),N=g.useMemo(function(){return(
x(q,t));},[t,q]);w(function(){r(a.isEditable());return a.registerEditableListener(function(k){r(k);});},[a]);return m.jsx("div",babelHelpers["extends"]({"aria-activedescendant":f?c:void 0,"aria-autocomplete":f?b:"none","aria-controls":f?e:void 0,"aria-describedby":h},null!=l?{"aria-errormessage":l}:{},{"aria-expanded":f&&"combobox"===p?!!z:void 0},null!=n?{"aria-invalid":n}:{},{"aria-label":A,"aria-labelledby":B,"aria-multiline":C,"aria-owns":f?D:void 0,"aria-readonly":f?void 0:!0,"aria-required":E,autoCapitalize:F,className:G,contentEditable:f,
"data-testid":L,id:H,ref:N,role:f?p:void 0,spellCheck:I,style:J,tabIndex:K},M));});function O(a){return a.getEditorState().read(require("LexicalText").$canShowPlaceholderCurry(a.isComposing()));}function P(a){var _g$useState2=g.useState(function(){return O(a);}),c=_g$useState2[0],b=_g$useState2[1];w(function(){function e(){var h=O(a);b(h);}e();return require("LexicalUtils").mergeRegister(a.registerUpdateListener(function(){e();}),a.registerEditableListener(function(){e();}));},[a]);return c;}var R=g.forwardRef(Q);
function Q(a,c){var _a=a,b=_a.placeholder,e=babelHelpers.objectWithoutPropertiesLoose(_a,["placeholder"]);var _d$useLexicalComposer=require("LexicalComposerContext").useLexicalComposerContext();a=_d$useLexicalComposer[0];return m.jsxs(m.Fragment,{children:[m.jsx(y,babelHelpers["extends"]({editor:a},e,{ref:c})),null!=b&&m.jsx(S,{editor:a,content:b})]});}function S(_ref2){var a=_ref2.content,c=_ref2.editor;var b=P(c);var _g$useState3=g.useState(c.isEditable()),e=_g$useState3[0],h=_g$useState3[1];g.useLayoutEffect(function(){h(c.isEditable());return c.registerEditableListener(function(l){h(l);});},[c]);if(!b)return null;b=null;"function"===typeof a?b=a(e):null!==a&&(b=a);return null===b?null:m.jsx("div",{"aria-hidden":!0,children:b});}
exports.ContentEditable=R;}),null);
__d("LexicalDragon",["cr:2903"],(function(a,b,c,d,e,f){e.exports=b("cr:2903")}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @fullSyntaxTransform
 * @generated SignedSource<<11a0966f3cbc7f2f914c573e5014584b>>
 * @noflow
 * @nolint
 * @oncall lexical_web_text_editor
 * @preserve-invariant-messages
 * @preserve-whitespace
 * @preventMunge
 */__d("LexicalDragon.prod",["Lexical"],(function $module_LexicalDragon_prod(global,require,requireDynamic,requireLazy,module,exports){

'use strict';
exports.registerDragonSupport=function(m){var t=window.location.origin,r=function r(l){if(l.origin===t){var h=m.getRootElement();if(document.activeElement===h&&(h=l.data,"string"===typeof h)){try{var a=JSON.parse(h);}catch(k){return;}if(a&&"nuanria_messaging"===a.protocol&&"request"===a.type&&(a=a.payload)&&"makeChanges"===a.functionId&&(a=a.args)){var _a=a,k=_a[0],n=_a[1],p=_a[2],q=_a[3],u=_a[4];m.update(function(){var f=require("Lexical").$getSelection();if(require("Lexical").$isRangeSelection(f)){var e=f.anchor;var b=e.getNode(),c=0,d=0;require("Lexical").$isTextNode(b)&&0<=k&&0<=n&&(c=k,
d=k+n,f.setTextNodeRange(b,c,b,d));if(c!==d||""!==p)f.insertRawText(p),b=e.getNode();require("Lexical").$isTextNode(b)&&(c=q,d=q+u,e=b.getTextContentSize(),c=c>e?e:c,d=d>e?e:d,f.setTextNodeRange(b,c,b,d));l.stopImmediatePropagation();}});}}}};window.addEventListener("message",r,!0);return function(){window.removeEventListener("message",r,!0);};};}),null);
__d("LexicalErrorBoundary",["cr:2260"],(function(a,b,c,d,e,f){e.exports=b("cr:2260")}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @fullSyntaxTransform
 * @generated SignedSource<<ea1fd96078c94182012cc59d0f506d34>>
 * @noflow
 * @nolint
 * @oncall lexical_web_text_editor
 * @preserve-invariant-messages
 * @preserve-whitespace
 * @preventMunge
 */__d("LexicalErrorBoundary.prod",["react"],(function $module_LexicalErrorBoundary_prod(global,require,requireDynamic,requireLazy,module,exports){

'use strict';var _require_closure_react;var h=_require_closure_react||(_require_closure_react=require("react")),l=_require_closure_react,n=Object.create(null);if(h)for(var p in h){n[p]=h[p];}n["default"]=h;function q(b,c){return q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,a){return g.__proto__=a,g;},q(b,c);}function r(b,c){b.prototype=Object.create(c.prototype);b.prototype.constructor=b;q(b,c);}function v(b,c){void 0===b&&(b=[]);void 0===c&&(c=[]);return b.length!==c.length||b.some(function(g,a){return!Object.is(g,c[a]);});}
var w={error:null},x=function(b){function c(){for(var a,d=arguments.length,f=Array(d),e=0;e<d;e++){f[e]=arguments[e];}a=b.call.apply(b,[this].concat(f))||this;a.state=w;a.resetErrorBoundary=function(){for(var k,t=arguments.length,u=Array(t),m=0;m<t;m++){u[m]=arguments[m];}null==a.props.onReset?void 0:(k=a.props).onReset.apply(k,u);a.reset();};return a;}r(c,b);c.getDerivedStateFromError=function(a){return{error:a};};var g=c.prototype;g.reset=function(){this.setState(w);};g.componentDidCatch=function(a,d){var f,
e;null==(f=(e=this.props).onError)?void 0:f.call(e,a,d);};g.componentDidUpdate=function(a,d){var f=this.props.resetKeys;if(null!==this.state.error&&null!==d.error&&v(a.resetKeys,f)){var e,k;null==(e=(k=this.props).onResetKeysChange)?void 0:e.call(k,a.resetKeys,f);this.reset();}};g.render=function(){var a=this.state.error,d=this.props,f=d.fallbackRender,e=d.FallbackComponent;d=d.fallback;if(null!==a){a={error:a,resetErrorBoundary:this.resetErrorBoundary};if(n.isValidElement(d))return d;if("function"===
typeof f)return f(a);if(e)return n.createElement(e,a);throw Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop");}return this.props.children;};return c;}(n.Component);function y(_ref){var b=_ref.children,c=_ref.onError;return l.jsx(x,{fallback:l.jsx("div",{style:{border:"1px solid #f00",color:"#f00",padding:"8px"},children:"An error was thrown."}),onError:c,children:b});}exports.LexicalErrorBoundary=y;exports["default"]=y;}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @fullSyntaxTransform
 * @generated SignedSource<<7ea2d553d30235b9812216181d8af896>>
 * @noflow
 * @nolint
 * @oncall lexical_web_text_editor
 * @preserve-invariant-messages
 * @preserve-whitespace
 * @preventMunge
 */__d("LexicalHashtag.prod",["Lexical","LexicalUtils"],(function $module_LexicalHashtag_prod(global,require,requireDynamic,requireLazy,module,exports){

'use strict';var
e=function(_d$TextNode){babelHelpers.inheritsLoose(e,_d$TextNode);e.getType=function getType(){return"hashtag";};e.clone=function clone(a){return new e(a.__text,a.__key);};function e(a,b){return _d$TextNode.call(this,a,b)||this;}var _proto=e.prototype;_proto.createDOM=function createDOM(a){var b=_d$TextNode.prototype.createDOM.call(this,a);require("LexicalUtils").addClassNamesToElement(b,a.theme.hashtag);return b;};e.importJSON=function importJSON(a){var b=f(a.text);b.setFormat(a.format);b.setDetail(a.detail);b.setMode(a.mode);b.setStyle(a.style);return b;};_proto.exportJSON=function exportJSON(){return babelHelpers["extends"]({},_d$TextNode.prototype.exportJSON.call(this),{type:"hashtag"});};_proto.canInsertTextBefore=function canInsertTextBefore(){return!1;};_proto.isTextEntity=function isTextEntity(){return!0;};return e;}(require("Lexical").TextNode);
function f(a){if(a===void 0){a="";}return require("Lexical").$applyNodeReplacement(new e(a));}exports.$createHashtagNode=f;exports.$isHashtagNode=function(a){return a instanceof e;};exports.HashtagNode=e;}),null);
__d("LexicalHistory",["cr:2904"],(function(a,b,c,d,e,f){e.exports=b("cr:2904")}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @fullSyntaxTransform
 * @generated SignedSource<<a41f7bfdfa7ce8cc6816824b5be3130a>>
 * @noflow
 * @nolint
 * @oncall lexical_web_text_editor
 * @preserve-invariant-messages
 * @preserve-whitespace
 * @preventMunge
 */__d("LexicalHistory.prod",["Lexical","LexicalUtils"],(function $module_LexicalHistory_prod(global,require,requireDynamic,requireLazy,module,exports){

'use strict';
function v(b,a,k,g,f){if(null===b||0===k.size&&0===g.size&&!f)return 0;var c=a._selection,e=b._selection;if(f)return 1;if(!(require("Lexical").$isRangeSelection(c)&&require("Lexical").$isRangeSelection(e)&&e.isCollapsed()&&c.isCollapsed()))return 0;f=a._nodeMap;var h=[];for(var _iterator=k,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++];}else{_i=_iterator.next();if(_i.done)break;_ref=_i.value;}var m=_ref;k=f.get(m),void 0!==k&&h.push(k);}for(var _iterator2=g,_isArray2=Array.isArray(_iterator2),_i2=0,_iterator2=_isArray2?_iterator2:_iterator2[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref3;if(_isArray2){if(_i2>=_iterator2.length)break;_ref3=_iterator2[_i2++];}else{_i2=_iterator2.next();if(_i2.done)break;_ref3=_i2.value;}var _ref4=_ref3;var _m=_ref4[0];var l=_ref4[1];l&&(g=f.get(_m),void 0===g||require("Lexical").$isRootNode(g)||h.push(g));}if(0===h.length)return 0;if(1<h.length)return g=a._nodeMap,a=g.get(c.anchor.key),e=g.get(e.anchor.key),a&&e&&!b._nodeMap.has(a.__key)&&require("Lexical").$isTextNode(a)&&
1===a.__text.length&&1===c.anchor.offset?2:0;a=h[0];b=b._nodeMap.get(a.__key);if(!require("Lexical").$isTextNode(b)||!require("Lexical").$isTextNode(a)||b.__mode!==a.__mode)return 0;b=b.__text;a=a.__text;if(b===a)return 0;c=c.anchor;e=e.anchor;if(c.key!==e.key||"text"!==c.type)return 0;c=c.offset;e=e.offset;b=a.length-b.length;return 1===b&&e===c-1?2:-1===b&&e===c+1?3:-1===b&&e===c?4:0;}
function w(b,a,k){var g=a._nodeMap.get(b),f=k._nodeMap.get(b);b=a._selection;var c=k._selection;return require("Lexical").$isRangeSelection(b)&&require("Lexical").$isRangeSelection(c)&&"element"===b.anchor.type&&"element"===b.focus.type&&"text"===c.anchor.type&&"text"===c.focus.type||!require("Lexical").$isTextNode(g)||!require("Lexical").$isTextNode(f)||g.__parent!==f.__parent?!1:JSON.stringify(a.read(function(){return g.exportJSON();}))===JSON.stringify(k.read(function(){return f.exportJSON();}));}
function x(b,a){var k=Date.now(),g=0;return function(f,c,e,h,m,l){var n=Date.now();if(l.has("historic"))return g=0,k=n,2;var p=v(f,c,h,m,b.isComposing()),r=function(){var q=null===e||e.editor===b;var t=l.has("history-push");if(!t&&q&&l.has("history-merge"))return 0;if(null===f)return 1;var y=c._selection;return 0<h.size||0<m.size?!1===t&&0!==p&&p===g&&n<k+a&&q||1===h.size&&(q=Array.from(h)[0],w(q,f,c))?0:1:null!==y?0:2;}();k=n;g=p;return r;};}
exports.createEmptyHistoryState=function(){return{current:null,redoStack:[],undoStack:[]};};
exports.registerHistory=function(b,a,k){var _require_Lexical;var g=x(b,k);return require("LexicalUtils").mergeRegister(b.registerCommand((_require_Lexical=require("Lexical")).UNDO_COMMAND,function(){var f=a.redoStack,c=a.undoStack;if(0!==c.length){var e=a.current,h=c.pop();null!==e&&(f.push(e),b.dispatchCommand(require("Lexical").CAN_REDO_COMMAND,!0));0===c.length&&b.dispatchCommand(require("Lexical").CAN_UNDO_COMMAND,!1);a.current=h||null;h&&h.editor.setEditorState(h.editorState,{tag:"historic"});}return!0;},_require_Lexical.COMMAND_PRIORITY_EDITOR),b.registerCommand(_require_Lexical.REDO_COMMAND,function(){var f=a.redoStack;var c=a.undoStack;if(0!==
f.length){var e=a.current;null!==e&&(c.push(e),b.dispatchCommand(require("Lexical").CAN_UNDO_COMMAND,!0));c=f.pop();0===f.length&&b.dispatchCommand(require("Lexical").CAN_REDO_COMMAND,!1);a.current=c||null;c&&c.editor.setEditorState(c.editorState,{tag:"historic"});}return!0;},_require_Lexical.COMMAND_PRIORITY_EDITOR),b.registerCommand(_require_Lexical.CLEAR_EDITOR_COMMAND,function(){a.undoStack=[];a.redoStack=[];a.current=null;return!1;},_require_Lexical.COMMAND_PRIORITY_EDITOR),b.registerCommand(_require_Lexical.CLEAR_HISTORY_COMMAND,function(){a.undoStack=[];a.redoStack=[];a.current=null;b.dispatchCommand(require("Lexical").CAN_REDO_COMMAND,
!1);b.dispatchCommand(require("Lexical").CAN_UNDO_COMMAND,!1);return!0;},_require_Lexical.COMMAND_PRIORITY_EDITOR),b.registerUpdateListener(function(_ref5){var f=_ref5.editorState,c=_ref5.prevEditorState,e=_ref5.dirtyLeaves,h=_ref5.dirtyElements,m=_ref5.tags;var l=a.current,n=a.redoStack,p=a.undoStack,r=null===l?null:l.editorState;if(null===l||f!==r){c=g(c,f,l,e,h,m);if(1===c)0!==n.length&&(a.redoStack=[],b.dispatchCommand(require("Lexical").CAN_REDO_COMMAND,!1)),null!==l&&(p.push(babelHelpers["extends"]({},l)),b.dispatchCommand(require("Lexical").CAN_UNDO_COMMAND,!0));else if(2===c)return;a.current={editor:b,editorState:f};}}));};}),null);
__d("LexicalHistoryPlugin",["cr:293"],(function(a,b,c,d,e,f){e.exports=b("cr:293")}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @fullSyntaxTransform
 * @generated SignedSource<<a7d30aed17f229e62a9dec12f3d429ff>>
 * @noflow
 * @nolint
 * @oncall lexical_web_text_editor
 * @preserve-invariant-messages
 * @preserve-whitespace
 * @preventMunge
 */__d("LexicalHistoryPlugin.prod",["LexicalComposerContext","LexicalHistory","react"],(function $module_LexicalHistoryPlugin_prod(global,require,requireDynamic,requireLazy,module,exports){

'use strict';var _require_closure_react;var g=_require_closure_react||(_require_closure_react=require("react"));function h(a,b,c){if(c===void 0){c=1E3;}var f=g.useMemo(function(){return b||require("LexicalHistory").createEmptyHistoryState();},[b]);g.useEffect(function(){return require("LexicalHistory").registerHistory(a,f,c);},[c,a,f]);}exports.createEmptyHistoryState=require("LexicalHistory").createEmptyHistoryState;exports.HistoryPlugin=function(_ref){var a=_ref.delay,b=_ref.externalHistoryState;var _d$useLexicalComposer=require("LexicalComposerContext").useLexicalComposerContext(),c=_d$useLexicalComposer[0];h(c,b,a);return null;};}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @fullSyntaxTransform
 * @generated SignedSource<<5764861b648f55d4a766a41584a8eb3e>>
 * @noflow
 * @nolint
 * @oncall lexical_web_text_editor
 * @preserve-invariant-messages
 * @preserve-whitespace
 * @preventMunge
 */__d("LexicalHtml.prod",["Lexical","LexicalSelection","LexicalUtils"],(function $module_LexicalHtml_prod(global,require,requireDynamic,requireLazy,module,exports){

'use strict';
function u(a,b,f,e){if(e===void 0){e=null;}var g=null!==e?b.isSelected(e):!0,d=require("Lexical").$isElementNode(b)&&b.excludeFromCopy("html");var c=b;null!==e&&(c=require("Lexical").$cloneWithProperties(b),c=require("Lexical").$isTextNode(c)&&null!==e?require("LexicalSelection").$sliceSelectedTextNodeContent(e,c):c);var l=require("Lexical").$isElementNode(c)?c.getChildren():[];var m=a._nodes.get(c.getType());m=m&&void 0!==m.exportDOM?m.exportDOM(a,c):c.exportDOM(a);var _m=m,k=_m.element,n=_m.after;if(!k)return!1;m=document.createDocumentFragment();for(var p=0;p<l.length;p++){var t=l[p],y=u(a,t,m,e);!g&&require("Lexical").$isElementNode(b)&&
y&&b.extractWithChild(t,e,"html")&&(g=!0);}g&&!d?((require("LexicalUtils").isHTMLElement(k)||require("Lexical").isDocumentFragment(k))&&k.append(m),f.append(k),n&&(a=n.call(c,k))&&(require("Lexical").isDocumentFragment(k)?k.replaceChildren(a):k.replaceWith(a))):f.append(m);return g;}function v(a,b){var f=a.nodeName;f=b._htmlConversions.get(f.toLowerCase());b=null;if(void 0!==f){for(var _iterator=f,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++];}else{_i=_iterator.next();if(_i.done)break;_ref=_i.value;}var e=_ref;f=e(a),null!==f&&(null===b||(b.priority||0)<=(f.priority||0))&&(b=f);}}return null!==b?b.conversion:null;}var w=new Set(["STYLE","SCRIPT"]);
function x(a,b,f,e,g,d){var _l;if(g===void 0){g=new Map();}var c=[];if(w.has(a.nodeName))return c;var l=null;var m=v(a,b),k=m?m(a):null;m=null;if(null!==k){m=k.after;var p=k.node;l=Array.isArray(p)?p[p.length-1]:p;if(null!==l){var _c;for(var _iterator2=g,_isArray2=Array.isArray(_iterator2),_i2=0,_iterator2=_isArray2?_iterator2:_iterator2[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref3;if(_isArray2){if(_i2>=_iterator2.length)break;_ref3=_iterator2[_i2++];}else{_i2=_iterator2.next();if(_i2.done)break;_ref3=_i2.value;}var _ref2=_ref3;var n=_ref2[1];if(l=n(l,d),!l)break;}l&&(_c=c).push.apply(_c,Array.isArray(p)?p:[l]);}null!=k.forChild&&g.set(a.nodeName,k.forChild);}d=a.childNodes;n=[];e=null!=l&&require("Lexical").$isRootOrShadowRoot(l)?!1:null!=l&&require("Lexical").$isBlockElementNode(l)||e;for(k=0;k<d.length;k++){var _n;(_n=n).push.apply(_n,x(d[k],b,f,e,new Map(g),l));}null!=m&&(n=m(n));require("LexicalUtils").isBlockDomNode(a)&&(
n=e?z(a,n,function(){var p=new(require("Lexical").ArtificialNode__DO_NOT_USE)();f.push(p);return p;}):z(a,n,require("Lexical").$createParagraphNode));null==l?0<n.length?c=c.concat(n):require("LexicalUtils").isBlockDomNode(a)&&A(a)&&(c=c.concat(require("Lexical").$createLineBreakNode())):require("Lexical").$isElementNode(l)&&(_l=l).append.apply(_l,n);return c;}
function z(a,b,f){a=a.style.textAlign;var e=[],g=[];for(var c=0;c<b.length;c++){var _d;var d=b[c];if(require("Lexical").$isBlockElementNode(d))a&&!d.getFormat()&&d.setFormat(a),e.push(d);else if(g.push(d),c===b.length-1||c<b.length-1&&require("Lexical").$isBlockElementNode(b[c+1]))d=f(),d.setFormat(a),(_d=d).append.apply(_d,g),e.push(d),g=[];}return e;}function A(a){return null==a.nextSibling||null==a.previousSibling?!1:require("Lexical").isInlineDomNode(a.nextSibling)&&require("Lexical").isInlineDomNode(a.previousSibling);}
exports.$generateHtmlFromNodes=function(a,b){if("undefined"===typeof document||"undefined"===typeof window&&"undefined"===typeof global.window)throw Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");var f=document.createElement("div"),e=require("Lexical").$getRoot().getChildren();for(var g=0;g<e.length;g++){u(a,e[g],f,b);}return f.innerHTML;};
exports.$generateNodesFromDOM=function(a,b){var f=b.body?b.body.childNodes:[];b=[];var e=[];for(var d=0;d<f.length;d++){var g=f[d];w.has(g.nodeName)||(g=x(g,a,e,!1),null!==g&&(b=b.concat(g)));}for(var _i3=0;_i3<e.length;_i3++){var _d2=e[_i3];_d2.getNextSibling()instanceof require("Lexical").ArtificialNode__DO_NOT_USE&&_d2.insertAfter(require("Lexical").$createLineBreakNode());}for(var _i4=0;_i4<e.length;_i4++){var _d3=e[_i4];a=_d3.getChildren();for(var _iterator3=a,_isArray3=Array.isArray(_iterator3),_i5=0,_iterator3=_isArray3?_iterator3:_iterator3[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref4;if(_isArray3){if(_i5>=_iterator3.length)break;_ref4=_iterator3[_i5++];}else{_i5=_iterator3.next();if(_i5.done)break;_ref4=_i5.value;}var c=_ref4;_d3.insertBefore(c);}_d3.remove();}return b;};}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @fullSyntaxTransform
 * @generated SignedSource<<f1ec1c41c3a7cabf7c2c632693642186>>
 * @noflow
 * @nolint
 * @oncall lexical_web_text_editor
 * @preserve-invariant-messages
 * @preserve-whitespace
 * @preventMunge
 */__d("LexicalLink.prod",["Lexical","LexicalUtils"],(function $module_LexicalLink_prod(global,require,requireDynamic,requireLazy,module,exports){

'use strict';var n=new Set(["http:","https:","mailto:","sms:","tel:"]);var
p=function(_m$ElementNode){babelHelpers.inheritsLoose(p,_m$ElementNode);p.getType=function getType(){return"link";};p.clone=function clone(a){return new p(a.__url,{rel:a.__rel,target:a.__target,title:a.__title},a.__key);};function p(a,b,c){var _this;if(b===void 0){b={};}_this=_m$ElementNode.call(this,c)||this;var _b=b,_b$target=_b.target,g=_b$target===void 0?null:_b$target,_b$rel=_b.rel,h=_b$rel===void 0?null:_b$rel,_b$title=_b.title,k=_b$title===void 0?null:_b$title;_this.__url=a;_this.__target=g;_this.__rel=h;_this.__title=k;return _this;}var _proto=p.prototype;_proto.createDOM=function createDOM(a){var b=document.createElement("a");b.href=this.sanitizeUrl(this.__url);null!==this.__target&&(b.target=this.__target);null!==this.__rel&&(b.rel=this.__rel);null!==this.__title&&(b.title=this.__title);require("LexicalUtils").addClassNamesToElement(b,
a.theme.link);return b;};_proto.updateDOM=function updateDOM(a,b){if(b instanceof HTMLAnchorElement){var c=this.__url,g=this.__target,h=this.__rel,k=this.__title;c!==a.__url&&(b.href=c);g!==a.__target&&(g?b.target=g:b.removeAttribute("target"));h!==a.__rel&&(h?b.rel=h:b.removeAttribute("rel"));k!==a.__title&&(k?b.title=k:b.removeAttribute("title"));}return!1;};p.importDOM=function importDOM(){return{a:function a(){return{conversion:q,priority:1};}};};p.importJSON=function importJSON(a){var b=r(a.url,{rel:a.rel,target:a.target,title:a.title});b.setFormat(a.format);b.setIndent(a.indent);
b.setDirection(a.direction);return b;};_proto.sanitizeUrl=function sanitizeUrl(a){try{var b=new URL(a);if(!n.has(b.protocol))return"about:blank";}catch(b){}return a;};_proto.exportJSON=function exportJSON(){return babelHelpers["extends"]({},_m$ElementNode.prototype.exportJSON.call(this),{rel:this.getRel(),target:this.getTarget(),title:this.getTitle(),type:"link",url:this.getURL(),version:1});};_proto.getURL=function getURL(){return this.getLatest().__url;};_proto.setURL=function setURL(a){this.getWritable().__url=a;};_proto.getTarget=function getTarget(){return this.getLatest().__target;};_proto.setTarget=function setTarget(a){this.getWritable().__target=a;};_proto.getRel=function getRel(){return this.getLatest().__rel;};_proto.setRel=function setRel(a){this.getWritable().__rel=
a;};_proto.getTitle=function getTitle(){return this.getLatest().__title;};_proto.setTitle=function setTitle(a){this.getWritable().__title=a;};_proto.insertNewAfter=function insertNewAfter(a,b){if(b===void 0){b=!0;}a=r(this.__url,{rel:this.__rel,target:this.__target,title:this.__title});this.insertAfter(a,b);return a;};_proto.canInsertTextBefore=function canInsertTextBefore(){return!1;};_proto.canInsertTextAfter=function canInsertTextAfter(){return!1;};_proto.canBeEmpty=function canBeEmpty(){return!1;};_proto.isInline=function isInline(){return!0;};_proto.extractWithChild=function extractWithChild(a,b){if(!require("Lexical").$isRangeSelection(b))return!1;a=b.anchor.getNode();var c=b.focus.getNode();return this.isParentOf(a)&&this.isParentOf(c)&&0<b.getTextContent().length;};_proto.isEmailURI=function isEmailURI(){return this.__url.startsWith("mailto:");};_proto.isWebSiteURI=function isWebSiteURI(){return this.__url.startsWith("https://")||
this.__url.startsWith("http://");};return p;}(require("Lexical").ElementNode);function q(a){var b=null;if(require("LexicalUtils").isHTMLAnchorElement(a)){var c=a.textContent;if(null!==c&&""!==c||0<a.children.length)b=r(a.getAttribute("href")||"",{rel:a.getAttribute("rel"),target:a.getAttribute("target"),title:a.getAttribute("title")});}return{node:b};}function r(a,b){return require("Lexical").$applyNodeReplacement(new p(a,b));}function t(a){return a instanceof p;}var
u=function(_p){babelHelpers.inheritsLoose(u,_p);function u(a,b,c){var _this2;if(b===void 0){b={};}_this2=_p.call(this,a,b,c)||this;_this2.__isUnlinked=void 0!==b.isUnlinked&&null!==b.isUnlinked?b.isUnlinked:!1;return _this2;}u.getType=function getType(){return"autolink";};u.clone=function clone(a){return new u(a.__url,{isUnlinked:a.__isUnlinked,rel:a.__rel,target:a.__target,title:a.__title},a.__key);};var _proto2=u.prototype;_proto2.getIsUnlinked=function getIsUnlinked(){return this.__isUnlinked;};_proto2.setIsUnlinked=function setIsUnlinked(a){var b=this.getWritable();b.__isUnlinked=a;return b;};_proto2.createDOM=function createDOM(a){return this.__isUnlinked?document.createElement("span"):_p.prototype.createDOM.call(this,a);};_proto2.updateDOM=function updateDOM(a,b,c){return _p.prototype.updateDOM.call(this,a,
b,c)||a.__isUnlinked!==this.__isUnlinked;};u.importJSON=function importJSON(a){var b=w(a.url,{isUnlinked:a.isUnlinked,rel:a.rel,target:a.target,title:a.title});b.setFormat(a.format);b.setIndent(a.indent);b.setDirection(a.direction);return b;};u.importDOM=function importDOM(){return null;};_proto2.exportJSON=function exportJSON(){return babelHelpers["extends"]({},_p.prototype.exportJSON.call(this),{isUnlinked:this.__isUnlinked,type:"autolink",version:1});};_proto2.insertNewAfter=function insertNewAfter(a,b){if(b===void 0){b=!0;}a=this.getParentOrThrow().insertNewAfter(a,b);return require("Lexical").$isElementNode(a)?(b=w(this.__url,{isUnlinked:this.__isUnlinked,rel:this.__rel,
target:this.__target,title:this.__title}),a.append(b),b):null;};return u;}(p);function w(a,b){return require("Lexical").$applyNodeReplacement(new u(a,b));}function x(a){return a instanceof u;}var z=require("Lexical").createCommand("TOGGLE_LINK_COMMAND");function A(a,b){if("element"===a.type){var c=a.getNode();if(!require("Lexical").$isElementNode(c))throw Error("$getPointNode: element point is not an ElementNode");return c.getChildren()[a.offset+b]||null;}return null;}
function B(a){var b=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(b))return a();var c=require("Lexical").$normalizeSelection__EXPERIMENTAL(b);b=c.isBackward();var g=A(c.anchor,b?-1:0);c=A(c.focus,b?0:-1);a=a();if(g||c){var h=require("Lexical").$getSelection();if(require("Lexical").$isRangeSelection(h)){h=h.clone();if(g){var k=g.getParent();k&&h.anchor.set(k.getKey(),g.getIndexWithinParent()+(b?1:0),"element");}c&&(g=c.getParent())&&h.focus.set(g.getKey(),c.getIndexWithinParent()+(b?0:1),"element");require("Lexical").$setSelection(require("Lexical").$normalizeSelection__EXPERIMENTAL(h));}}return a;}
function C(a,b){if(b===void 0){b={};}var _b2=b,c=_b2.target,g=_b2.title,h=void 0===b.rel?"noreferrer":b.rel;b=require("Lexical").$getSelection();if(require("Lexical").$isRangeSelection(b)){var k=b.extract();if(null===a)k.forEach(function(d){if(d=require("LexicalUtils").$findMatchingParent(d,function(l){return!x(l)&&t(l);})){var l=d.getChildren();for(var e=0;e<l.length;e++){d.insertBefore(l[e]);}d.remove();}});else{var y=new Set(),v=function v(d){y.has(d.getKey())||(y.add(d.getKey()),d.setURL(a),void 0!==c&&d.setTarget(c),void 0!==h&&d.setRel(h),void 0!==g&&d.setTitle(g));};if(1===k.length&&(b=D(k[0],t),null!==b))return v(b);
B(function(){var d=null;for(var _iterator=k,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++];}else{_i=_iterator.next();if(_i.done)break;_ref=_i.value;}var e=_ref;if(e.isAttached()){var l=D(e,t);if(l)v(l);else{if(require("Lexical").$isElementNode(e)){if(!e.isInline())continue;if(t(e)){if(!(x(e)||null!==d&&d.getParentOrThrow().isParentOf(e))){v(e);d=e;continue;}for(var _iterator2=e.getChildren(),_isArray2=Array.isArray(_iterator2),_i2=0,_iterator2=_isArray2?_iterator2:_iterator2[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref2;if(_isArray2){if(_i2>=_iterator2.length)break;_ref2=_iterator2[_i2++];}else{_i2=_iterator2.next();if(_i2.done)break;_ref2=_i2.value;}var E=_ref2;e.insertBefore(E);}e.remove();continue;}}l=e.getPreviousSibling();t(l)&&l.is(d)?l.append(e):(d=r(a,{rel:h,target:c,title:g}),e.insertAfter(d),d.append(e));}}}});}}}
function D(a,b){for(;null!==a&&null!==a.getParent()&&!b(a);){a=a.getParentOrThrow();}return b(a)?a:null;}exports.$createAutoLinkNode=w;exports.$createLinkNode=r;exports.$isAutoLinkNode=x;exports.$isLinkNode=t;exports.$toggleLink=C;exports.AutoLinkNode=u;exports.LinkNode=p;exports.TOGGLE_LINK_COMMAND=z;exports.toggleLink=C;}),null);
__d("LexicalOverflow",["cr:2908"],(function(a,b,c,d,e,f){e.exports=b("cr:2908")}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @fullSyntaxTransform
 * @generated SignedSource<<77b4f40d589e2c41af276219b3282681>>
 * @noflow
 * @nolint
 * @oncall lexical_web_text_editor
 * @preserve-invariant-messages
 * @preserve-whitespace
 * @preventMunge
 */__d("LexicalOverflow.prod",["Lexical"],(function $module_LexicalOverflow_prod(global,require,requireDynamic,requireLazy,module,exports){

'use strict';var d;function f(a){var b=new URLSearchParams();b.append("code",a);for(var e=1;e<arguments.length;e++){b.append("v",arguments[e]);}throw Error("Minified Lexical error #"+a+"; visit https://lexical.dev/docs/error?"+b+" for the full message or "+"use the non-minified dev environment for full errors and additional helpful warnings.");}d=f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f["default"]:f;var
g=function(_c$ElementNode){babelHelpers.inheritsLoose(g,_c$ElementNode);g.getType=function getType(){return"overflow";};g.clone=function clone(a){return new g(a.__key);};g.importJSON=function importJSON(){return h();};g.importDOM=function importDOM(){return null;};function g(a){var _this;_this=_c$ElementNode.call(this,a)||this;_this.__type="overflow";return _this;}var _proto=g.prototype;_proto.exportJSON=function exportJSON(){return babelHelpers["extends"]({},_c$ElementNode.prototype.exportJSON.call(this),{type:"overflow"});};_proto.createDOM=function createDOM(a){var b=document.createElement("span");a=a.theme.characterLimit;"string"===typeof a&&(b.className=a);return b;};_proto.updateDOM=function updateDOM(){return!1;};_proto.insertNewAfter=function insertNewAfter(a,b){if(b===void 0){b=!0;}return this.getParentOrThrow().insertNewAfter(a,b);};_proto.excludeFromCopy=function excludeFromCopy(){return!0;};g.transform=function transform(){return function(a)
{k(a)||d(204);a.isEmpty()&&a.remove();};};return g;}(require("Lexical").ElementNode);function h(){return require("Lexical").$applyNodeReplacement(new g());}function k(a){return a instanceof g;}exports.$createOverflowNode=h;exports.$isOverflowNode=k;exports.OverflowNode=g;}),null);
__d("LexicalPlainText",["cr:2909"],(function(a,b,c,d,e,f){e.exports=b("cr:2909")}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @fullSyntaxTransform
 * @generated SignedSource<<617e77c16bd20391ffa4db8997efa7b2>>
 * @noflow
 * @nolint
 * @oncall lexical_web_text_editor
 * @preserve-invariant-messages
 * @preserve-whitespace
 * @preventMunge
 */__d("LexicalPlainText.prod",["Lexical","LexicalClipboard","LexicalSelection","LexicalUtils"],(function $module_LexicalPlainText_prod(global,require,requireDynamic,requireLazy,module,exports){

'use strict';
var k="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,l=k&&"documentMode"in document?document.documentMode:null,m=k&&"InputEvent"in window&&!l?"getTargetRanges"in new window.InputEvent("input"):!1,p=k&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),q=k&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,r=k&&/^(?=.*Chrome).*/i.test(navigator.userAgent),t=k&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!r;
function u(d,b){b.update(function(){if(null!==d){var c=require("LexicalUtils").objectKlassEquals(d,KeyboardEvent)?null:d.clipboardData,e=require("Lexical").$getSelection();if(null!==e&&null!=c){d.preventDefault();var n=require("LexicalClipboard").$getHtmlContent(b);null!==n&&c.setData("text/html",n);c.setData("text/plain",e.getTextContent());}}});}function v(d,b){d.preventDefault();b.update(function(){var c=require("Lexical").$getSelection(),e=d.clipboardData;null!=e&&require("Lexical").$isRangeSelection(c)&&require("LexicalClipboard").$insertDataTransferForPlainText(e,c);},{tag:"paste"});}
function w(d,b){u(d,b);b.update(function(){var c=require("Lexical").$getSelection();require("Lexical").$isRangeSelection(c)&&c.removeText();});}
exports.registerPlainText=function(d){var _require_Lexical;return require("LexicalUtils").mergeRegister(d.registerCommand((_require_Lexical=require("Lexical")).DELETE_CHARACTER_COMMAND,function(b){var c=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(c))return!1;c.deleteCharacter(b);return!0;},_require_Lexical.COMMAND_PRIORITY_EDITOR),d.registerCommand(_require_Lexical.DELETE_WORD_COMMAND,function(b){var c=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(c))return!1;c.deleteWord(b);return!0;},_require_Lexical.COMMAND_PRIORITY_EDITOR),d.registerCommand(_require_Lexical.DELETE_LINE_COMMAND,function(b){var c=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(c))return!1;c.deleteLine(b);
return!0;},_require_Lexical.COMMAND_PRIORITY_EDITOR),d.registerCommand(_require_Lexical.CONTROLLED_TEXT_INSERTION_COMMAND,function(b){var c=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(c))return!1;if("string"===typeof b)c.insertText(b);else{var e=b.dataTransfer;null!=e?require("LexicalClipboard").$insertDataTransferForPlainText(e,c):(b=b.data)&&c.insertText(b);}return!0;},_require_Lexical.COMMAND_PRIORITY_EDITOR),d.registerCommand(_require_Lexical.REMOVE_TEXT_COMMAND,function(){var b=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(b))return!1;b.removeText();return!0;},_require_Lexical.COMMAND_PRIORITY_EDITOR),d.registerCommand(_require_Lexical.INSERT_LINE_BREAK_COMMAND,
function(b){var c=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(c))return!1;c.insertLineBreak(b);return!0;},_require_Lexical.COMMAND_PRIORITY_EDITOR),d.registerCommand(_require_Lexical.INSERT_PARAGRAPH_COMMAND,function(){var b=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(b))return!1;b.insertLineBreak();return!0;},_require_Lexical.COMMAND_PRIORITY_EDITOR),d.registerCommand(_require_Lexical.KEY_ARROW_LEFT_COMMAND,function(b){var c=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(c))return!1;var e=b.shiftKey;return require("LexicalSelection").$shouldOverrideDefaultCharacterSelection(c,!0)?(b.preventDefault(),require("LexicalSelection").$moveCharacter(c,
e,!0),!0):!1;},_require_Lexical.COMMAND_PRIORITY_EDITOR),d.registerCommand(_require_Lexical.KEY_ARROW_RIGHT_COMMAND,function(b){var c=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(c))return!1;var e=b.shiftKey;return require("LexicalSelection").$shouldOverrideDefaultCharacterSelection(c,!1)?(b.preventDefault(),require("LexicalSelection").$moveCharacter(c,e,!1),!0):!1;},_require_Lexical.COMMAND_PRIORITY_EDITOR),d.registerCommand(_require_Lexical.KEY_BACKSPACE_COMMAND,function(b){var c=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(c)||q&&"ko-KR"===navigator.language)return!1;b.preventDefault();return d.dispatchCommand(require("Lexical").DELETE_CHARACTER_COMMAND,
!0);},_require_Lexical.COMMAND_PRIORITY_EDITOR),d.registerCommand(_require_Lexical.KEY_DELETE_COMMAND,function(b){var c=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(c))return!1;b.preventDefault();return d.dispatchCommand(require("Lexical").DELETE_CHARACTER_COMMAND,!1);},_require_Lexical.COMMAND_PRIORITY_EDITOR),d.registerCommand(_require_Lexical.KEY_ENTER_COMMAND,function(b){var c=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(c))return!1;if(null!==b){if((q||p||t)&&m)return!1;b.preventDefault();}return d.dispatchCommand(require("Lexical").INSERT_LINE_BREAK_COMMAND,!1);},_require_Lexical.COMMAND_PRIORITY_EDITOR),d.registerCommand(_require_Lexical.SELECT_ALL_COMMAND,
function(){require("Lexical").$selectAll();return!0;},_require_Lexical.COMMAND_PRIORITY_EDITOR),d.registerCommand(_require_Lexical.COPY_COMMAND,function(b){var c=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(c))return!1;u(b,d);return!0;},_require_Lexical.COMMAND_PRIORITY_EDITOR),d.registerCommand(_require_Lexical.CUT_COMMAND,function(b){var c=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(c))return!1;w(b,d);return!0;},_require_Lexical.COMMAND_PRIORITY_EDITOR),d.registerCommand(_require_Lexical.PASTE_COMMAND,function(b){var c=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(c))return!1;v(b,d);return!0;},_require_Lexical.COMMAND_PRIORITY_EDITOR),d.registerCommand(_require_Lexical.DROP_COMMAND,
function(b){var c=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(c))return!1;b.preventDefault();return!0;},_require_Lexical.COMMAND_PRIORITY_EDITOR),d.registerCommand(_require_Lexical.DRAGSTART_COMMAND,function(b){var c=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(c))return!1;b.preventDefault();return!0;},_require_Lexical.COMMAND_PRIORITY_EDITOR));};}),null);
__d("LexicalPlainTextPlugin",["cr:739"],(function(a,b,c,d,e,f){e.exports=b("cr:739")}),null);
__d("useLexicalEditable",["cr:4793"],(function(a,b,c,d,e,f){e.exports=b("cr:4793")}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @fullSyntaxTransform
 * @generated SignedSource<<fd2c308de0e18b9139e4028951b80376>>
 * @noflow
 * @nolint
 * @oncall lexical_web_text_editor
 * @preserve-invariant-messages
 * @preserve-whitespace
 * @preventMunge
 */__d("LexicalPlainTextPlugin.prod",["LexicalComposerContext","LexicalDragon","LexicalPlainText","LexicalText","LexicalUtils","ReactDOM","react","useLexicalEditable"],(function $module_LexicalPlainTextPlugin_prod(global,require,requireDynamic,requireLazy,module,exports){

'use strict';var _require_closure_react;var n=_require_closure_react||(_require_closure_react=require("react")),q=_require_closure_react;var w="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?n.useLayoutEffect:n.useEffect;function x(a){return a.getEditorState().read(require("LexicalText").$canShowPlaceholderCurry(a.isComposing()));}
function y(a){var _n$useState=n.useState(function(){return x(a);}),c=_n$useState[0],b=_n$useState[1];w(function(){function d(){var f=x(a);b(f);}d();return require("LexicalUtils").mergeRegister(a.registerUpdateListener(function(){d();}),a.registerEditableListener(function(){d();}));},[a]);return c;}
function z(a,c){var _n$useState2=n.useState(function(){return a.getDecorators();}),b=_n$useState2[0],d=_n$useState2[1];w(function(){return a.registerDecoratorListener(function(f){require("ReactDOM").flushSync(function(){d(f);});});},[a]);n.useEffect(function(){d(a.getDecorators());},[a]);return n.useMemo(function(){var f=[],r=Object.keys(b);for(var k=0;k<r.length;k++){var l=r[k],B=q.jsx(c,{onError:function onError(A){return a._onError(A);},children:q.jsx(n.Suspense,{fallback:null,children:b[l]})}),t=a.getElementByKey(l);null!==t&&f.push(require("ReactDOM").createPortal(B,t,l));}return f;},[c,b,a]);}
function C(a){w(function(){return require("LexicalUtils").mergeRegister(require("LexicalPlainText").registerPlainText(a),require("LexicalDragon").registerDragonSupport(a));},[a]);}function D(_ref){var a=_ref.content;var _e$useLexicalComposer=require("LexicalComposerContext").useLexicalComposerContext(),c=_e$useLexicalComposer[0];c=y(c);var b=require("useLexicalEditable").useLexicalEditable();return c?"function"===typeof a?a(b):a:null;}exports.PlainTextPlugin=function(_ref2){var a=_ref2.contentEditable,_ref2$placeholder=_ref2.placeholder,c=_ref2$placeholder===void 0?null:_ref2$placeholder,b=_ref2.ErrorBoundary;var _e$useLexicalComposer2=require("LexicalComposerContext").useLexicalComposerContext(),d=_e$useLexicalComposer2[0];b=z(d,b);C(d);return q.jsxs(q.Fragment,{children:[a,q.jsx(D,{content:c}),b]});};}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @fullSyntaxTransform
 * @generated SignedSource<<bfc07fc45dc7a6a9e007cec3425c3bee>>
 * @noflow
 * @nolint
 * @oncall lexical_web_text_editor
 * @preserve-invariant-messages
 * @preserve-whitespace
 * @preventMunge
 */__d("LexicalSelection.prod",["Lexical"],(function $module_LexicalSelection_prod(global,require,requireDynamic,requireLazy,module,exports){

'use strict';var u;function w(a){var d=new URLSearchParams();d.append("code",a);for(var c=1;c<arguments.length;c++){d.append("v",arguments[c]);}throw Error("Minified Lexical error #"+a+"; visit https://lexical.dev/docs/error?"+d+" for the full message or "+"use the non-minified dev environment for full errors and additional helpful warnings.");}u=w&&w.__esModule&&Object.prototype.hasOwnProperty.call(w,"default")?w["default"]:w;var x=new Map();
function y(a){for(;null!=a;){if(a.nodeType===Node.TEXT_NODE)return a;a=a.firstChild;}return null;}function z(a){var d=a.parentNode;if(null==d)throw Error("Should never happen");return[d,Array.from(d.childNodes).indexOf(a)];}function B(a){var d={};if(!a)return d;a=a.split(";");for(var _iterator=a,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++];}else{_i=_iterator.next();if(_i.done)break;_ref=_i.value;}var c=_ref;if(""!==c){var _c$split=c.split(/:([^]+)/),e=_c$split[0],b=_c$split[1];e&&b&&(d[e.trim()]=b.trim());}}return d;}function C(a){var d=x.get(a);void 0===d&&(d=B(a),x.set(a,d));return d;}
function D(a){var d="";for(var c in a){c&&(d+=c+": "+a[c]+";");}return d;}
function E(a,d,c){var e=d.getNode();if(require("Lexical").$isElementNode(e)){var b=e.getDescendantByIndex(d.offset);null!==b&&(e=b);}for(;0<c&&null!==e;){require("Lexical").$isElementNode(e)&&(b=e.getLastDescendant(),null!==b&&(e=b));var g=e.getPreviousSibling(),h=0;if(null===g){b=e.getParentOrThrow();for(var f=b.getPreviousSibling();null===f;){b=b.getParent();if(null===b){g=null;break;}f=b.getPreviousSibling();}null!==b&&(h=b.isInline()?0:2,g=f);}f=e.getTextContent();""===f&&require("Lexical").$isElementNode(e)&&!e.isInline()&&(f="\n\n");b=f.length;
if(!require("Lexical").$isTextNode(e)||c>=b)f=e.getParent(),e.remove(),null==f||0!==f.getChildrenSize()||require("Lexical").$isRootNode(f)||f.remove(),c-=b+h,e=g;else{(function(){var _e$splitText,_e$splitText2;var l=e.getKey();h=a.getEditorState().read(function(){var p=require("Lexical").$getNodeByKey(l);return require("Lexical").$isTextNode(p)&&p.isSimpleText()?p.getTextContent():null;});g=b-c;var m=f.slice(0,g);null!==h&&h!==f?(c=require("Lexical").$getPreviousSelection(),b=e,e.isSimpleText()?e.setTextContent(h):(b=require("Lexical").$createTextNode(h),e.replace(b)),require("Lexical").$isRangeSelection(c)&&c.isCollapsed()&&(c=c.anchor.offset,b.select(c,c))):
e.isSimpleText()?(h=d.key===l,f=d.offset,f<c&&(f=b),c=h?f-c:0,b=h?f:g,h&&0===c?((_e$splitText=e.splitText(c,b),c=_e$splitText[0],_e$splitText),c.remove()):((_e$splitText2=e.splitText(c,b),c=_e$splitText2[1],_e$splitText2),c.remove())):(c=require("Lexical").$createTextNode(m),e.replace(c));c=0;})();}}}function F(a,d){var c=C("getStyle"in a?a.getStyle():a.style);d=Object.entries(d).reduce(function(b,_ref2){var g=_ref2[0],h=_ref2[1];"function"===typeof h?b[g]=h(c[g],a):null===h?delete b[g]:b[g]=h;return b;},babelHelpers["extends"]({},c));var e=D(d);a.setStyle(e);x.set(e,d);}
function G(a){for(;null!==a&&!require("Lexical").$isRootOrShadowRoot(a);){var d=a.getLatest(),c=a.getParent();0===d.getChildrenSize()&&a.remove(!0);a=c;}}
function H(a,d,c,e,b){if(b===void 0){b=null;}if(0!==d.length){var g=d[0],h=new Map(),f=[];g=require("Lexical").$isElementNode(g)?g:g.getParentOrThrow();g.isInline()&&(g=g.getParentOrThrow());for(var l=!1;null!==g;){var m=g.getPreviousSibling();if(null!==m){g=m;l=!0;break;}g=g.getParentOrThrow();if(require("Lexical").$isRootOrShadowRoot(g))break;}m=new Set();for(var p=0;p<c;p++){var q=d[p];require("Lexical").$isElementNode(q)&&0===q.getChildrenSize()&&m.add(q.getKey());}var n=new Set();for(p=0;p<c;p++){q=d[p];var r=q.getParent();null!==r&&r.isInline()&&(r=r.getParent());if(null!==
r&&require("Lexical").$isLeafNode(q)&&!n.has(q.getKey())){if(q=r.getKey(),void 0===h.get(q)){(function(){var t=e();t.setFormat(r.getFormatType());t.setIndent(r.getIndent());f.push(t);h.set(q,t);r.getChildren().forEach(function(v){t.append(v);n.add(v.getKey());require("Lexical").$isElementNode(v)&&v.getChildrenKeys().forEach(function(A){return n.add(A);});});G(r);})();}}else m.has(q.getKey())&&(require("Lexical").$isElementNode(q)||u(179),r=e(),r.setFormat(q.getFormatType()),r.setIndent(q.getIndent()),f.push(r),q.remove(!0));}if(null!==b)for(d=0;d<f.length;d++){b.append(f[d]);}d=null;if(require("Lexical").$isRootOrShadowRoot(g)){if(l){if(null!==
b)g.insertAfter(b);else for(b=f.length-1;0<=b;b--){g.insertAfter(f[b]);}}else if(l=g.getFirstChild(),require("Lexical").$isElementNode(l)&&(g=l),null===l){if(b)g.append(b);else for(b=0;b<f.length;b++){l=f[b],g.append(l),d=l;}}else if(null!==b)l.insertBefore(b);else for(g=0;g<f.length;g++){b=f[g],l.insertBefore(b),d=b;}}else if(b)g.insertAfter(b);else for(b=f.length-1;0<=b;b--){l=f[b],g.insertAfter(l),d=l;}f=require("Lexical").$getPreviousSelection();require("Lexical").$isRangeSelection(f)&&f.anchor.getNode().isAttached()&&f.focus.getNode().isAttached()?require("Lexical").$setSelection(f.clone()):
null!==d?d.selectEnd():a.dirty=!0;}}function I(a,d,c,e){a.modify(d?"extend":"move",c,e);}function J(a){a=a.anchor.getNode();return"rtl"===(require("Lexical").$isRootNode(a)?a:a.getParentOrThrow()).getDirection();}function K(a){if(require("Lexical").$isDecoratorNode(a)||!require("Lexical").$isElementNode(a)||require("Lexical").$isRootOrShadowRoot(a))return!1;var d=a.getFirstChild();d=null===d||require("Lexical").$isLineBreakNode(d)||require("Lexical").$isTextNode(d)||d.isInline();return!a.isInline()&&!1!==a.canBeEmpty()&&d;}exports.$cloneWithProperties=require("Lexical").$cloneWithProperties;exports.$selectAll=require("Lexical").$selectAll;
exports.$addNodeStyle=function(a){a=a.getStyle();var d=B(a);x.set(a,d);};
exports.$getSelectionStyleValueForProperty=function(a,d,c){if(c===void 0){c="";}var e=null,b=a.getNodes();var g=a.anchor,h=a.focus,f=a.isBackward();var l=f?h.offset:g.offset;g=f?h.getNode():g.getNode();if(require("Lexical").$isRangeSelection(a)&&a.isCollapsed()&&""!==a.style&&(a=C(a.style),null!==a&&d in a))return a[d];for(a=0;a<b.length;a++){var m=b[a];if((0===a||0!==l||!m.is(g))&&require("Lexical").$isTextNode(m))if(h=d,f=c,m=m.getStyle(),m=C(m),h=null!==m?m[h]||f:f,null===e)e=h;else if(e!==h){e="";break;}}return null===e?c:e;};
exports.$isAtNodeEnd=function(a){if("text"===a.type)return a.offset===a.getNode().getTextContentSize();var d=a.getNode();require("Lexical").$isElementNode(d)||u(177);return a.offset===d.getChildrenSize();};exports.$isParentElementRTL=J;exports.$moveCaretSelection=I;exports.$moveCharacter=function(a,d,c){var e=J(a);I(a,d,c?!e:e,"character");};
exports.$patchStyleText=function(a,d){var c=a.getNodes(),e=c.length,b=a.getStartEndPoints();if(null!==b){var _b=b,g=_b[0],h=_b[1];--e;b=c[0];var f=c[e];if(a.isCollapsed()&&require("Lexical").$isRangeSelection(a))F(a,d);else{var l=b.getTextContent().length,m=h.offset,p=g.offset,q=g.isBefore(h),n=q?p:m;a=q?m:p;var r=q?g.type:h.type,t=q?h.type:g.type,v=q?h.key:g.key;if(require("Lexical").$isTextNode(b)&&n===l){var A=b.getNextSibling();require("Lexical").$isTextNode(A)&&(n=p=0,b=A);}if(1===c.length)require("Lexical").$isTextNode(b)&&b.canHaveFormat()&&(n="element"===r?0:p>m?m:p,a=
"element"===t?l:p>m?p:m,n!==a&&(require("Lexical").$isTokenOrSegmented(b)||0===n&&a===l?(F(b,d),b.select(n,a)):(c=b.splitText(n,a),c=0===n?c[0]:c[1],F(c,d),c.select(0,a-n))));else for(require("Lexical").$isTextNode(b)&&n<b.getTextContentSize()&&b.canHaveFormat()&&(0===n||require("Lexical").$isTokenOrSegmented(b)||(b=b.splitText(n)[1],n=0,q?g.set(b.getKey(),n,"text"):h.set(b.getKey(),n,"text")),F(b,d)),require("Lexical").$isTextNode(f)&&f.canHaveFormat()&&(n=f.getTextContent().length,f.__key!==v&&0!==a&&(a=n),a===n||require("Lexical").$isTokenOrSegmented(f)||(_f$splitText=f.splitText(a),f=_f$splitText[0],_f$splitText),0===
a&&"element"!==t||F(f,d)),a=1;a<e;a++){var _f$splitText;n=c[a],t=n.getKey(),require("Lexical").$isTextNode(n)&&n.canHaveFormat()&&t!==b.getKey()&&t!==f.getKey()&&!n.isToken()&&F(n,d);}}}};
exports.$setBlocksType=function(a,d){if(null!==a){var c=a.getStartEndPoints();c=c?c[0]:null;if(null!==c&&"root"===c.key)d=d(),a=require("Lexical").$getRoot(),(c=a.getFirstChild())?c.replace(d,!0):a.append(d);else{a=a.getNodes();if(null!==c){for(c=c.getNode();null!==c&&null!==c.getParent()&&!K(c);){c=c.getParentOrThrow();}c=K(c)?c:null;}else c=!1;c&&-1===a.indexOf(c)&&a.push(c);for(c=0;c<a.length;c++){var e=a[c];if(!K(e))continue;require("Lexical").$isElementNode(e)||u(178);var b=d();b.setFormat(e.getFormatType());b.setIndent(e.getIndent());
e.replace(b,!0);}}}};exports.$shouldOverrideDefaultCharacterSelection=function(a,d){a=require("Lexical").$getAdjacentNode(a.focus,d);return require("Lexical").$isDecoratorNode(a)&&!a.isIsolated()||require("Lexical").$isElementNode(a)&&!a.isInline()&&!a.canBeEmpty();};
exports.$sliceSelectedTextNodeContent=function(a,d){var c=a.getStartEndPoints();if(d.isSelected(a)&&!d.isSegmented()&&!d.isToken()&&null!==c){var _c=c,f=_c[0],l=_c[1];c=a.isBackward();var e=f.getNode(),b=l.getNode(),g=d.is(e),h=d.is(b);if(g||h){var _k$$getCharacterOffse=require("Lexical").$getCharacterOffsets(a),m=_k$$getCharacterOffse[0],p=_k$$getCharacterOffse[1];a=e.is(b);g=d.is(c?b:e);b=d.is(c?e:b);e=0;h=void 0;a?(e=m>p?p:m,h=m>p?m:p):g?(e=c?p:m,h=void 0):b&&(c=c?m:p,e=0,h=c);d.__text=d.__text.slice(e,h);}}return d;};exports.$trimTextContentFromAnchor=E;
exports.$wrapNodes=function(a,d,c){if(c===void 0){c=null;}var e=a.getStartEndPoints(),b=e?e[0]:null;e=a.getNodes();var g=e.length;if(null!==b&&(0===g||1===g&&"element"===b.type&&0===b.getNode().getChildrenSize())){a="text"===b.type?b.getNode().getParentOrThrow():b.getNode();e=a.getChildren();var f=d();f.setFormat(a.getFormatType());f.setIndent(a.getIndent());e.forEach(function(l){return f.append(l);});c&&(f=c.append(f));a.replace(f);}else{b=null;var h=[];for(var _f=0;_f<g;_f++){var l=e[_f];require("Lexical").$isRootOrShadowRoot(l)?(H(a,h,h.length,d,c),h=
[],b=l):null===b||null!==b&&require("Lexical").$hasAncestor(l,b)?h.push(l):(H(a,h,h.length,d,c),h=[l]);}H(a,h,h.length,d,c);}};
exports.createDOMRange=function(a,d,c,e,b){var _z,_z2;var g=d.getKey(),h=e.getKey(),f=document.createRange(),l=a.getElementByKey(g);a=a.getElementByKey(h);require("Lexical").$isTextNode(d)&&(l=y(l));require("Lexical").$isTextNode(e)&&(a=y(a));if(void 0===d||void 0===e||null===l||null===a)return null;"BR"===l.nodeName&&(_z=z(l),l=_z[0],c=_z[1],_z);"BR"===a.nodeName&&(_z2=z(a),a=_z2[0],b=_z2[1],_z2);d=l.firstChild;l===a&&null!=d&&"BR"===d.nodeName&&0===c&&0===b&&(b=1);try{f.setStart(l,c),f.setEnd(a,b);}catch(m){return null;}!f.collapsed||c===b&&g===h||(f.setStart(a,b),f.setEnd(l,
c));return f;};exports.createRectsFromDOMRange=function(a,d){var c=a.getRootElement();if(null===c)return[];a=c.getBoundingClientRect();c=getComputedStyle(c);c=parseFloat(c.paddingLeft)+parseFloat(c.paddingRight);d=Array.from(d.getClientRects());var e=d.length;d.sort(function(g,h){var f=g.top-h.top;return 3>=Math.abs(f)?g.left-h.left:f;});var b;for(var g=0;g<e;g++){var h=d[g],f=h.width+c===a.width;b&&b.top<=h.top&&b.top+b.height>h.top&&b.left+b.width>h.left||f?(d.splice(g--,1),e--):b=h;}return d;};
exports.getCSSFromStyleObject=D;exports.getStyleObjectFromCSS=C;exports.trimTextContentFromAnchor=E;}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @fullSyntaxTransform
 * @generated SignedSource<<954b82dac785882a56228680550111bd>>
 * @noflow
 * @nolint
 * @oncall lexical_web_text_editor
 * @preserve-invariant-messages
 * @preserve-whitespace
 * @preventMunge
 */__d("LexicalText.prod",["Lexical"],(function $module_LexicalText_prod(global,require,requireDynamic,requireLazy,module,exports){

'use strict';function r(){return require("Lexical").$getRoot().getTextContent();}function u(b,e){if(e===void 0){e=!0;}if(b)return!1;b=r();e&&(b=b.trim());return""===b;}function v(b){if(!u(b,!1))return!1;b=require("Lexical").$getRoot().getChildren();var e=b.length;if(1<e)return!1;for(var f=0;f<e;f++){var a=b[f];if(require("Lexical").$isDecoratorNode(a))return!1;if(require("Lexical").$isElementNode(a)){if(!require("Lexical").$isParagraphNode(a)||0!==a.__indent)return!1;a=a.getChildren();var n=a.length;for(var t=0;t<n;t++){if(!require("Lexical").$isTextNode(a[f]))return!1;}}}return!0;}var w;
function x(b){var e=new URLSearchParams();e.append("code",b);for(var a=1;a<arguments.length;a++){e.append("v",arguments[a]);}throw Error("Minified Lexical error #"+b+"; visit https://lexical.dev/docs/error?"+e+" for the full message or "+"use the non-minified dev environment for full errors and additional helpful warnings.");}w=x&&x.__esModule&&Object.prototype.hasOwnProperty.call(x,"default")?x["default"]:x;exports.$canShowPlaceholder=v;exports.$canShowPlaceholderCurry=function(b){return function(){return v(b);};};
exports.$findTextIntersectionFromCharacters=function(b,e){var a=b.getFirstChild();b=0;a:for(;null!==a;){if(require("Lexical").$isElementNode(a)){var f=a.getFirstChild();if(null!==f){a=f;continue;}}else if(require("Lexical").$isTextNode(a)){f=a.getTextContentSize();if(b+f>e)return{node:a,offset:e-b};b+=f;}f=a.getNextSibling();if(null!==f)a=f;else{for(a=a.getParent();null!==a;){f=a.getNextSibling();if(null!==f){a=f;continue a;}a=a.getParent();}break;}}return null;};exports.$isRootTextContentEmpty=u;
exports.$isRootTextContentEmptyCurry=function(b,e){return function(){return u(b,e);};};exports.$rootTextContent=r;
exports.registerLexicalTextEntity=function(b,e,a,f){var n=function n(d){var c=require("Lexical").$createTextNode(d.getTextContent());c.setFormat(d.getFormat());d.replace(c);},t=b.registerNodeTransform(require("Lexical").TextNode,function(d){if(d.isSimpleText()){var c=d.getPreviousSibling(),k=d.getTextContent(),m=d;if(require("Lexical").$isTextNode(c)){var l=c.getTextContent();var h=e(l+k);if(c instanceof a){if(null===h||0!==c.getLatest().__mode){n(c);return;}h=h.end-l.length;if(0<h){m=k.slice(0,h);m=l+m;c.select();c.setTextContent(m);h===k.length?d.remove():(k=k.slice(h),
d.setTextContent(k));return;}}else if(null===h||h.start<l.length)return;}for(d=0;;){var _m$splitText,_m$splitText2;l=e(k);var p=null===l?"":k.slice(l.end);k=p;if(""===p&&(h=m.getNextSibling(),require("Lexical").$isTextNode(h)))if(p=m.getTextContent()+h.getTextContent(),p=e(p),null===p){h instanceof a?n(h):h.markDirty();break;}else if(0!==p.start)break;if(null===l)break;if(0===l.start&&require("Lexical").$isTextNode(c)&&c.isTextEntity()){d+=l.end;continue;}var q=void 0;0===l.start?(_m$splitText=m.splitText(l.end),q=_m$splitText[0],m=_m$splitText[1],_m$splitText):(_m$splitText2=m.splitText(l.start+d,l.end+d),q=_m$splitText2[1],m=_m$splitText2[2],_m$splitText2);void 0===q&&w(165,"nodeToReplace");
c=f(q);c.setFormat(q.getFormat());q.replace(c);if(null==m)break;d=0;}}});b=b.registerNodeTransform(a,function(d){var c=d.getTextContent();var k=e(c);null===k||0!==k.start?n(d):c.length>k.end?d.splitText(k.end):(c=d.getPreviousSibling(),require("Lexical").$isTextNode(c)&&c.isTextEntity()&&(n(c),n(d)),c=d.getNextSibling(),require("Lexical").$isTextNode(c)&&c.isTextEntity()&&(n(c),d instanceof a&&n(d)));});return[t,b];};}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @fullSyntaxTransform
 * @generated SignedSource<<aedc8a4ad24d2b1c4a287d60b479afcf>>
 * @noflow
 * @nolint
 * @oncall lexical_web_text_editor
 * @preserve-invariant-messages
 * @preserve-whitespace
 * @preventMunge
 */__d("LexicalUtils.prod",["Lexical","LexicalSelection","Promise"],(function $module_LexicalUtils_prod(global,require,requireDynamic,requireLazy,module,exports){

'use strict';var _require_closure_Promise;var C;function D(a){var b=new URLSearchParams();b.append("code",a);for(var c=1;c<arguments.length;c++){b.append("v",arguments[c]);}throw Error("Minified Lexical error #"+a+"; visit https://lexical.dev/docs/error?"+b+" for the full message or "+"use the non-minified dev environment for full errors and additional helpful warnings.");}C=D&&D.__esModule&&Object.prototype.hasOwnProperty.call(D,"default")?D["default"]:D;
var E="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,F=E&&"documentMode"in document?document.documentMode:null,G=E&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),H=E&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),I=E&&"InputEvent"in window&&!F?"getTargetRanges"in new window.InputEvent("input"):!1,aa=E&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),ba=E&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,
J=E&&/Android/.test(navigator.userAgent),K=E&&/^(?=.*Chrome).*/i.test(navigator.userAgent),ca=E&&J&&K;function L(){var b=[];for(var _len=arguments.length,a=new Array(_len),_key=0;_key<_len;_key++){a[_key]=arguments[_key];}for(var _i=0;_i<a.length;_i++){var c=a[_i];if(c&&"string"===typeof c){for(var _iterator=c.matchAll(/\S+/g),_isArray=Array.isArray(_iterator),_i2=0,_iterator=_isArray?_iterator:_iterator[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref2;if(_isArray){if(_i2>=_iterator.length)break;_ref2=_iterator[_i2++];}else{_i2=_iterator.next();if(_i2.done)break;_ref2=_i2.value;}var _ref3=_ref2;var d=_ref3[0];b.push(d);}}}return b;}function M(){for(var _len2=arguments.length,a=new Array(_len2),_key2=0;_key2<_len2;_key2++){a[_key2]=arguments[_key2];}return function(){for(var b=a.length-1;0<=b;b--){a[b]();}a.length=0;};}var da={attributes:!0,characterData:!0,childList:!0,subtree:!0};
function N(a,b,c){function d(){null===h&&C(182);null===k&&C(183);var _k$getBoundingClientR=k.getBoundingClientRect(),r=_k$getBoundingClientR.left,z=_k$getBoundingClientR.top,y=require("LexicalSelection").createRectsFromDOMRange(a,b);q.isConnected||k.insertBefore(q,k.firstChild);var m=!1;for(var w=0;w<y.length;w++){var x=y[w];var t=l[w]||document.createElement("div"),A=t.style;"absolute"!==A.position&&(A.position="absolute",m=!0);var p=x.left-r+"px";A.left!==p&&(A.left=p,m=!0);p=x.top-z+"px";A.top!==p&&(t.style.top=p,m=!0);p=x.width+"px";A.width!==p&&(t.style.width=p,m=!0);x=x.height+"px";
A.height!==x&&(t.style.height=x,m=!0);t.parentNode!==q&&(q.append(t),m=!0);l[w]=t;}for(;l.length>y.length;){l.pop();}m&&c(l);}function e(){h=k=null;null!==n&&n.disconnect();n=null;q.remove();for(var _iterator2=l,_isArray2=Array.isArray(_iterator2),_i3=0,_iterator2=_isArray2?_iterator2:_iterator2[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref4;if(_isArray2){if(_i3>=_iterator2.length)break;_ref4=_iterator2[_i3++];}else{_i3=_iterator2.next();if(_i3.done)break;_ref4=_i3.value;}var r=_ref4;r.remove();}l=[];}function f(){var r=a.getRootElement();if(null===r)return e();var z=r.parentElement;if(null===z||!require("Lexical").isHTMLElement(z))return e();e();h=r;k=z;n=new MutationObserver(function(y){var m=a.getRootElement(),x=m&&m.parentElement;if(m!==h||x!==k)return f();for(var _iterator3=y,_isArray3=Array.isArray(_iterator3),_i4=0,_iterator3=_isArray3?_iterator3:_iterator3[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref5;if(_isArray3){if(_i4>=_iterator3.length)break;_ref5=_iterator3[_i4++];}else{_i4=_iterator3.next();if(_i4.done)break;_ref5=_i4.value;}var p=_ref5;if(!q.contains(p.target))return d();}});
n.observe(z,da);d();}var h=null,k=null,n=null,l=[],q=document.createElement("div");q.style.position="relative";var B=a.registerRootListener(f);return function(){B();e();};}
function O(a,b){function c(n){n.read(function(){var l=require("Lexical").$getSelection();if(require("Lexical").$isRangeSelection(l)){var _l=l,q=_l.anchor,B=_l.focus;l=q.getNode();var r=l.getKey(),z=q.offset,y=B.getNode(),m=y.getKey(),x=B.offset,p=a.getElementByKey(r),w=a.getElementByKey(m);r=null===d||null===p||z!==e||r!==d.getKey()||l!==d&&(!require("Lexical").$isTextNode(d)||l.updateDOM(d,p,a._config));m=null===f||null===w||x!==h||m!==f.getKey()||y!==f&&(!require("Lexical").$isTextNode(f)||y.updateDOM(f,w,a._config));if(r||m){p=a.getElementByKey(q.getNode().getKey());var t=
a.getElementByKey(B.getNode().getKey());if(null!==p&&null!==t){m=document.createRange();B.isBefore(q)?(w=t,r=B.offset,t=q.offset):(w=p,r=q.offset,p=t,t=B.offset);var A=require("Lexical").getDOMTextNode(w),ea=require("Lexical").getDOMTextNode(p);m.setStart(A||w,r);m.setEnd(ea||p,t);k();k=N(a,m,function(u){if(void 0===b){for(var _iterator4=u,_isArray4=Array.isArray(_iterator4),_i5=0,_iterator4=_isArray4?_iterator4:_iterator4[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref6;if(_isArray4){if(_i5>=_iterator4.length)break;_ref6=_iterator4[_i5++];}else{_i5=_iterator4.next();if(_i5.done)break;_ref6=_i5.value;}var fa=_ref6;u=fa.style,"Highlight"!==u.background&&(u.background="Highlight"),"HighlightText"!==u.color&&(u.color="HighlightText"),"-1.5px"!==u.marginTop&&(u.marginTop="-1.5px"),"4px"!==u.paddingTop&&(u.paddingTop="4px"),
"0px"!==u.paddingBottom&&(u.paddingBottom="0px");}}else b(u);});}}d=l;e=z;f=y;h=x;}else h=f=e=d=null,k(),k=function k(){};});}var d=null,e=null,f=null,h=null,k=function k(){};c(a.getEditorState());return M(a.registerUpdateListener(function(_ref7){var n=_ref7.editorState;return c(n);}),k,function(){k();});}var ha=E&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!K;function P(a,b){for(var _iterator5=b,_isArray5=Array.isArray(_iterator5),_i6=0,_iterator5=_isArray5?_iterator5:_iterator5[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref8;if(_isArray5){if(_i6>=_iterator5.length)break;_ref8=_iterator5[_i6++];}else{_i6=_iterator5.next();if(_i6.done)break;_ref8=_i6.value;}var c=_ref8;if(a.type.startsWith(c))return!0;}return!1;}var Q={done:!0,value:void 0};
function R(a,b){var _h;a=(a||require("Lexical").$getRoot()).getLatest();var c=S(a),d=a,e=c,f=!0,h=(_h={next:function next(){if(null===d)return Q;if(f)return f=!1,{done:!1,value:{depth:e,node:d}};if(d===b)return Q;if(require("Lexical").$isElementNode(d)&&0<d.getChildrenSize())d=d.getFirstChild(),e++;else{var k;var _ref9=T(d)||[null,0];d=_ref9[0];k=_ref9[1];e+=k;null==b&&e<=c&&(d=null);}return null===d?Q:{done:!1,value:{depth:e,node:d}};}},_h[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]=function(){return h;},_h);return h;}
function T(a){var b=null,c=0;for(;null===b&&null!==a;){b=a.getNextSibling(),null===b?(a=a.getParent(),c--):a=b;}return null===a?null:[a,c];}function S(a){var b=0;for(;null!==(a=a.getParent());){b++;}return b;}var U=function U(a,b){for(;a!==require("Lexical").$getRoot()&&null!=a;){if(b(a))return a;a=a.getParent();}return null;},V=H||!E?!1:void 0;function W(a,b,c){var d=!1;var _loop=function _loop(){if(_isArray6){if(_i7>=_iterator6.length)return"break";_ref10=_iterator6[_i7++];}else{_i7=_iterator6.next();if(_i7.done)return"break";_ref10=_i7.value;}var e=_ref10;b(e)?null!==c&&c(e):(d=!0,require("Lexical").$isElementNode(e)&&W(e,b,c?c:function(f){return e.insertAfter(f);}),e.remove());};for(var _iterator6=X(a),_isArray6=Array.isArray(_iterator6),_i7=0,_iterator6=_isArray6?_iterator6:_iterator6[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref10;var _ret=_loop();if(_ret==="break")break;}return d;}
function Y(a){var _ref11;return _ref11={},_ref11[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]=function(){return Z(a.getFirstChild(),function(b){return b.getNextSibling();});},_ref11;}function X(a){var _ref12;return _ref12={},_ref12[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]=function(){return Z(a.getLastChild(),function(b){return b.getPreviousSibling();});},_ref12;}function Z(a,b){var c=a;return{next:function next(){if(null===c)return Q;var d={done:!1,value:c};c=b(c);return d;}};}exports.$splitNode=require("Lexical").$splitNode;exports.isBlockDomNode=require("Lexical").isBlockDomNode;exports.isHTMLAnchorElement=require("Lexical").isHTMLAnchorElement;exports.isHTMLElement=require("Lexical").isHTMLElement;exports.isInlineDomNode=require("Lexical").isInlineDomNode;
exports.$descendantsMatching=function(a,b){var c=[];a=[].concat(a).reverse();for(var d=a.pop();void 0!==d;d=a.pop()){if(b(d))c.push(d);else if(require("Lexical").$isElementNode(d)){for(var _iterator7=X(d),_isArray7=Array.isArray(_iterator7),_i8=0,_iterator7=_isArray7?_iterator7:_iterator7[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref13;if(_isArray7){if(_i8>=_iterator7.length)break;_ref13=_iterator7[_i8++];}else{_i8=_iterator7.next();if(_i8.done)break;_ref13=_i8.value;}var e=_ref13;a.push(e);}}}return c;};exports.$dfs=function(a,b){return Array.from(R(a,b));};exports.$dfsIterator=R;exports.$filter=function(a,b){var c=[];for(var d=0;d<a.length;d++){var e=b(a[d]);null!==e&&c.push(e);}return c;};exports.$findMatchingParent=U;exports.$firstToLastIterator=Y;exports.$getDepth=S;
exports.$getNearestBlockElementAncestorOrThrow=function(a){var b=U(a,function(c){return require("Lexical").$isElementNode(c)&&!c.isInline();});require("Lexical").$isElementNode(b)||C(4,a.__key);return b;};exports.$getNearestNodeOfType=function(a,b){for(;null!=a;){if(a instanceof b)return a;a=a.getParent();}return null;};exports.$getNextRightPreorderNode=function(a){if(require("Lexical").$isElementNode(a)&&0<a.getChildrenSize())a=a.getLastChild();else{var b=null;for(;null===b&&null!==a;){b=a.getPreviousSibling(),a=null===b?a.getParent():b;}}return a;};
exports.$getNextSiblingOrParentSibling=T;exports.$insertFirst=function(a,b){var c=a.getFirstChild();null!==c?c.insertBefore(b):a.append(b);};
exports.$insertNodeToNearestRoot=function(a){var b=require("Lexical").$getSelection()||require("Lexical").$getPreviousSelection();if(require("Lexical").$isRangeSelection(b)){var _b=b,c=_b.focus;b=c.getNode();c=c.offset;if(require("Lexical").$isRootOrShadowRoot(b))c=b.getChildAtIndex(c),null==c?b.append(a):c.insertBefore(a),a.selectNext();else{var d,e;require("Lexical").$isTextNode(b)?(d=b.getParentOrThrow(),e=b.getIndexWithinParent(),0<c&&(e+=1,b.splitText(c))):(d=b,e=c);var _g$$splitNode=require("Lexical").$splitNode(d,e);b=_g$$splitNode[1];b.insertBefore(a);b.selectStart();}}else null!=b?(b=b.getNodes(),b[b.length-1].getTopLevelElementOrThrow().insertAfter(a)):
require("Lexical").$getRoot().append(a),b=require("Lexical").$createParagraphNode(),a.insertAfter(b),b.select();return a.getLatest();};exports.$isEditorIsNestedEditor=function(a){return null!==a._parentEditor;};exports.$lastToFirstIterator=X;exports.$restoreEditorState=function(a,b){var c=new Map(),d=a._pendingEditorState;for(var _iterator8=b._nodeMap,_isArray8=Array.isArray(_iterator8),_i9=0,_iterator8=_isArray8?_iterator8:_iterator8[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref15;if(_isArray8){if(_i9>=_iterator8.length)break;_ref15=_iterator8[_i9++];}else{_i9=_iterator8.next();if(_i9.done)break;_ref15=_i9.value;}var _ref16=_ref15;var e=_ref16[0];var f=_ref16[1];c.set(e,require("Lexical").$cloneWithProperties(f));}d&&(d._nodeMap=c);a._dirtyType=2;a=b._selection;require("Lexical").$setSelection(null===a?null:a.clone());};
exports.$unwrapAndFilterDescendants=function(a,b){return W(a,b,null);};exports.$unwrapNode=function(a){for(var _iterator9=Y(a),_isArray9=Array.isArray(_iterator9),_i10=0,_iterator9=_isArray9?_iterator9:_iterator9[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref17;if(_isArray9){if(_i10>=_iterator9.length)break;_ref17=_iterator9[_i10++];}else{_i10=_iterator9.next();if(_i10.done)break;_ref17=_i10.value;}var b=_ref17;a.insertBefore(b);}a.remove();};exports.$wrapNodeInElement=function(a,b){b=b();a.replace(b);b.append(a);return b;};exports.CAN_USE_BEFORE_INPUT=I;exports.CAN_USE_DOM=E;exports.IS_ANDROID=J;exports.IS_ANDROID_CHROME=ca;exports.IS_APPLE=G;exports.IS_APPLE_WEBKIT=ha;exports.IS_CHROME=K;exports.IS_FIREFOX=H;exports.IS_IOS=ba;exports.IS_SAFARI=aa;
exports.addClassNamesToElement=function(a){var _a$classList;for(var _len3=arguments.length,b=new Array(_len3>1?_len3-1:0),_key3=1;_key3<_len3;_key3++){b[_key3-1]=arguments[_key3];}b=L.apply(void 0,b);0<b.length&&(_a$classList=a.classList).add.apply(_a$classList,b);};
exports.calculateZoomLevel=function(a){var b=1;if(void 0===V){var c=document.createElement("div");c.style.cssText="position: absolute; opacity: 0; width: 100px; left: -1000px;";document.body.appendChild(c);var d=c.getBoundingClientRect();c.style.setProperty("zoom","2");V=c.getBoundingClientRect().width===d.width;document.body.removeChild(c);}if(V)for(;a;){b*=Number(window.getComputedStyle(a).getPropertyValue("zoom")),a=a.parentElement;}return b;};exports.isMimeType=P;exports.markSelection=O;
exports.mediaFileReader=function(a,b){var c=a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();return new(_require_closure_Promise||(_require_closure_Promise=require("Promise")))(function(d,e){var f=[],h=function h(){var _c$next=c.next(),k=_c$next.done,n=_c$next.value;if(k)return d(f);var l=new FileReader();l.addEventListener("error",e);l.addEventListener("load",function(){var q=l.result;"string"===typeof q&&f.push({file:n,result:q});h();});P(n,b)?l.readAsDataURL(n):h();};h();});};exports.mergeRegister=M;exports.objectKlassEquals=function(a,b){return null!==a?Object.getPrototypeOf(a).constructor.name===b.name:!1;};
exports.positionNodeOnRange=N;
exports.registerNestedElementResolver=function(a,b,c,d){return a.registerNodeTransform(b,function(e){a:{var f=e.getChildren();for(var h=0;h<f.length;h++){if(f[h]instanceof b){f=null;break a;}}for(f=e;null!==f;){if(h=f,f=f.getParent(),f instanceof b){f={child:h,parent:f};break a;}}f=null;}if(null!==f){var _f=f,k=_f.child,n=_f.parent;if(k.is(e)){d(n,e);e=k.getNextSiblings();f=e.length;n.insertAfter(k);if(0!==f){h=c(n);k.insertAfter(h);for(var l=0;l<f;l++){h.append(e[l]);}}n.canBeEmpty()||0!==n.getChildrenSize()||n.remove();}}});};
exports.removeClassNamesFromElement=function(a){var _a$classList2;for(var _len4=arguments.length,b=new Array(_len4>1?_len4-1:0),_key4=1;_key4<_len4;_key4++){b[_key4-1]=arguments[_key4];}b=L.apply(void 0,b);0<b.length&&(_a$classList2=a.classList).remove.apply(_a$classList2,b);};exports.selectionAlwaysOnDisplay=function(a){var b=null,c=function c(){var d=getSelection();d=d&&d.anchorNode;var e=a.getRootElement();null!==d&&null!==e&&e.contains(d)?null!==b&&(b(),b=null):null===b&&(b=O(a));};document.addEventListener("selectionchange",c);return function(){null!==b&&b();document.removeEventListener("selectionchange",c);};};}),null);
__d("MLCInstrumentationPluginDeferred__INTERNAL.react",["react","requireDeferred","useDeferredModuleOnReady"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=c("requireDeferred")("MLCInstrumentationPlugin__INTERNAL.react").__setRef("MLCInstrumentationPluginDeferred__INTERNAL.react");function a(a){var b=c("useDeferredModuleOnReady")(j);return b==null?null:i.jsx(b,babelHelpers["extends"]({},a))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("cometLexicalBaseTheme",[],(function(a,b,c,d,e,f,g){"use strict";a={ltr:"xdpxx8g",rtl:"x1hr2gdg"};b=a;g["default"]=b}),98);
__d("getPrivacyAwareEditorState",["Lexical"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return{nodes:h(a),selection:j(a)}}function h(a){var b=[],c=["key","type","detail","format","mode","children","parent","first","last","size","next","prev"];for(var a=a._nodeMap,d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;f[0];f=f[1];var g={};for(var h=0;h<c.length;h++){var j=c[h],k="__"+j;k=f[k];if(k==null||i(j,k))continue;g[j]=k}b.push(g)}return b}function i(a,b){var c=new Set(["detail","format"]);if(c.has(a)&&b===0)return!0;return a==="mode"&&b==="normal"?!0:!1}function j(a){a=a._selection;if(!d("Lexical").$isRangeSelection(a))return null;var b=a.anchor;a=a.focus;return{anchor:{key:b.key,offset:b.offset,type:b.type},focus:{key:a.key,offset:a.offset,type:a.type}}}g["default"]=a}),98);
__d("mlcErrorHandler__INTERNAL",["getPrivacyAwareEditorState"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,d){var e=document.activeElement,f=null;e!=null&&(f={activeElement:e.nodeName,rootSelected:e===b.getRootElement()});e=window.event;var g=null;e!=null&&(g={altKey:e.altKey,ctrlKey:e.ctrlKey,data:e.data,inputType:e.inputType,isComposing:e.isComposing,keyCode:e.keyCode,metaKey:e.metaKey,shiftKey:e.shiftKey,type:e.type});e=null;try{e=c("getPrivacyAwareEditorState")(b.getEditorState())}catch(a){}d(JSON.stringify({activeElement:f,editorState:e,error:a,event:g}))}g["default"]=a}),98);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @fullSyntaxTransform
 * @generated SignedSource<<107cb35aa913e087fa7572c9e0481a61>>
 * @noflow
 * @nolint
 * @oncall lexical_web_text_editor
 * @preserve-invariant-messages
 * @preserve-whitespace
 * @preventMunge
 */__d("useLexicalEditable.prod",["LexicalComposerContext","react"],(function $module_useLexicalEditable_prod(global,require,requireDynamic,requireLazy,module,exports){

'use strict';var _require_closure_react;var l=_require_closure_react||(_require_closure_react=require("react"));var m="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?l.useLayoutEffect:l.useEffect;function n(a){var _b$useLexicalComposer=require("LexicalComposerContext").useLexicalComposerContext(),c=_b$useLexicalComposer[0],d=l.useMemo(function(){return a(c);},[c,a]),_l$useState=l.useState(function(){return d.initialValueFn();}),g=_l$useState[0],h=_l$useState[1],e=l.useRef(g);m(function(){var q=d.initialValueFn,r=d.subscribe,f=q();e.current!==f&&(e.current=f,h(f));return r(function(k){e.current=k;h(k);});},[d,a]);return g;}
function p(a){return{initialValueFn:function initialValueFn(){return a.isEditable();},subscribe:function subscribe(c){return a.registerEditableListener(c);}};}function t(){return n(p);}exports["default"]=t;exports.useLexicalEditable=t;}),null);
__d("useLexicalInitializeEditor__DEPRECATED",["Lexical","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useLayoutEffect;function a(a){i(function(){a.update(function(){var b=d("Lexical").$getRoot();if(b.isEmpty()){var c=d("Lexical").$createParagraphNode();b.append(c);b=document.activeElement;(d("Lexical").$getSelection()!==null||b!==null&&b===a.getRootElement())&&c.select()}})},[a])}g["default"]=a}),98);